# 微信小程序基本使用

## 1. 什么是微信小程序

微信⼩程序，简称⼩程序，英⽂名 `Mini Program` ，微信小程序是微信内部的,是⼀种不需要下载安装即可使⽤的应⽤，它实现 了应⽤“触⼿可及”的梦想，⽤⼾扫⼀扫或搜⼀下即可打开应⽤

## 2. 环境准备

### 2.1 注册账号

> 微信小程序是谁开发的，它有一个唯一的开发者信息，所以需要注册账号，作为开发者信息证明。
>
> 建议使用全新的邮箱,没有注册过其他小程序和公众号的，也没绑定过微信。

访问[注册页面](https://mp.weixin.qq.com/wxopen/waregister?action=step1)，耐⼼完成注册即可。

### 2.2 获取APPID 

由于后期调⽤微信⼩程序的接⼝(例获取手机信息,微信支付)等功能或者发布上线，需要索取开发者的⼩程序中的 APPID APPID ，所以在注册成功后， 可登录，然后获取APPID。

[登录](https://mp.weixin.qq.com/)，成功后可看到如下界⾯
然后复制你的APPID,悄悄的保存起来，不要给别⼈看到😄

![image-20200307113859371](微信小程序知识点.assets/image-20200307113859371.png)

![image-20200307113916460](微信小程序知识点.assets/image-20200307113916460.png)

### 2.3. 开发⼯具 

[下载微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)(点击安装包一直next即可)

> 开发网页可以通过浏览器预览，而开发小程序应用，需要有自己的开发环境。

![image-20200307115053080](微信小程序知识点.assets/image-20200307115053080.png)

微信⼩程序⾃带开发者⼯具，集**开发、预览、调试、发布**于⼀⾝的完整环境。
但是由于编码的体验不算好，因此建议使⽤`vs code` + `微信小程序编辑工具`来实现编码
`vs code `负责敲代码，` 微信编辑工具`负责预览

## 3. 第⼀个微信⼩程序

### 3.1 打开微信开发者⼯具 

注意：第⼀次登录的时候需要扫码登录

![image-20200307115358749](微信小程序知识点.assets/image-20200307115358749.png)

### 3.2 新建小程序项目

![image-20200307133329306](微信小程序知识点.assets/image-20200307133329306.png)

### 3.3 填写项⽬信息 

目前AppID是用的测试号，测试号不能选择云开发，所以默认没有后端服务此栏，后期可以更改AppID。

![image-20200307133429213](微信小程序知识点.assets/image-20200307133429213.png)

选择测试号后界面如下，新建。

![image-20200307133842735](微信小程序知识点.assets/image-20200307133842735.png)

### 3.4 成功

![image-20200307134050245](微信小程序知识点.assets/image-20200307134050245.png)

## 4. 微信开发者⼯具介绍 

详细的使⽤，可以查看[官网](https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html)

![image-20200307140657075](微信小程序知识点.assets/image-20200307140657075.png)

## 5. ⼩程序结构⽬录 

[⼩程序框架](https://developers.weixin.qq.com/miniprogram/dev/framework/MINA.html)的⽬标是通过尽可能简单、⾼效的⽅式让开发者可以在微信中开发具有原⽣APP体验的服务。
⼩程序框架提供了⾃⼰的视图层描述语⾔`WXML`和`WXSS `，以及` JavaScript` ，并在视图层与逻辑层间提供了数据传输和事件系统，让开发者能够专注于数据与逻辑。

### 5.1 ⼩程序⽂件结构和传统web对比

| 结构 | 传统web    | 微信⼩程序 |
| ---- | ---------- | ---------- |
| 结构 | HTML       | WXML       |
| 样式 | CSS        | WXSS       |
| 逻辑 | Javascript | Javascript |
| 配置 | ⽆         | JSON       |

通过以上对⽐得出，**传统web**是三层结构。⽽微信⼩程序 是四层结构，多了⼀层**配置.json**

### 5.2 基本的项⽬⽬录

![image-20200307143459699](微信小程序知识点.assets/image-20200307143459699.png)

## 6. ⼩程序配置⽂件

⼀个⼩程序应⽤程序会包括最基本的两种配置⽂件。⼀种是全局的`app.json`和⻚⾯⾃⼰的`page.json`

> 注意：配置文件中不能出现注释。

==建议配置文件都在`微信开发者工具`中写，标签类的代码在`vscode`中写，因配置文件在前者才有代码提示==

### 6.1 [全局配置app.json](https://developers.weixin.qq.com/miniprogram/dev/framework/config.html
)

`app.json`是当前⼩程序的全局配置，包括了⼩程序的所有⻚⾯路径、界⾯表现、⽹络超时时间、底部 tab 等。**普通快速启动**项⽬⾥边的`app.json`配置

```json
{  
  "pages":[
    "pages/index/index",
    "pages/logs/logs"  
  ],
  "window":{
    "backgroundTextStyle":"light",
    "navigationBarBackgroundColor": "#fff",
    "navigationBarTitleText": "WeChat",
    "navigationBarTextStyle":"black"
  }
}
```

字段的含义

1. `pages`字段——⽤于描述当前⼩程序所有⻚⾯路径，这是为了让微信客⼾端知道当前你的⼩程序⻚⾯定义在哪个⽬录。 

     页面默认展示`pages`下第一个路径的页面，顺序可修改。	

     <img src="微信小程序知识点.assets/image-20200307155243010.png" alt="image-20200307155243010"/>

2. `window`字段——定义⼩程序所有⻚⾯的顶部背景颜⾊，⽂字颜⾊定义等。 

3. 完整的配置信息请参考[app.json](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html)配置

#### 6.1.1 [tabbar](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html) 

![image-20200307150559481](微信小程序知识点.assets/image-20200307150559481.png)

**和pages同级属性，定义导航栏**

**tabBar属性：**

​	list，

​	selectedColor（激活的文字颜色），

​	position（支持bottom默认/top，若为top则不展示图标）,

​	更多属性参考[tabbar](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html) 

**list中属性：**

​	pagePath：点击图标展示对应路径页面，路径和pages下定义的相同

​	text：图标下的文字

​	iconPath：未激活展示的图标，路径和写图片路径一样

​	selectedIconPath：激活时展示的图标

![image-20200307170619032](微信小程序知识点.assets/image-20200307170619032.png)

### 6.2 [⻚⾯配置page.json](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html)

这⾥的` page.json`是⻚⾯⽬录下的`page.json`，是和⼩程序⻚⾯相关的配置。

作用：单独定义某个页面的属性，如顶部颜⾊、是否允许下拉刷新等等。

⻚⾯的配置只能设置`app.json`中部分`window`配置项的内容，⻚⾯中配置项会覆盖`app.json`的`window`中相同的配置项，其他页面不受影响仅指定页面生效。

| 属性                         | 类型     | 默认值  | 描述                                                         |
| ---------------------------- | -------- | ------- | ------------------------------------------------------------ |
| navigationBarBackgroundColor | HexColor | #000000 | 导航栏背景颜⾊，如`#000000`                                  |
| navigationBarTextStyle       | String   | white   | 导航栏标题颜⾊，仅⽀持` black`/`white`                       |
| navigationBarTitleText       | String   |         | 导航栏标题⽂字内容                                           |
| backgroundColor              | HexColor | #ffffff | 下拉刷新的loading区域背景色                                  |
| backgroundTextStyle          | String   | dark    | 下拉loading的样式，仅⽀持`dark`/`light`                      |
| enablePullDownRefresh        | Boolean  | false   | 是否全局开启下拉刷新。详⻅[Page.onPullDownRefresh](https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onpulldownrefresh) |
| onReachBottomDistance        | Number   | 50      | ⻚⾯上拉触底事件触发时距⻚⾯底部距离，单位为px。详⻅ [Page.onReachBottom](https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onreachbottom) |
| disableScroll                | Boolean  | false   | 设置为`true`则⻚⾯整体不能上下滚动；只在⻚⾯配置中有效，⽆法在`app.json`中设置该项 |

**使用**

> widow下的属性直接写在单个页面配置文件内，在这里是第一属性，作用单独为某个页面进行配置。

![image-20200307172411968](微信小程序知识点.assets/image-20200307172411968.png)

### 6.3 [sitemap 配置-了解即可](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/sitemap.html)

⼩程序根⽬录下的`sitemap.json`⽂件⽤于配置⼩程序及其⻚⾯是否允许被微信索引。

作用：让别人可以搜索到页面，详情查阅文档

## 7. 标签补充

text：类似span标签，行内元素，不会换行。

view：类似div标签，块集元素，会换行。

checkbox：类似复选框，checked值用`{{}}`表变量,`checked='false'`表示字符串即为`true`

block：占位符，不会渲染为dom元素

```html
<text> ----1</text>

<view>333</view>

<checkbox checked="{{true}}" />

<block></block>
```

## 7. 模板语法

WXML（WeiXin Markup Language）是框架设计的⼀套标签语⾔，结合[基础组件](https://developers.weixin.qq.com/miniprogram/dev/component/)、[事件系统](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html)，可以构建出⻚⾯的结构。

### 7.1 数据绑定

#### 7.1.1 普通写法 

```html
<view> {{ message }} </view>
```

```js
Page({
  data: {
    message: 'Hello MINA!'
  }
})
```

#### 7.1.2 组件属性

**属性使用变量：**

​	在vue中，用v-bind，例  `:属性="msg"`

​	在react中，用{ }，例  `属性={msg}`

​	在微信小程序中，用“{{  }}”，例  `属性="{{ msg }"`，注意{{ }}必须写单引号或双引号内

==注意：自定义属性，有些属性名不生效，解决方案未知，怀疑自定义属性必须`data-`开头。==

react中：用{}，例`属性={}`

属性使用变量，属性=“{{变量}}”，一定要用单引号或者双引号包裹

```js
<view id="item-{{id}}"> </view>
```

```js
Page({
  data: {
    id: 0
  }
})
```

#### 7.1.3 bool类型 

不要直接写 checked="false"，其计算结果是⼀个字符串

正确写法：

```js
<checkbox checked="{{false}}"> </checkbox>
```

### 7.2 运算 

==`{{ }}`内可以当变量使用，还可写`表达式`，但不可写`语句`，否则会报错。==

![image-20200308001558429](微信小程序知识点.assets/image-20200308001558429.png)

#### 7.2.1 三元运算

```js
<view hidden="{{flag ? true : false}}"> Hidden </view>
```

#### 7.2.2 算数运算 

```js
<view> {{a + b}} + {{c}} + d </view>
```

```js
Page({
  data: {
    a: 1,
    b: 2,
    c: 3  
  }
})
```

#### 7.2.3 逻辑判断 

```js
<view wx:if="{{length > 5}}"> </view>
```

#### 7.2.4 字符串运算

```js
<view>{{"hello" + name}}</view>
```

```js
Page({
  data:{
    name: 'MINA'
  }
})
```

#### ==7.2.5 注意==

花括号和引号之间如果有空格，将最终被解析成为字符串。

错误示范：

```html
<checkbox checked=" {{false}}" />
```



### 7.3 列表渲染 

#### 7.3.1 wx:for 循环数组、对象

==**代码：**==

​	循环数组

```jsx
<view>
  <view wx:for="{{list}}" wx:for-item="item" wx:for-index="index" wx:key="id">
  索引：{{index}}--值：{{item.name}}
  </view>
</view>
```

```js
Page({
  data: {
    list: [{id:0,name: 'foo',}, {id:1,name: 'bar'}]
  }
})
```

​	循环对象

```html
<view wx:for="{{obj}}" wx:for-item="value" wx:for-index="key" wx:key="name">
  {{value}}------{{key}}
</view>
```

```
obj:{name:'张三',age:18,sex:'男'}
```

==**解释**==

**wx:for**

```
wx:for="{{数组或对象}}" 放循环的数组或对象
```

**wx:for-item		wx:for-index**

```
wx:for-item="这里写变量,表示循环的每一项"
wx:for-index="这里写变量,表示循环项的下标"

项的变量名默认为item
下标变量名默认为index
默认设置,可不写wx:for-item="item" wx:for-index="index"

注意:
	1.多层循环时写防止命名重复，引号内的item和index变量可自行命名,等号前均关键字不可改。
	2.若循环对象则将item命名为value，index命名key,语义更明确。
```

**wx:key**

> wx:key⽤来提⾼数组渲染的性能 

`wx:key`	绑定的值 有如下选择

1. `string`类型，表⽰循环数组中的对象的唯⼀属性如：

     ```js
     list:[{id:0,name:"炒饭"},{id:1,name:"炒面"}]
     
     wx:key="id"
     ```

2. 保留字`*this`，当循环单纯数组时，例[1,2,3]或者['1','2','3']，则需用`*this`，`*this`表循环的每一项

     ```js
     list:[1,2,3,4,5]
      
     wx:key="*this"
     ```

注意：key值若随意乱写,不会报错,但应避免乱写.

#### 7.3.2 block

渲染⼀个包含多节点的结构块block最终不会变成真正的dom元素，block标签不会渲染

```js
<block wx:for="{{[1, 2, 3]}}" wx:key="*this" >
  <view> {{index}}: </view>
	<view> {{item}} </view>
</block>
```

### 7.4 条件渲染 

#### 7.4.1 wx:if

> 类似vue中的，通过添加或删除元素实现。

在框架中，使⽤	`wx:if="{{condition}}"`	来判断是否需要渲染该代码块：

```js
<view wx:if="{{false}}">1</view>
<view wx:elif="{{true}}">2</view>
<view wx:else>3</view>
```

#### 7.4.2 hidden 

> 类似vue中show，不同的是hidden译隐藏，hidden不写值等效于hidden='{{true}}'隐藏，false显示
>
> 通过display实现

```js
<view hidden="{{condition}}"> True </view>
```


频繁切换  ⽤  `hidden`

不常使⽤  ⽤  `wx:if`

## 8. ⼩程序事件的绑定 

⼩程序中绑定事件，通过bind关键字来实现。如`bindtap`、`bindinput`、` bindchange`等
不同的组件⽀持不同的事件，具体看组件的说明即可。不是小驼峰，全小写。

**例：**

​	`bindtap`：绑定`tap`事件，小程序中用`tap`代替`click`，点击时触发事件。

​	`bindinput`：`input`输入框值改变时触发事件。

### 8.1 绑定事件 

```html
<input bindinput="handleInput" />
```

注意：

 1. 是直接写方法名，不用`{{ }}`。

 2. 小程序中标签严格，必须闭合，否则报错。

 3. input标签默认没样式。

 4. 绑定事件时不能带参数、不能带括号、**以下为错误写法**

     ```html
     <!--会直接将'handleInput(100)'整个都解析为方法名,报错:找不到此方法--> 
     
     <input bindinput="handleInput(100)" />
     ```

### 8.2 定义处理函数 

事件函数直接写，和data属性同级,无需写在其他属性内部。

接收 `e事件源对象` 为参数，很多东西可通过 `e` 获取

```js
Page({
  data:{},
  // 绑定的事件
  handleInput: function(e) {
    console.log(e);
    console.log("值被改变了");
  }
})
```

### 8.3 为事件传参 

1. 事件传值，通过标签⾃定义属性的⽅式

     **注意：**
     	a. 必须`data-`开头，`num`为属性名，不以`data-`开头无效。
     	b. 值获取：在函数中`e.currentTarget.dataset.num`获取 ,这里不写`data-num`直接`num`。

     ```html
     <input bindinput="handleInput" data-num="100" />
     ```

### 8.4 事件触发时获取数据

```js
 handleInput: function(e) {
    // 获取自定义属性传的值{num:100}
    console.log(e.currentTarget.dataset)
    
    // 获取输入框的值
    console.log(e.detail.value);
  }
```

### 8.4 获取、更改data值

**获取：**

```js
//在方法内获取data值

this.data.数据名
```

**赋值：**

```js
// 给data上数据赋值方式和vue不同
// 需通过此方式赋值,类似react中的this.setState({})

this.setData({
  num:1
})
```

## 9. 样式 WXSS 

WXSS( `WeiXin Style Sheets` )是⼀套样式语⾔，⽤于描述`WXML`的组件样式。
与**CSS**相⽐，**WXSS**扩展的特性有：

响应式⻓度单位`rpx`样式导⼊

### 9.0 注意事项

1. 无需自己引入样式，小程序会自行帮忙寻找所在文件夹的同名文件`wcss`并引入，所以目录下文件命名一致

2. `pages`内的样式文件，模块化，仅对指定页面有效。
3. `@import`引入的样式文件，模块化，仅对指定页面有效，不污染全局。

3. `app.wxss`是全局样式文件，对所有页面都有效。

     ==总结：`app.wxss`是全局样式文件，其他都局部有效。==

### 9.1 尺⼨单位 

`rpx` （responsive pixel）: 可以根据屏幕宽度进⾏⾃适应。规定屏幕宽px等于`750rpx` 。如在 `iPhone6 `上，屏幕宽度为`375px` ，共有750个物理像素，则 `750rpx = 375px = 750物理像素 `， `1rpx = 0.5px = 1物理像素`。

| 设备         | rpx换算px (屏幕宽度/750) | px换算rpx (750/屏幕宽度) |
| ------------ | ------------------------ | ------------------------ |
| iPhone5      | 1rpx = 0.42px            | 1px = 2.34rpx            |
| iPhone6      | 1rpx=0.5px               | 1px=2rpx                 |
| iPhone6 Plus | 1rpx = 0.552px           | 1px = 1.81rpx            |

 **建议**：  开发微信⼩程序时设计师可以⽤  iPhone6  作为视觉稿的标准。
使⽤步骤：

1.  确定设计稿宽度  pageWidth
2.  计算⽐例   `750rpx = pageWidth px` (规定屏幕宽始终等于`750rpx`由此可得出比例关系)  ,因此   ` 1px=750rpx/pageWidth `。 
3.  在less⽂件中，只要把设计稿中的   `px`   =>   `750/pageWidth rpx`   即可。

```
css和wxss都支持calcs属性

注意:
	1.若750rpx,则数字和rpx中间不能有空格。
	2.运算符两边必须有空格。
```

### 9.2 样式导⼊    

wxss中⽀持样式导⼊功能。使⽤`@import` 语句导⼊外联样式表，只⽀持**相对路径**就 `../` 这类的。

`@import`引入的样式文件，模块化，仅对指定页面有效，不污染全局。

⽰例代码：

```less
/** 结束一定要加 ; 分号 **/
@import "../../common.wxss";		
```

### 9.3 选择器 

特别需要注意的是 ⼩程序 不⽀持通配符` * `因此以下代码⽆效！

```less
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}
```

⽬前⽀持的选择器有：

![image-20200308153337360](微信小程序知识点.assets/image-20200308153337360.png)

### 9.4 ⼩程序中使⽤less 

原⽣⼩程序不⽀持`less` ，其他基于⼩程序的框架⼤体都⽀持，如`wepy `， `mpvue `， `taro `等。 但是仅仅因为⼀个less功能，⽽去引⼊⼀个框架，肯定是不可取的。因此可以⽤以下⽅式来实现。

1. 编辑器是`vscode `

2. 安装插件 `easy less`

     ![image-20200308153537254](微信小程序知识点.assets/image-20200308153537254.png)

3. 在vs code的设置中加⼊如下，配置

     ```json
       "less.compile": {
         "outExt":".wxss"
       }
     ```

4. 在要编写样式的地⽅，新建`less` ⽂件，如`index.less` ,然后正常编辑即可。

     配置后会在当前目录下创建一份`.wxss`后缀的样式文件。

     

     **拓展内容：**

     此插件也可将`less`转为`css`，所以要转哪个时就配置哪个，注销另一个。

     ```json
     //转为css的配置,插件默认转css,此设置是将转后的css文件放到当前目录  
     "less.compile": {
          "out":".\\"
       },
     ```

### 9.5 注释

**less注释**

​	在less文件写注释：转换时，//注释不会被编译 /**/才会被编译

![img](微信小程序知识点.assets/clip_image002.png)

**wxss注释**

​		1. 单独在wxss写注释，`//`不支持，编译器爆红，注释不了

​		![image-20200309020316655](微信小程序知识点.assets/image-20200309020316655.png)

​		2. 支持`/*    */`写法

```less
/*view {background-color: rgb(255, 0, 242);}  */ 
```



**综上：不管写`less`还是`wxss`都写多行注释，防止出错，养成好习惯。**

## 10. [常⻅组件](https://developers.weixin.qq.com/miniprogram/dev/component/)

重点讲解⼩程序中常⽤的布局组件

`view,text,rich-text,button,image,navigator,icon,swiper,radio,checkbox。 ` 等

### 10.1 [view](https://developers.weixin.qq.com/miniprogram/dev/component/view.html) 

代替 原来的`div `标签

```html
<view hover-class="h-class">
   点击我试试
</view>
```

### 10.2 [text](https://developers.weixin.qq.com/miniprogram/dev/component/text.html)   

1. ⽂本标签 
2.  只能嵌套text
3.  ⻓按⽂字可以复制（只有该标签有这个功能） 
4. 可以对空格  回⻋  进⾏编码

![image-20200309021504513](微信小程序知识点.assets/image-20200309021504513.png)

#### 10.2.1 代码 

```html
<text selectable="{{false}}" decode="{{false}}">
   普&nbsp;通  
</text>
```

### 10.3 [image](https://developers.weixin.qq.com/miniprogram/dev/component/image.html) 

1. 图⽚标签，image组件默认宽度320px、⾼度240px
2. ⽀持懒加载

![image-20200309021736510](微信小程序知识点.assets/image-20200309021736510.png)

mode   有效值：
mode   有   13   种模式，其中   4   种是缩放模式，9   种是裁剪模式。

![image-20200309021837933](微信小程序知识点.assets/image-20200309021837933.png)

### 10.4 [swiper](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html) 

> 微信内置轮播图组件

![image-20200309022135256](微信小程序知识点.assets/image-20200309022135256.png)

**默认宽度 100% ⾼度 150px**

![image-20200309022225811](微信小程序知识点.assets/image-20200309022225811.png)

#### 10.4.1 swiper 

滑块视图容器。

#### 10.4.2 swiper-item 

> 滑块

**默认宽度和⾼度都是100%**

### 10.5 [navigator](https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html) 

> 导航组件 类似超链接标签

![image-20200309022438889](微信小程序知识点.assets/image-20200309022438889.png)

![image-20200309022507459](微信小程序知识点.assets/image-20200309022507459.png)

### 10.6 [rich-text](https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html) 

>  富文本标签

可以将字符串解析成 对应标签，类似 vue中`v-html`功能

![image-20200309022639251](微信小程序知识点.assets/image-20200309022639251.png)

![image-20200309022659029](微信小程序知识点.assets/image-20200309022659029.png)

#### 10.6.1 nodes属性

![image-20200309022743737](微信小程序知识点.assets/image-20200309022743737.png)



+ `nodes`不推荐使⽤ `String `类型，性能会有所下降。
+ `rich-text`组件内屏蔽所有节点的事件。
+  `attrs ` 属性不⽀持 id ，⽀持 class 。
+  `name`  属性⼤⼩写不敏感。
+  如果使⽤了不受信任的 `HTML`  节点，该节点及其所有⼦节点将会被移除。
+ `img`  标签仅⽀持⽹络图⽚。

### 10.7 [button](https://developers.weixin.qq.com/miniprogram/dev/component/button.html)

![image-20200309023041651](微信小程序知识点.assets/image-20200309023041651.png)

![image-20200309023156746](微信小程序知识点.assets/image-20200309023156746.png)

![image-20200309023213043](微信小程序知识点.assets/image-20200309023213043.png)

![image-20200309023241104](微信小程序知识点.assets/image-20200309023241104.png)

![image-20200309023333742](微信小程序知识点.assets/image-20200309023333742.png)

![image-20200309023356362](微信小程序知识点.assets/image-20200309023356362.png)

![image-20200309023438947](微信小程序知识点.assets/image-20200309023438947.png)

### 10.8 [icon](https://developers.weixin.qq.com/miniprogram/dev/component/icon.html) 

![image-20200309023519698](微信小程序知识点.assets/image-20200309023519698.png)

![image-20200309023532642](微信小程序知识点.assets/image-20200309023532642.png)

![image-20200309023548428](微信小程序知识点.assets/image-20200309023548428.png)

![image-20200309023611530](微信小程序知识点.assets/image-20200309023611530.png)

### 10.9 [radio](https://developers.weixin.qq.com/miniprogram/dev/component/radio.html) 

> 可以通过 color属性来修改颜色

![image-20200309023722730](微信小程序知识点.assets/image-20200309023722730.png)

需要搭配[radio-group](https://developers.weixin.qq.com/miniprogram/dev/component/radio-group.html)⼀起使⽤

## 11. [⾃定义组件](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/)

> 类似vue或者react中的自定义组件

⼩程序允许我们使⽤⾃定义组件的⽅式来构建⻚⾯。

### 11.1 创建⾃定义组件 

> 类似于页面，一个自定义组件由`json` ` wxml` `wxss` ` js` 4个文件组成

可以在微信开发者⼯具中快速创建组件的⽂件结构

![image-20200309024015321](微信小程序知识点.assets/image-20200309024015321.png)

在⽂件夹内 `components/myHeader` ，创建组件名为` myHeader `

![image-20200309024046302](微信小程序知识点.assets/image-20200309024046302.png)

#### 11.1.1 声明组件 

⾸先需要在组件的` json`⽂件中进⾏⾃定义组件声明
`myHeader.json `

```js
{  "component": true }
```

#### 11.1.2 编辑组件 

同时，还要在组件的` wxml `⽂件中编写组件模板，在` wxss `⽂件中加⼊组件样式
`slot` 表⽰插槽，类似vue中的slot
`myHeader.wxml `

```html
<!-- 这是自定义组件的内部WXML结构 -->
<view class="inner">
  {{innerText}}
  <slot></slot>
</view>
```

在组件的` wxss `⽂件中编写样式

> 注意：在组件wxss中不应使用ID选择器、属性选择器和标签名选择器。

`myHeader.wxss`

```js
/* 这里的样式只应用于这个自定义组件 */
.inner {  color: red; }
```

#### 11.1.3. 注册组件  

在组件的 ` js ` ⽂件中，需要使⽤`Component()  `来注册组件，并提供组件的属性定义、内部数据和 ⾃定义⽅法

`myHeader.js`

```js
Component({
  properties: {
  // 这里定义了innerText属性，属性值可以在组件使用时指定
    innerText: {
      // 期望要的数据是 string类型
      type: String,
      value: 'default value',
    }
  },
  data: {
    // 这里是一些组件内部数据
    someData: {}
  },
  methods: {
    // 这里是一个自定义方法
    customMethod: function(){}
  }
})
```

### 11.2 声明引⼊⾃定义组件 

⾸先要在⻚⾯的` json`⽂件中进⾏引⽤声明。还要提供对应的组件名和组件路径

`index.wxml `

```js
{    
  // 引用声明
  "usingComponents": {
    // 要使用的组件的名称		// 组件的路径
    "my-header":"/components/myHeader/myHeader"
  }
}
```

### 11.3 ⻚⾯中使⽤⾃定义组件

```html
<view>
  <!-- 以下是对一个自定义组件的引用 -->
  <my-header inner-text="Some text">
    <view>用来替代slot的</view>
  </my-header>
</view>
```

### 11.4 其他属性 

### 11.5 定义段与⽰例⽅法 

`Component `构造器可⽤于定义组件，调⽤`Component `构造器时可以指定组件的属性、数据、⽅法 等。

![image-20200309025057965](微信小程序知识点.assets/image-20200309025057965.png)

### 11.6 组件-⾃定义组件传参 

1. ⽗组件通过**属性**的⽅式给⼦组件传递参数 
2. ⼦组件通过**事件**的⽅式向⽗组件传递参数

#### 11.6.1 过程  

1. ⽗组件 把数据` {{tabs}} ` 传递到 ⼦组件的  `tabItems`  属性中
2. ⽗组件 监听  `onMyTab`  事件
3. ⼦组件 触发 `bindmytap ` 中的  `mytap ` 事件
     1.  ⾃定义组件触发事件时，需要使⽤`triggerEvent `⽅法，指定 `事件名 `、 `detail `对象
4. ⽗ -> ⼦ 动态传值 ` this.selectComponent("#tabs") `; 

**⽗组件代码**

![image-20200309025627187](微信小程序知识点.assets/image-20200309025627187.png)

![image-20200309025645274](微信小程序知识点.assets/image-20200309025645274.png)

### 11.7 ⼩结 

1. 标签名 是 中划线的⽅式
2. 属性的⽅式 也是要中划线的⽅式 

3. 其他情况可以使⽤驼峰命名 

​		1. 组件的⽂件名如  `myHeader.js ` 的等 

​		2. 组件内的要接收的属性名 如  `innerText`

4. [更多。。](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html)

## 12. ⼩程序⽣命周期 

分为**应⽤⽣命周期**和**⻚⾯⽣命周期**

> 关于小程序前后台的定义和小程序的运行机制，请参考运行机制章节。

### 12.1 [应⽤⽣命周期](https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html) 

![image-20200309030143541](微信小程序知识点.assets/image-20200309030143541.png)

### 12.2 [⻚⾯⽣命周期](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html) 

![image-20200309030233609](微信小程序知识点.assets/image-20200309030233609.png)

### 12.3 ⻚⾯⽣命周期图解 

![image-20200309030329657](微信小程序知识点.assets/image-20200309030329657.png)

![image-20200309030345598](微信小程序知识点.assets/image-20200309030345598.png)