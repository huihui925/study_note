

# å¾®ä¿¡å°ç¨‹åºåŸºæœ¬ä½¿ç”¨

## 1. ä»€ä¹ˆæ˜¯å¾®ä¿¡å°ç¨‹åº

å¾®ä¿¡â¼©ç¨‹åºï¼Œç®€ç§°â¼©ç¨‹åºï¼Œè‹±â½‚å `Mini Program` ï¼Œå¾®ä¿¡å°ç¨‹åºæ˜¯å¾®ä¿¡å†…éƒ¨çš„,æ˜¯â¼€ç§ä¸éœ€è¦ä¸‹è½½å®‰è£…å³å¯ä½¿â½¤çš„åº”â½¤ï¼Œå®ƒå®ç° äº†åº”â½¤â€œè§¦â¼¿å¯åŠâ€çš„æ¢¦æƒ³ï¼Œâ½¤â¼¾æ‰«â¼€æ‰«æˆ–æœâ¼€ä¸‹å³å¯æ‰“å¼€åº”â½¤

![image-20200325083926735](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200325083926735.png)

## 2. ç¯å¢ƒå‡†å¤‡

### 2.1 æ³¨å†Œè´¦å·

> å¾®ä¿¡å°ç¨‹åºæ˜¯è°å¼€å‘çš„ï¼Œå®ƒæœ‰ä¸€ä¸ªå”¯ä¸€çš„å¼€å‘è€…ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦æ³¨å†Œè´¦å·ï¼Œä½œä¸ºå¼€å‘è€…ä¿¡æ¯è¯æ˜ã€‚
>
> å»ºè®®ä½¿ç”¨å…¨æ–°çš„é‚®ç®±,æ²¡æœ‰æ³¨å†Œè¿‡å…¶ä»–å°ç¨‹åºå’Œå…¬ä¼—å·çš„ï¼Œä¹Ÿæ²¡ç»‘å®šè¿‡å¾®ä¿¡ã€‚

è®¿é—®[æ³¨å†Œé¡µé¢](https://mp.weixin.qq.com/wxopen/waregister?action=step1)ï¼Œè€â¼¼å®Œæˆæ³¨å†Œå³å¯ã€‚

### 2.2 è·å–APPID 

ç”±äºåæœŸè°ƒâ½¤å¾®ä¿¡â¼©ç¨‹åºçš„æ¥â¼(ä¾‹è·å–æ‰‹æœºä¿¡æ¯,å¾®ä¿¡æ”¯ä»˜)ç­‰åŠŸèƒ½æˆ–è€…å‘å¸ƒä¸Šçº¿ï¼Œéœ€è¦ç´¢å–å¼€å‘è€…çš„â¼©ç¨‹åºä¸­çš„ APPID APPID ï¼Œæ‰€ä»¥åœ¨æ³¨å†ŒæˆåŠŸåï¼Œ å¯ç™»å½•ï¼Œç„¶åè·å–APPIDã€‚

[ç™»å½•](https://mp.weixin.qq.com/)ï¼ŒæˆåŠŸåå¯çœ‹åˆ°å¦‚ä¸‹ç•Œâ¾¯
ç„¶åå¤åˆ¶ä½ çš„APPID,æ‚„æ‚„çš„ä¿å­˜èµ·æ¥ï¼Œä¸è¦ç»™åˆ«â¼ˆçœ‹åˆ°ğŸ˜„

![image-20200307113859371](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307113859371.png)

![image-20200307113916460](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307113916460.png)

### 2.3. å¼€å‘â¼¯å…· 

[ä¸‹è½½å¾®ä¿¡å¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)(ç‚¹å‡»å®‰è£…åŒ…ä¸€ç›´nextå³å¯)

> å¼€å‘ç½‘é¡µå¯ä»¥é€šè¿‡æµè§ˆå™¨é¢„è§ˆï¼Œè€Œå¼€å‘å°ç¨‹åºåº”ç”¨ï¼Œéœ€è¦æœ‰è‡ªå·±çš„å¼€å‘ç¯å¢ƒã€‚

![image-20200307115053080](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307115053080.png)

å¾®ä¿¡â¼©ç¨‹åºâ¾ƒå¸¦å¼€å‘è€…â¼¯å…·ï¼Œé›†**å¼€å‘ã€é¢„è§ˆã€è°ƒè¯•ã€å‘å¸ƒ**äºâ¼€â¾çš„å®Œæ•´ç¯å¢ƒã€‚
ä½†æ˜¯ç”±äºç¼–ç çš„ä½“éªŒä¸ç®—å¥½ï¼Œå› æ­¤å»ºè®®ä½¿â½¤`vs code` + `å¾®ä¿¡å°ç¨‹åºç¼–è¾‘å·¥å…·`æ¥å®ç°ç¼–ç 
`vs code `è´Ÿè´£æ•²ä»£ç ï¼Œ` å¾®ä¿¡ç¼–è¾‘å·¥å…·`è´Ÿè´£é¢„è§ˆ

## 3. ç¬¬â¼€ä¸ªå¾®ä¿¡â¼©ç¨‹åº

### 3.1 æ‰“å¼€å¾®ä¿¡å¼€å‘è€…â¼¯å…· 

æ³¨æ„ï¼šç¬¬â¼€æ¬¡ç™»å½•çš„æ—¶å€™éœ€è¦æ‰«ç ç™»å½•

![image-20200307115358749](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307115358749.png)

### 3.2 æ–°å»ºå°ç¨‹åºé¡¹ç›®

![image-20200307133329306](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307133329306.png)

### 3.3 å¡«å†™é¡¹â½¬ä¿¡æ¯ 

ç›®å‰AppIDæ˜¯ç”¨çš„æµ‹è¯•å·ï¼Œæµ‹è¯•å·ä¸èƒ½é€‰æ‹©äº‘å¼€å‘ï¼Œæ‰€ä»¥é»˜è®¤æ²¡æœ‰åç«¯æœåŠ¡æ­¤æ ï¼ŒåæœŸå¯ä»¥æ›´æ”¹AppIDã€‚

![image-20200307133429213](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307133429213.png)

é€‰æ‹©æµ‹è¯•å·åç•Œé¢å¦‚ä¸‹ï¼Œæ–°å»ºã€‚

![image-20200307133842735](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307133842735.png)

### 3.4 æˆåŠŸ

![image-20200307134050245](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307134050245.png)

## 4. å¾®ä¿¡å¼€å‘è€…â¼¯å…·ä»‹ç» 

è¯¦ç»†çš„ä½¿â½¤ï¼Œå¯ä»¥æŸ¥çœ‹[å®˜ç½‘](https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html)

![image-20200307140657075](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307140657075.png)

## 5. â¼©ç¨‹åºç»“æ„â½¬å½• 

[â¼©ç¨‹åºæ¡†æ¶](https://developers.weixin.qq.com/miniprogram/dev/framework/MINA.html)çš„â½¬æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•ã€â¾¼æ•ˆçš„â½…å¼è®©å¼€å‘è€…å¯ä»¥åœ¨å¾®ä¿¡ä¸­å¼€å‘å…·æœ‰åŸâ½£APPä½“éªŒçš„æœåŠ¡ã€‚
â¼©ç¨‹åºæ¡†æ¶æä¾›äº†â¾ƒâ¼°çš„è§†å›¾å±‚æè¿°è¯­â¾”`WXML`å’Œ`WXSS `ï¼Œä»¥åŠ` JavaScript` ï¼Œå¹¶åœ¨è§†å›¾å±‚ä¸é€»è¾‘å±‚é—´æä¾›äº†æ•°æ®ä¼ è¾“å’Œäº‹ä»¶ç³»ç»Ÿï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºæ•°æ®ä¸é€»è¾‘ã€‚

### 5.1 â¼©ç¨‹åºâ½‚ä»¶ç»“æ„å’Œä¼ ç»Ÿwebå¯¹æ¯”

| ç»“æ„ | ä¼ ç»Ÿweb    | å¾®ä¿¡â¼©ç¨‹åº |
| ---- | ---------- | ---------- |
| ç»“æ„ | HTML       | WXML       |
| æ ·å¼ | CSS        | WXSS       |
| é€»è¾‘ | Javascript | Javascript |
| é…ç½® | â½†         | JSON       |

é€šè¿‡ä»¥ä¸Šå¯¹â½å¾—å‡ºï¼Œ**ä¼ ç»Ÿweb**æ˜¯ä¸‰å±‚ç»“æ„ã€‚â½½å¾®ä¿¡â¼©ç¨‹åº æ˜¯å››å±‚ç»“æ„ï¼Œå¤šäº†â¼€å±‚**é…ç½®.json**

### 5.2 åŸºæœ¬çš„é¡¹â½¬â½¬å½•

![image-20200307143459699](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307143459699.png)

## 6. â¼©ç¨‹åºé…ç½®â½‚ä»¶

â¼€ä¸ªâ¼©ç¨‹åºåº”â½¤ç¨‹åºä¼šåŒ…æ‹¬æœ€åŸºæœ¬çš„ä¸¤ç§é…ç½®â½‚ä»¶ã€‚â¼€ç§æ˜¯å…¨å±€çš„`app.json`å’Œâ»šâ¾¯â¾ƒâ¼°çš„`page.json`

> æ³¨æ„ï¼šé…ç½®æ–‡ä»¶ä¸­ä¸èƒ½å‡ºç°æ³¨é‡Šã€‚

==å»ºè®®é…ç½®æ–‡ä»¶éƒ½åœ¨`å¾®ä¿¡å¼€å‘è€…å·¥å…·`ä¸­å†™ï¼Œæ ‡ç­¾ç±»çš„ä»£ç åœ¨`vscode`ä¸­å†™ï¼Œå› é…ç½®æ–‡ä»¶åœ¨å‰è€…æ‰æœ‰ä»£ç æç¤º==

### 6.1 [å…¨å±€é…ç½®app.json](https://developers.weixin.qq.com/miniprogram/dev/framework/config.html

)

`app.json`æ˜¯å½“å‰â¼©ç¨‹åºçš„å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬äº†â¼©ç¨‹åºçš„æ‰€æœ‰â»šâ¾¯è·¯å¾„ã€ç•Œâ¾¯è¡¨ç°ã€â½¹ç»œè¶…æ—¶æ—¶é—´ã€åº•éƒ¨ tab ç­‰ã€‚**æ™®é€šå¿«é€Ÿå¯åŠ¨**é¡¹â½¬â¾¥è¾¹çš„`app.json`é…ç½®

```json
{ Â 
  "pages":[
    "pages/index/index",
    "pages/logs/logs"  
  ],
  "window":{
    "backgroundTextStyle":"light",
    "navigationBarBackgroundColor": "#fff",
    "navigationBarTitleText": "WeChat",
    "navigationBarTextStyle":"black"
  }
}
```

å­—æ®µçš„å«ä¹‰

1. `pages`å­—æ®µâ€”â€”â½¤äºæè¿°å½“å‰â¼©ç¨‹åºæ‰€æœ‰â»šâ¾¯è·¯å¾„ï¼Œè¿™æ˜¯ä¸ºäº†è®©å¾®ä¿¡å®¢â¼¾ç«¯çŸ¥é“å½“å‰ä½ çš„â¼©ç¨‹åºâ»šâ¾¯å®šä¹‰åœ¨å“ªä¸ªâ½¬å½•ã€‚ 

     é¡µé¢é»˜è®¤å±•ç¤º`pages`ä¸‹ç¬¬ä¸€ä¸ªè·¯å¾„çš„é¡µé¢ï¼Œé¡ºåºå¯ä¿®æ”¹ã€‚	

     <img src="å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307155243010.png" alt="image-20200307155243010"/>

2. `window`å­—æ®µâ€”â€”å®šä¹‰â¼©ç¨‹åºæ‰€æœ‰â»šâ¾¯çš„é¡¶éƒ¨èƒŒæ™¯é¢œâ¾Šï¼Œâ½‚å­—é¢œâ¾Šå®šä¹‰ç­‰ã€‚ 

3. å®Œæ•´çš„é…ç½®ä¿¡æ¯è¯·å‚è€ƒ[app.json](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html)é…ç½®

#### 6.1.1 [tabbar](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html) 

![image-20200307150559481](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307150559481.png)

**å’ŒpagesåŒçº§å±æ€§ï¼Œå®šä¹‰å¯¼èˆªæ **

**tabBarå±æ€§ï¼š**

â€‹	listï¼Œ

â€‹	selectedColorï¼ˆæ¿€æ´»çš„æ–‡å­—é¢œè‰²ï¼‰ï¼Œ

â€‹	positionï¼ˆæ”¯æŒbottomé»˜è®¤/topï¼Œè‹¥ä¸ºtopåˆ™ä¸å±•ç¤ºå›¾æ ‡ï¼‰,

â€‹	æ›´å¤šå±æ€§å‚è€ƒ[tabbar](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html) 

**listä¸­å±æ€§ï¼š**

â€‹	pagePathï¼šç‚¹å‡»å›¾æ ‡å±•ç¤ºå¯¹åº”è·¯å¾„é¡µé¢ï¼Œè·¯å¾„å’Œpagesä¸‹å®šä¹‰çš„ç›¸åŒ

â€‹	textï¼šå›¾æ ‡ä¸‹çš„æ–‡å­—

â€‹	iconPathï¼šæœªæ¿€æ´»å±•ç¤ºçš„å›¾æ ‡ï¼Œè·¯å¾„å’Œå†™å›¾ç‰‡è·¯å¾„ä¸€æ ·

â€‹	selectedIconPathï¼šæ¿€æ´»æ—¶å±•ç¤ºçš„å›¾æ ‡

![image-20200307170619032](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307170619032.png)

### 6.2 [â»šâ¾¯é…ç½®page.json](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html)æ›´å¤šå‚æ•°çœ‹æ–‡æ¡£

è¿™â¾¥çš„` page.json`æ˜¯â»šâ¾¯â½¬å½•ä¸‹çš„`page.json`ï¼Œæ˜¯å’Œâ¼©ç¨‹åºâ»šâ¾¯ç›¸å…³çš„é…ç½®ã€‚

ä½œç”¨ï¼šå•ç‹¬å®šä¹‰æŸä¸ªé¡µé¢çš„å±æ€§ï¼Œå¦‚é¡¶éƒ¨é¢œâ¾Šã€æ˜¯å¦å…è®¸ä¸‹æ‹‰åˆ·æ–°ç­‰ç­‰ã€‚

â»šâ¾¯çš„é…ç½®åªèƒ½è®¾ç½®`app.json`ä¸­éƒ¨åˆ†`window`é…ç½®é¡¹çš„å†…å®¹ï¼Œâ»šâ¾¯ä¸­é…ç½®é¡¹ä¼šè¦†ç›–`app.json`çš„`window`ä¸­ç›¸åŒçš„é…ç½®é¡¹ï¼Œå…¶ä»–é¡µé¢ä¸å—å½±å“ä»…æŒ‡å®šé¡µé¢ç”Ÿæ•ˆã€‚

æ³¨æ„ï¼š**ä¸‹æ‹‰åˆ·æ–°**å’Œ**è§¦åº•åŠ è½½ä¸‹ä¸€é¡µ**çš„åŠŸèƒ½**éƒ½æ˜¯ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°**

**æœ‰é…ç½®å…¨å±€çš„ä¸‹æ‹‰åˆ·æ–°,ä½†æ˜¯æ¨èä½¿ç”¨å¯¹åº”é¡µé¢çš„ä¸‹æ‹‰åˆ·æ–°, å“ªä¸ªé¡µé¢éœ€è¦åˆ·æ–°, å°±åœ¨å¯¹åº”é¡µé¢è¿›è¡Œé…ç½®**

**ä½¿ç”¨**

> widowä¸‹çš„å±æ€§ç›´æ¥å†™åœ¨å•ä¸ªé¡µé¢é…ç½®æ–‡ä»¶å†…ï¼Œåœ¨è¿™é‡Œæ˜¯ç¬¬ä¸€å±æ€§ï¼Œä½œç”¨å•ç‹¬ä¸ºæŸä¸ªé¡µé¢è¿›è¡Œé…ç½®ã€‚

![image-20200307172411968](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200307172411968.png)

### 6.3 [sitemap é…ç½®-äº†è§£å³å¯](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/sitemap.html)

â¼©ç¨‹åºæ ¹â½¬å½•ä¸‹çš„`sitemap.json`â½‚ä»¶â½¤äºé…ç½®â¼©ç¨‹åºåŠå…¶â»šâ¾¯æ˜¯å¦å…è®¸è¢«å¾®ä¿¡ç´¢å¼•ã€‚

ä½œç”¨ï¼šè®©åˆ«äººå¯ä»¥æœç´¢åˆ°é¡µé¢ï¼Œè¯¦æƒ…æŸ¥é˜…æ–‡æ¡£

## 7. æ ‡ç­¾è¡¥å……

textï¼šç±»ä¼¼spanæ ‡ç­¾ï¼Œè¡Œå†…å…ƒç´ ï¼Œä¸ä¼šæ¢è¡Œã€‚

viewï¼šç±»ä¼¼divæ ‡ç­¾ï¼Œå—é›†å…ƒç´ ï¼Œä¼šæ¢è¡Œã€‚

checkboxï¼šç±»ä¼¼å¤é€‰æ¡†ï¼Œcheckedå€¼ç”¨`{{}}`è¡¨å˜é‡,`checked='false'`è¡¨ç¤ºå­—ç¬¦ä¸²å³ä¸º`true`

blockï¼šå ä½ç¬¦ï¼Œä¸ä¼šæ¸²æŸ“ä¸ºdomå…ƒç´ 

```html
<text> ----1</text>

<view>333</view>

<checkbox checked="{{true}}" />

<block></block>
```

## 7. æ¨¡æ¿è¯­æ³•

WXMLï¼ˆWeiXin Markup Languageï¼‰æ˜¯æ¡†æ¶è®¾è®¡çš„â¼€å¥—æ ‡ç­¾è¯­â¾”ï¼Œç»“åˆ[åŸºç¡€ç»„ä»¶](https://developers.weixin.qq.com/miniprogram/dev/component/)ã€[äº‹ä»¶ç³»ç»Ÿ](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html)ï¼Œå¯ä»¥æ„å»ºå‡ºâ»šâ¾¯çš„ç»“æ„ã€‚

### 7.1 æ•°æ®ç»‘å®š

#### 7.1.1 æ™®é€šå†™æ³• 

```html
<view> {{ message }} </view>
```

```js
Page({
  data: {
    message: 'Hello MINA!'
  }
})
```

#### 7.1.2 ç»„ä»¶å±æ€§

**å±æ€§ä½¿ç”¨å˜é‡ï¼š**

â€‹	åœ¨vueä¸­ï¼Œç”¨v-bindï¼Œä¾‹  `:å±æ€§="msg"`

â€‹	åœ¨reactä¸­ï¼Œç”¨{ }ï¼Œä¾‹  `å±æ€§={msg}`

â€‹	åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œç”¨â€œ{{  }}â€ï¼Œä¾‹  `å±æ€§="{{ msg }"`ï¼Œæ³¨æ„{{ }}å¿…é¡»å†™å•å¼•å·æˆ–åŒå¼•å·å†…

==æ³¨æ„ï¼šè‡ªå®šä¹‰å±æ€§ï¼Œæœ‰äº›å±æ€§åä¸ç”Ÿæ•ˆï¼Œè§£å†³æ–¹æ¡ˆæœªçŸ¥ï¼Œæ€€ç–‘è‡ªå®šä¹‰å±æ€§å¿…é¡»`data-`å¼€å¤´ã€‚==

reactä¸­ï¼šç”¨{}ï¼Œä¾‹`å±æ€§={}`

å±æ€§ä½¿ç”¨å˜é‡ï¼Œå±æ€§=â€œ{{å˜é‡}}â€ï¼Œä¸€å®šè¦ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·åŒ…è£¹

```js
<view id="item-{{id}}"> </view>
```

```js
Page({
  data: {
    id: 0
  }
})
```

#### 7.1.3 boolç±»å‹ 

ä¸è¦ç›´æ¥å†™ checked="false"ï¼Œå…¶è®¡ç®—ç»“æœæ˜¯â¼€ä¸ªå­—ç¬¦ä¸²

æ­£ç¡®å†™æ³•ï¼š

```js
<checkbox checked="{{false}}"> </checkbox>
```

### 7.2 è¿ç®— 

==`{{ }}`å†…å¯ä»¥å½“å˜é‡ä½¿ç”¨ï¼Œè¿˜å¯å†™`è¡¨è¾¾å¼`ï¼Œä½†ä¸å¯å†™`è¯­å¥`ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚==

![image-20200308001558429](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200308001558429.png)

#### 7.2.1 ä¸‰å…ƒè¿ç®—

```js
<view hidden="{{flag ? true : false}}"> Hidden </view>
```

#### 7.2.2 ç®—æ•°è¿ç®— 

```js
<view> {{a + b}} + {{c}} + d </view>
```

```js
Page({
  data: {
    a: 1,
    b: 2,
    c: 3  
  }
})
```

#### 7.2.3 é€»è¾‘åˆ¤æ–­ 

```js
<view wx:if="{{length > 5}}"> </view>
```

#### 7.2.4 å­—ç¬¦ä¸²è¿ç®—

```js
<view>{{"hello" + name}}</view>
```

```js
Page({
  data:{
    name: 'MINA'
  }
})
```

#### ==7.2.5 æ³¨æ„==

èŠ±æ‹¬å·å’Œå¼•å·ä¹‹é—´å¦‚æœæœ‰ç©ºæ ¼ï¼Œå°†æœ€ç»ˆè¢«è§£ææˆä¸ºå­—ç¬¦ä¸²ã€‚

é”™è¯¯ç¤ºèŒƒï¼š

```html
<checkbox checked=" {{false}}" />
```



### 7.3 åˆ—è¡¨æ¸²æŸ“ 

#### 7.3.1 wx:for å¾ªç¯æ•°ç»„ã€å¯¹è±¡

==**ä»£ç ï¼š**==

â€‹	å¾ªç¯æ•°ç»„

```jsx
<view>
  <view wx:for="{{list}}" wx:for-item="item" wx:for-index="index" wx:key="id">
  ç´¢å¼•ï¼š{{index}}--å€¼ï¼š{{item.name}}
  </view>
</view>
```

```js
Page({
  data: {
    list: [{id:0,name: 'foo',}, {id:1,name: 'bar'}]
  }
})
```

â€‹	å¾ªç¯å¯¹è±¡

```html
<view wx:for="{{obj}}" wx:for-item="value" wx:for-index="key" wx:key="name">
  {{value}}------{{key}}
</view>
```

```
obj:{name:'å¼ ä¸‰',age:18,sex:'ç”·'}
```

==**è§£é‡Š**==

**wx:for**

```
wx:for="{{æ•°ç»„æˆ–å¯¹è±¡}}" æ”¾å¾ªç¯çš„æ•°ç»„æˆ–å¯¹è±¡
```

**wx:for-item		wx:for-index**

```
wx:for-item="è¿™é‡Œå†™å˜é‡,è¡¨ç¤ºå¾ªç¯çš„æ¯ä¸€é¡¹"
wx:for-index="è¿™é‡Œå†™å˜é‡,è¡¨ç¤ºå¾ªç¯é¡¹çš„ä¸‹æ ‡"

é¡¹çš„å˜é‡åé»˜è®¤ä¸ºitem
ä¸‹æ ‡å˜é‡åé»˜è®¤ä¸ºindex
é»˜è®¤è®¾ç½®,å¯ä¸å†™wx:for-item="item" wx:for-index="index"

æ³¨æ„:
	1.å¤šå±‚å¾ªç¯æ—¶å†™é˜²æ­¢å‘½åé‡å¤ï¼Œå¼•å·å†…çš„itemå’Œindexå˜é‡å¯è‡ªè¡Œå‘½å,ç­‰å·å‰å‡å…³é”®å­—ä¸å¯æ”¹ã€‚
	2.è‹¥å¾ªç¯å¯¹è±¡åˆ™å°†itemå‘½åä¸ºvalueï¼Œindexå‘½åkey,è¯­ä¹‰æ›´æ˜ç¡®ã€‚
```

**wx:key**

> wx:keyâ½¤æ¥æâ¾¼æ•°ç»„æ¸²æŸ“çš„æ€§èƒ½ 

`wx:key`	ç»‘å®šçš„å€¼ æœ‰å¦‚ä¸‹é€‰æ‹©

1. `string`ç±»å‹ï¼Œè¡¨â½°å¾ªç¯æ•°ç»„ä¸­çš„å¯¹è±¡çš„å”¯â¼€å±æ€§å¦‚ï¼š

     ```js
     list:[{id:0,name:"ç‚’é¥­"},{id:1,name:"ç‚’é¢"}]
     
     wx:key="id"
     ```

2. ä¿ç•™å­—`*this`ï¼Œå½“å¾ªç¯å•çº¯æ•°ç»„æ—¶ï¼Œä¾‹[1,2,3]æˆ–è€…['1','2','3']ï¼Œåˆ™éœ€ç”¨`*this`ï¼Œ`*this`è¡¨å¾ªç¯çš„æ¯ä¸€é¡¹

     ```js
     list:[1,2,3,4,5]
      
     wx:key="*this"
     ```

æ³¨æ„ï¼škeyå€¼è‹¥éšæ„ä¹±å†™,ä¸ä¼šæŠ¥é”™,ä½†åº”é¿å…ä¹±å†™.

#### 7.3.2 block

æ¸²æŸ“â¼€ä¸ªåŒ…å«å¤šèŠ‚ç‚¹çš„ç»“æ„å—blockæœ€ç»ˆä¸ä¼šå˜æˆçœŸæ­£çš„domå…ƒç´ ï¼Œblockæ ‡ç­¾ä¸ä¼šæ¸²æŸ“

```js
<block wx:for="{{[1, 2, 3]}}" wx:key="*this" >
  <view> {{index}}: </view>
	<view> {{item}} </view>
</block>
```

### 7.4 æ¡ä»¶æ¸²æŸ“ 

#### 7.4.1 wx:if

> ç±»ä¼¼vueä¸­çš„ï¼Œé€šè¿‡æ·»åŠ æˆ–åˆ é™¤å…ƒç´ å®ç°ã€‚

åœ¨æ¡†æ¶ä¸­ï¼Œä½¿â½¤	`wx:if="{{condition}}"`	æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ¸²æŸ“è¯¥ä»£ç å—ï¼š

```js
<view wx:if="{{false}}">1</view>
<view wx:elif="{{true}}">2</view>
<view wx:else>3</view>
```

#### 7.4.2 hidden 

> ç±»ä¼¼vueä¸­showï¼Œä¸åŒçš„æ˜¯hiddenè¯‘éšè—ï¼Œhiddenä¸å†™å€¼ç­‰æ•ˆäºhidden='{{true}}'éšè—ï¼Œfalseæ˜¾ç¤º
>
> é€šè¿‡displayå®ç°

```js
<view hidden="{{condition}}"> True </view>
```


é¢‘ç¹åˆ‡æ¢  â½¤  `hidden`

ä¸å¸¸ä½¿â½¤  â½¤  `wx:if`

## 8. â¼©ç¨‹åºäº‹ä»¶çš„ç»‘å®š 

â¼©ç¨‹åºä¸­ç»‘å®šäº‹ä»¶ï¼Œé€šè¿‡bindå…³é”®å­—æ¥å®ç°ã€‚å¦‚`bindtap`ã€`bindinput`ã€` bindchange`ç­‰
ä¸åŒçš„ç»„ä»¶â½€æŒä¸åŒçš„äº‹ä»¶ï¼Œå…·ä½“çœ‹ç»„ä»¶çš„è¯´æ˜å³å¯ã€‚ä¸æ˜¯å°é©¼å³°ï¼Œå…¨å°å†™ã€‚

**ä¾‹ï¼š**

â€‹	`bindtap`ï¼šç»‘å®š`tap`äº‹ä»¶ï¼Œå°ç¨‹åºä¸­ç”¨`tap`ä»£æ›¿`click`ï¼Œç‚¹å‡»æ—¶è§¦å‘äº‹ä»¶ã€‚

â€‹	`bindinput`ï¼š`input`è¾“å…¥æ¡†å€¼æ”¹å˜æ—¶è§¦å‘äº‹ä»¶ã€‚

### 8.1 ç»‘å®šäº‹ä»¶ 

```html
<input bindinput="handleInput" />
```

æ³¨æ„ï¼š

 1. æ˜¯ç›´æ¥å†™æ–¹æ³•åï¼Œä¸ç”¨`{{ }}`ã€‚

 2. å°ç¨‹åºä¸­æ ‡ç­¾ä¸¥æ ¼ï¼Œå¿…é¡»é—­åˆï¼Œå¦åˆ™æŠ¥é”™ã€‚

 3. inputæ ‡ç­¾é»˜è®¤æ²¡æ ·å¼ã€‚

 4. ç»‘å®šäº‹ä»¶æ—¶ä¸èƒ½å¸¦å‚æ•°ã€ä¸èƒ½å¸¦æ‹¬å·ã€**ä»¥ä¸‹ä¸ºé”™è¯¯å†™æ³•**

     ```html
     <!--ä¼šç›´æ¥å°†'handleInput(100)'æ•´ä¸ªéƒ½è§£æä¸ºæ–¹æ³•å,æŠ¥é”™:æ‰¾ä¸åˆ°æ­¤æ–¹æ³•--> 
     
     <input bindinput="handleInput(100)" />
     ```

### 8.2 å®šä¹‰å¤„ç†å‡½æ•° 

äº‹ä»¶å‡½æ•°ç›´æ¥å†™ï¼Œå’Œdataå±æ€§åŒçº§,æ— éœ€å†™åœ¨å…¶ä»–å±æ€§å†…éƒ¨ã€‚

æ¥æ”¶ `eäº‹ä»¶æºå¯¹è±¡` ä¸ºå‚æ•°ï¼Œå¾ˆå¤šä¸œè¥¿å¯é€šè¿‡ `e` è·å–

==è‹¥åœ¨æ–¹æ³•å†…æƒ³ç”¨å…¶ä»–æ–¹æ³•ï¼Œé€šè¿‡`this.æ–¹æ³•å`è·å–==

```js
Page({
  data:{},
  // ç»‘å®šçš„äº‹ä»¶
  handleInput: function(e) {
    console.log(e);
    console.log("å€¼è¢«æ”¹å˜äº†");
  }
})
```

### 8.3 ä¸ºäº‹ä»¶ä¼ å‚ 

1. äº‹ä»¶ä¼ å€¼ï¼Œé€šè¿‡æ ‡ç­¾â¾ƒå®šä¹‰å±æ€§çš„â½…å¼

     **æ³¨æ„ï¼š**
     	a. å¿…é¡»`data-`å¼€å¤´ï¼Œ`num`ä¸ºå±æ€§åï¼Œä¸ä»¥`data-`å¼€å¤´æ— æ•ˆã€‚
     	b. å€¼è·å–ï¼šåœ¨å‡½æ•°ä¸­`e.currentTarget.dataset.num`è·å– ,è¿™é‡Œä¸å†™`data-num`ç›´æ¥`num`ã€‚

     â€‹	c. è‹¥å±æ€§æ˜¯å°é©¼å³°ï¼Œä¹Ÿä¼šéšå¼è½¬åŒ–ä¸ºå…¨å°å†™ï¼Œä¾‹`data-itemLfet`ä¼šå˜æˆ``data-itemlfet`åªèƒ½å‡­å…¨å°å†™çš„å±æ€§å–å‚ï¼Œä¸èƒ½ç”¨å°é©¼å³°çš„å–å‚ã€‚

     ```html
     <input bindinput="handleInput" data-num="100" />
     ```

![image-20200319201714419](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319201714419.png)

### 8.4 äº‹ä»¶è§¦å‘æ—¶è·å–æ•°æ®

```js
Â handleInput: function(e) {
    // è·å–è‡ªå®šä¹‰å±æ€§ä¼ çš„å€¼{num:100}
    console.log(e.currentTarget.dataset)
    
    // è·å–è¾“å…¥æ¡†çš„å€¼
    console.log(e.detail.value);
  }
```

### 8.4 è·å–ã€æ›´æ”¹dataå€¼

**è·å–ï¼š**

```js
//åœ¨æ–¹æ³•å†…è·å–dataå€¼

this.data.æ•°æ®å
```

**èµ‹å€¼ï¼š**

```js
// ç»™dataä¸Šæ•°æ®èµ‹å€¼æ–¹å¼å’Œvueä¸åŒ
// éœ€é€šè¿‡æ­¤æ–¹å¼èµ‹å€¼,ç±»ä¼¼reactä¸­çš„this.setState({})

this.setData({
  num:1
})
```

 ==æ³¨æ„ éå†æ•°ç»„æ—¶ä¿®æ”¹å¾ªç¯é¡¹item,åˆ™dataä¸­çš„æºæ•°æ®ä¹Ÿä¼šè¢«ä¿®æ”¹,ä½†æ˜¯é¡µé¢å¹¶ä¸ä¼šæ›´æ–°,æ‰€ä»¥éœ€setData==

## 9. æ ·å¼ WXSS 

WXSS( `WeiXin Style Sheets` )æ˜¯â¼€å¥—æ ·å¼è¯­â¾”ï¼Œâ½¤äºæè¿°`WXML`çš„ç»„ä»¶æ ·å¼ã€‚
ä¸**CSS**ç›¸â½ï¼Œ**WXSS**æ‰©å±•çš„ç‰¹æ€§æœ‰ï¼š

å“åº”å¼â»“åº¦å•ä½`rpx`æ ·å¼å¯¼â¼Š

### 9.0 æ³¨æ„äº‹é¡¹

1. æ— éœ€è‡ªå·±å¼•å…¥æ ·å¼ï¼Œå°ç¨‹åºä¼šè‡ªè¡Œå¸®å¿™å¯»æ‰¾æ‰€åœ¨æ–‡ä»¶å¤¹çš„åŒåæ–‡ä»¶`wcss`å¹¶å¼•å…¥ï¼Œæ‰€ä»¥ç›®å½•ä¸‹æ–‡ä»¶å‘½åä¸€è‡´

2. `pages`å†…çš„æ ·å¼æ–‡ä»¶ï¼Œæ¨¡å—åŒ–ï¼Œä»…å¯¹æŒ‡å®šé¡µé¢æœ‰æ•ˆã€‚

3. `@import`å¼•å…¥çš„æ ·å¼æ–‡ä»¶ï¼Œæ¨¡å—åŒ–ï¼Œä»…å¯¹æŒ‡å®šé¡µé¢æœ‰æ•ˆï¼Œä¸æ±¡æŸ“å…¨å±€ã€‚æ³¨æ„ï¼Œè‹¥å¼•å…¥`app.wxss`åˆ™å…¨å±€ç”Ÿæ•ˆ

4. `app.wxss`æ˜¯å…¨å±€æ ·å¼æ–‡ä»¶ï¼Œå¯¹æ‰€æœ‰é¡µé¢éƒ½æœ‰æ•ˆã€‚

     ==æ€»ç»“ï¼š==

     â€‹	==`app.wxss`æ˜¯å…¨å±€æ ·å¼æ–‡ä»¶ï¼Œå…¶ä»–éƒ½å±€éƒ¨æœ‰æ•ˆã€‚==

     â€‹	==å¯è‡ªå·±å»ºç›®å½•`styles`é‡Œé¢åˆ†åŠŸèƒ½æ”¾å…¬å…±æ ·å¼ï¼Œè‹¥ç›´æ¥å¼•å…¥é¡µé¢åˆ™ä»…å¯¹é¡µé¢æœ‰æ•ˆï¼Œè‹¥æƒ³å…¨å±€ç”Ÿæ•ˆå¯å¼•å…¥`app.wxss`==

     

### 9.1 å°ºâ¼¨å•ä½ 

`rpx` ï¼ˆresponsive pixelï¼‰: å¯ä»¥æ ¹æ®å±å¹•å®½åº¦è¿›â¾â¾ƒé€‚åº”ã€‚è§„å®šå±å¹•å®½pxç­‰äº`750rpx` ã€‚å¦‚åœ¨ `iPhone6 `ä¸Šï¼Œå±å¹•å®½åº¦ä¸º`375px` ï¼Œå…±æœ‰750ä¸ªç‰©ç†åƒç´ ï¼Œåˆ™ `750rpx = 375px = 750ç‰©ç†åƒç´  `ï¼Œ `1rpx = 0.5px = 1ç‰©ç†åƒç´ `ã€‚

| è®¾å¤‡         | rpxæ¢ç®—px (å±å¹•å®½åº¦/750) | pxæ¢ç®—rpx (750/å±å¹•å®½åº¦) |
| ------------ | ------------------------ | ------------------------ |
| iPhone5      | 1rpx = 0.42px            | 1px = 2.34rpx            |
| iPhone6      | 1rpx=0.5px               | 1px=2rpx                 |
| iPhone6 Plus | 1rpx = 0.552px           | 1px = 1.81rpx            |

 **å»ºè®®**ï¼š  å¼€å‘å¾®ä¿¡â¼©ç¨‹åºæ—¶è®¾è®¡å¸ˆå¯ä»¥â½¤  iPhone6  ä½œä¸ºè§†è§‰ç¨¿çš„æ ‡å‡†ã€‚
ä½¿â½¤æ­¥éª¤ï¼š

1.  ç¡®å®šè®¾è®¡ç¨¿å®½åº¦  pageWidth
2.  è®¡ç®—â½ä¾‹   `750rpx = pageWidth px` (è§„å®šå±å¹•å®½å§‹ç»ˆç­‰äº`750rpx`ç”±æ­¤å¯å¾—å‡ºæ¯”ä¾‹å…³ç³»)  ,å› æ­¤   ` 1px=750rpx/pageWidth `ã€‚ 
3.  åœ¨lessâ½‚ä»¶ä¸­ï¼Œåªè¦æŠŠè®¾è®¡ç¨¿ä¸­çš„   `px`   =>   `750/pageWidth rpx`   å³å¯ã€‚

```
csså’Œwxsséƒ½æ”¯æŒcalcså±æ€§

æ³¨æ„:
	1.è‹¥750rpx,åˆ™æ•°å­—å’Œrpxä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚
	2.è¿ç®—ç¬¦ä¸¤è¾¹å¿…é¡»æœ‰ç©ºæ ¼ã€‚
```

==wxssä¸­ä¹Ÿæ”¯æŒvw,å¶å°”å¯ç”¨==

### 9.2 æ ·å¼å¯¼â¼Š    

wxssä¸­â½€æŒæ ·å¼å¯¼â¼ŠåŠŸèƒ½ã€‚ä½¿â½¤`@import` è¯­å¥å¯¼â¼Šå¤–è”æ ·å¼è¡¨ï¼Œåªâ½€æŒ**ç›¸å¯¹è·¯å¾„**å°± `../` è¿™ç±»çš„ã€‚

`@import`å¼•å…¥çš„æ ·å¼æ–‡ä»¶ï¼Œæ¨¡å—åŒ–ï¼Œä»…å¯¹æŒ‡å®šé¡µé¢æœ‰æ•ˆï¼Œä¸æ±¡æŸ“å…¨å±€ã€‚

â½°ä¾‹ä»£ç ï¼š

```less
/** ç»“æŸä¸€å®šè¦åŠ  ; åˆ†å· **/
@import "../../common.wxss";		
```

### 9.3 é€‰æ‹©å™¨ 

ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ â¼©ç¨‹åº ä¸â½€æŒé€šé…ç¬¦` * `å› æ­¤ä»¥ä¸‹ä»£ç â½†æ•ˆï¼

```less
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}
```

è§£å†³æ–¹æ¡ˆ:

åªæœ‰æ‰‹å†™æ ‡ç­¾,  æ³¨æ„å°ç¨‹åºä¸­æ ‡ç­¾å’Œwebé¡µé¢ä¸åŒ,  æœ€å¤–å±‚æ ¹æ ‡ç­¾æ˜¯page

```css
page,view,text,swiper,swiper-item,image,navigator{
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}
```

â½¬å‰â½€æŒçš„é€‰æ‹©å™¨æœ‰ï¼š

![image-20200308153337360](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200308153337360.png)

### 9.4 â¼©ç¨‹åºä¸­ä½¿â½¤less 

åŸâ½£â¼©ç¨‹åºä¸â½€æŒ`less` ï¼Œå…¶ä»–åŸºäºâ¼©ç¨‹åºçš„æ¡†æ¶â¼¤ä½“éƒ½â½€æŒï¼Œå¦‚`wepy `ï¼Œ `mpvue `ï¼Œ `taro `ç­‰ã€‚ ä½†æ˜¯ä»…ä»…å› ä¸ºâ¼€ä¸ªlessåŠŸèƒ½ï¼Œâ½½å»å¼•â¼Šâ¼€ä¸ªæ¡†æ¶ï¼Œè‚¯å®šæ˜¯ä¸å¯å–çš„ã€‚å› æ­¤å¯ä»¥â½¤ä»¥ä¸‹â½…å¼æ¥å®ç°ã€‚

1. ç¼–è¾‘å™¨æ˜¯`vscode `

2. å®‰è£…æ’ä»¶ `easy less`

     ![image-20200308153537254](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200308153537254.png)

3. åœ¨vs codeçš„è®¾ç½®ä¸­åŠ â¼Šå¦‚ä¸‹ï¼Œé…ç½®

     ```json
      Â "less.compile": {
         "outExt":".wxss"
       }
     ```

4. åœ¨è¦ç¼–å†™æ ·å¼çš„åœ°â½…ï¼Œæ–°å»º`less` â½‚ä»¶ï¼Œå¦‚`index.less` ,ç„¶åæ­£å¸¸ç¼–è¾‘å³å¯ã€‚

     é…ç½®åä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä»½`.wxss`åç¼€çš„æ ·å¼æ–‡ä»¶ã€‚

     

     **æ‹“å±•å†…å®¹ï¼š**

     æ­¤æ’ä»¶ä¹Ÿå¯å°†`less`è½¬ä¸º`css`ï¼Œæ‰€ä»¥è¦è½¬å“ªä¸ªæ—¶å°±é…ç½®å“ªä¸ªï¼Œæ³¨é”€å¦ä¸€ä¸ªã€‚

     ```json
     //è½¬ä¸ºcssçš„é…ç½®,æ’ä»¶é»˜è®¤è½¬css,æ­¤è®¾ç½®æ˜¯å°†è½¬åçš„cssæ–‡ä»¶æ”¾åˆ°å½“å‰ç›®å½•  
     "less.compile": {
          "out":".\\"
       },
     ```

### 9.5 æ³¨é‡Š

**lessæ³¨é‡Š**

â€‹	åœ¨lessæ–‡ä»¶å†™æ³¨é‡Šï¼šè½¬æ¢æ—¶ï¼Œ//æ³¨é‡Šä¸ä¼šè¢«ç¼–è¯‘ /**/æ‰ä¼šè¢«ç¼–è¯‘

![img](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/clip_image002.png)

**wxssæ³¨é‡Š**

â€‹		1. å•ç‹¬åœ¨wxsså†™æ³¨é‡Šï¼Œ`//`ä¸æ”¯æŒï¼Œç¼–è¯‘å™¨çˆ†çº¢ï¼Œæ³¨é‡Šä¸äº†

â€‹		![image-20200309020316655](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309020316655.png)

â€‹		2. æ”¯æŒ`/*    */`å†™æ³•

```less
/*view {background-color: rgb(255, 0, 242);}  */ 
```



**ç»¼ä¸Šï¼šä¸ç®¡å†™`less`è¿˜æ˜¯`wxss`éƒ½å†™å¤šè¡Œæ³¨é‡Šï¼Œé˜²æ­¢å‡ºé”™ï¼Œå…»æˆå¥½ä¹ æƒ¯ã€‚**

## 10. [å¸¸â»…ç»„ä»¶](https://developers.weixin.qq.com/miniprogram/dev/component/)

é‡ç‚¹è®²è§£â¼©ç¨‹åºä¸­å¸¸â½¤çš„å¸ƒå±€ç»„ä»¶

`view,text,rich-text,button,image,navigator,icon,swiper,radio,checkboxã€‚ ` ç­‰

### 10.1 [view](https://developers.weixin.qq.com/miniprogram/dev/component/view.html) 

ä»£æ›¿ åŸæ¥çš„`div `æ ‡ç­¾

```html
<view hover-class="h-class">
   ç‚¹å‡»æˆ‘è¯•è¯•
</view>
```

### 10.2 [text](https://developers.weixin.qq.com/miniprogram/dev/component/text.html)   

1. â½‚æœ¬æ ‡ç­¾ 
2. åªèƒ½åµŒå¥—text
3. â»“æŒ‰â½‚å­—å¯ä»¥å¤åˆ¶ï¼ˆåªæœ‰è¯¥æ ‡ç­¾æœ‰è¿™ä¸ªåŠŸèƒ½ï¼‰ 
4. å¯ä»¥å¯¹ç©ºæ ¼  å›â»‹  è¿›â¾ç¼–ç 

![image-20200309021504513](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309021504513.png)

#### 10.2.1 ä»£ç  

```html
<text selectable="{{false}}" decode="{{false}}">
   æ™®&nbsp;é€š Â 
</text>
```

### 10.3 [image](https://developers.weixin.qq.com/miniprogram/dev/component/image.html) 

> å¾®ä¿¡è§„å®šé¡¹ç›®æ‰“åŒ…ä¸Šçº¿ä¸è¶…è¿‡2Mï¼Œæ‰€ä»¥å»ºè®®é™æ€èµ„æºéƒ½æ”¾åˆ°å¤–ç½‘æˆ–æœåŠ¡å™¨ï¼Œé€šè¿‡ç½‘ç»œè¯·æ±‚è·å–ï¼Œå¤–ç½‘ä¾‹[å›¾åºŠ](https://images.ac.cn/)ï¼Œå›¾åºŠä½¿ç”¨æ­¥éª¤é™„åé¢ã€‚

1. å›¾â½šæ ‡ç­¾ï¼Œimageç»„ä»¶é»˜è®¤å®½åº¦320pxã€â¾¼åº¦240px
2. â½€æŒæ‡’åŠ è½½

![image-20200309155301036](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309155301036.png)

**æ³¨æ„ï¼š**

**`aspectfit`ï¼šç±»ä¼¼`container`ï¼Œå±…ä¸­**

**`aspectfill`ï¼šç±»ä¼¼`cover`ï¼Œå±…ä¸­**

**å°ç¨‹åºä¼šè‡ªåŠ¨åˆ¤æ–­å›¾ç‰‡çš„å“ªè¾¹é•¿å“ªè¾¹çŸ­ï¼Œä¸æ˜¯å›ºå®šæŒ‡å®½é«˜ï¼Œæ‰€ä»¥`aspectfit`é•¿è¾¹å®Œå…¨æ˜¾ç¤ºå³`container`ï¼Œå¦ä¸€ä¸ªåˆ™`cover`**

![image-20200309152554820](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309152554820.png)

mode   æœ‰æ•ˆå€¼ï¼š
![image-20200309155329423](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309155329423.png)

![image-20200309155345464](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309155345464.png)

**é¢å¤–æ‹“å±•**

**å›¾åºŠä½¿ç”¨æ­¥éª¤ï¼š**

> å› å¾®ä¿¡å°ç¨‹åºé™åˆ¶é¡¹ç›®ä¸è¶…è¿‡2Mï¼Œæ‰€ä»¥è‹¥æŠŠå›¾ç‰‡éƒ½æ”¾é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ä¼šé€ æˆä½“ç§¯è¿‡å¤§ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯é€šè¿‡ç½‘ç»œè¯·æ±‚è·å–èµ„æºã€‚ä¸€ç§æ˜¯è‡ªå·±çš„æœåŠ¡å™¨è¯·æ±‚ï¼Œå¦ä¸€ç§æ˜¯å›¾åºŠï¼šæŠŠå›¾ç‰‡æ”¾åˆ«äººçš„ç½‘ç«™æ‰˜ç®¡ï¼Œç›¸å½“äºç½‘ç»œå›¾ç‰‡ï¼ŒèŠ‚çœè‡ªå·±çš„æœåŠ¡å™¨ã€‚
>
> è¿™é‡Œå›¾åºŠä»…åšäº†è§£ï¼Œå› æˆ‘ä»¬åšé¡¹ç›®è‚¯å®šæ˜¯ä»æœåŠ¡å™¨è·å–èµ„æºï¼Œä¸æ˜¯å›¾åºŠï¼Œæ”¾åˆ«äººå®¶å§‹ç»ˆä¸é•¿ä¹…ã€‚

æ­¥éª¤:  é€‰æ‹©å›¾ç‰‡--->ä¸Šä¼ --->å¤åˆ¶url--->ç›´æ¥ä½¿ç”¨å³å¯

![image-20200309134024296](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309134024296.png)

![image-20200309134227131](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309134227131.png)

### 10.4 [swiper](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html) 

> å¾®ä¿¡å†…ç½®è½®æ’­å›¾ç»„ä»¶

![image-20200309022135256](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309022135256.png)

==ä»…éƒ¨åˆ†å±æ€§ï¼Œæ›´å¤šåŠŸèƒ½çœ‹æ–‡æ¡£ï¼š==

![image-20200309022225811](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309022225811.png)

#### 10.4.1 swiper 

è½®æ’­å›¾å¤–å±‚å®¹å™¨ã€‚

å­˜åœ¨é»˜è®¤æ ·å¼å®½åº¦ 100% â¾¼åº¦ 150px ï¼Œä¸ä¼šè¢«å†…å®¹æ’‘å¼€é«˜åº¦éœ€è‡ªè¡Œè®¾ç½®é«˜åº¦

#### 10.4.2 swiper-item 

è½®æ’­å›¾çš„æ¯ä¸€é¡¹ã€‚

é»˜è®¤å®½åº¦å’Œâ¾¼åº¦éƒ½æ˜¯100%ï¼Œç±»ä¼¼`view`ï¼Œé‡Œé¢å¯ä»¥æ”¾`a`é“¾æ¥æˆ–`image`ç»„ä»¶ç­‰ï¼Œ

**æ³¨æ„ï¼šè½®æ’­å›¾çš„`swiper `å’Œ`swiper-item `å¿…é¡»é…å¥—ä½¿ç”¨ã€‚**

#### 10.4.3 åŸºæœ¬ä½¿ç”¨

**ä¸€èˆ¬*autoplay* *circular*  indicator-dots è¿™ä¸‰ä¸ªä¼šä¸€èµ·ä½¿ç”¨,æ³¨æ„è‹¥ä¸ºtrueå¯ä¸å†™,ç›´æ¥å±æ€§åå³å¯,å¸ƒå°”å±æ€§,åªå†™å±æ€§åè¡¨true**

![image-20200309173613983](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309173613983.png)

### 10.5 [navigator](https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html) å¯¼èˆªç»„ä»¶

> å¯¼èˆªç»„ä»¶ ç±»ä¼¼è¶…é“¾æ¥æ ‡ç­¾

**æ³¨æ„: å½“ç‚¹å‡»é“¾æ¥æ— æ³•è·³è½¬,ä¸”è·¯å¾„æ²¡å†™é”™æ—¶,æ£€æŸ¥è·³çš„é¡µé¢,å°ç¨‹åºæ”¯æŒå—,å› ä¸ºä¸åŒopen-type:è®¾ç½®,æ”¯æŒçš„é¡µé¢ä¸åŒ.**

![image-20200309022438889](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309022438889.png)

![](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309022507459.png)

`self`ï¼šæŒ‡è·³è½¬åˆ°è‡ªå·±å°ç¨‹åºå†…çš„é¡µé¢

`miniprogram`: æŒ‡è·³è½¬åˆ°åˆ«äººå°ç¨‹åºçš„é¡µé¢

**open-type:**(ä¸åŒç±»å‹çš„ç»„ä»¶è·³è½¬ éƒ½æœ‰å¯¹åº”çš„jsç¼–ç¨‹å¼å¯¼èˆªè·³è½¬äº‹ä»¶)

`navigate`ï¼šä¿ç•™å½“å‰é¡µé¢æŒ‡å¤´éƒ¨å·¦ä¸Šè§’ä¼šå‡ºç°åé€€æŒ‰é’®,ä½†ä¸èƒ½è°ƒåˆ°tabbaré¡µé¢ é»˜è®¤å€¼

`redirect`: å…³é—­å½“å‰é¡µé¢ä¸ä¼šå‡ºç°è¿”å›æŒ‰é’® ä¸å…è®¸è·³åˆ°`tabbar`é¡µé¢

ä¸å…è®¸è·³åˆ°`tabbar`é¡µé¢ï¼šæŒ‡ç‚¹å‡»`tarbar`ä¸Šçš„é€‰é¡¹ä¼šè·³è½¬çš„é¡µé¢,é€‰é¡¹å†…æŒ‡å‘çš„å¤šä¸ªé¡µé¢ï¼Œè¿™äº›é¡µé¢ä¸è¡Œ

`switchTab`:è·³è½¬åˆ°`tabbar`é¡µé¢,æ²¡æœ‰è¿”å›æŒ‰é’®

`reLauch`: è·³è½¬åˆ°åº”ç”¨å†…ä»»æ„é¡µé¢,æ— è¿”å›æŒ‰é’®

`navigatBack`: ç±»ä¼¼å›é€€,è¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢

`exit`: æŒ‡é€€å‡ºåˆ«äººçš„å°ç¨‹åº, ä¸æ˜¯è‡ªå·±çš„å°ç¨‹åº  

**ä»£ç ç¤ºä¾‹**

```html
// æ³¨æ„: è·³è½¬åˆ°å½“å‰å°ç¨‹åºçš„é¡µé¢,æ‰€ä»¥ç›®å½•ä»/å¼€å§‹,å…¶ä»–ç±»ä¼¼å…¨å±€é…ç½®ä¸­çš„pagesçš„è·¯å¾„è®¾ç½®,æ²¡æœ‰åç¼€
// url: å¯ä»¥ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥ç»å¯¹è·¯å¾„,/å¼€å§‹çš„å°±å«ç»å¯¹ã€‚
<navigator url="/pages/index/index">è·³è½¬åˆ°é¦–é¡µ</navigator>
```

![image-20200310102247872](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200310102247872.png)



**è·¯å¾„ä¼ å‚**

```html
<!--å’Œæ­£å¸¸æ–¹å¼ä¼ å‚ä¸€æ ·-->
<navigator url="/pages/index/index?cid={{5}}">è·³è½¬åˆ°é¦–é¡µ</navigator>
```

**è·å–å‚æ•°**

```js
//åœ¨onLoadç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ é€šè¿‡optionæ¥æ”¶å‚æ•°
onLoad: function (options) {
    console.log(options) //{cid: "5"}
  }
```

![image-20200314151928377](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314151928377.png)

### 10.5 [wx.navigateTo](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html)å¯¼èˆªäº‹ä»¶

ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ä½†æ˜¯ä¸èƒ½è·³åˆ° tabbar é¡µé¢ã€‚ä½¿ç”¨ [wx.navigateBack](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html) å¯ä»¥è¿”å›åˆ°åŸé¡µé¢ã€‚å°ç¨‹åºä¸­é¡µé¢æ ˆæœ€å¤šåå±‚ã€‚

```js
wx.navigateTo({
      url: '/pages/pay/index',
      success: (result)=>{
        
      },
      fail: ()=>{},
      complete: ()=>{}
    });
```

**æƒ³è·³è½¬åˆ°tabé¡µé¢çš„ç”¨å…¶ä»–äº‹ä»¶, å¦‚ä¸‹**

![image-20200319152336962](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319152336962.png)

### 10.6 [rich-text](https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html) 

>  å¯Œæ–‡æœ¬æ ‡ç­¾ richè¯‘å¯Œæœ‰

å¯ä»¥å°†å­—ç¬¦ä¸²è§£ææˆ å¯¹åº”æ ‡ç­¾ï¼Œç±»ä¼¼ vueä¸­`v-html`åŠŸèƒ½

**ä¸¤ç§æ–¹å¼ï¼š**

ç¬¬ä¸€ç§ ï¼ˆå­—ç¬¦ä¸²æ ‡ç­¾ï¼‰

```html
<rich-text nodes="{{html}}"></rich-text>
```

```js
Page({
  data: {
    html:"<h1>æˆ‘æ˜¯å¤§å¤§çš„h1</h1>"
  },
})
```

ç¬¬äºŒç§ï¼ˆèŠ‚ç‚¹æ•°ç»„ï¼‰ç”¨çš„å°‘

==æ³¨æ„ï¼šnameå±æ€§æ”¯æŒéƒ¨åˆ†æ ‡ç­¾ï¼Œå¹¶éæ‰€æœ‰éƒ½æ”¯æŒï¼Œå…·ä½“çœ‹æ–‡æ¡£==

```html
<rich-text nodes="{{html}}"></rich-text>
```

```js
Page({
  data: {
    // 1. æ•°ç»„å¯¹è±¡
    html: [
      {
        // 2. name: æŒ‡å®šæ ‡ç­¾ç±»å‹
        name: "h1",
        // 3. æŒ‡å®šæ ‡ç­¾ä¸Šçš„å±æ€§
        attrs: {
          //æ³¨æ„ è¿™é‡Œstyleæ˜¯å­—ç¬¦ä¸² æ‰€ä»¥å€¼ä¸ç”¨å†å¼•å·,é‡Œé¢åˆ†å·éš”å¼€ï¼ŒèƒŒæ™¯è‰²ä¸ç”¨å°é©¼å³°
          style: 'color:red;background-Color:yellow',
          class: "my"
        },
        // 4. æŒ‡å®šå­èŠ‚ç‚¹ï¼Œè¦å†™çš„ä¸œè¥¿å¯ä»¥å’Œä¸Šé¢çš„ä¸€æ ·å†é‡å¤æ¬¡ï¼Œä½†æ˜¯æ–‡æœ¬èŠ‚ç‚¹ç‰¹æ®Šä¸ä¸€æ ·
        children: [
          {
            name: 'p',
            attrs: {},
            children: [
              {//æ–‡æœ¬èŠ‚ç‚¹ç”¨typeæŒ‡å®šï¼Œtextå±æ€§æŒ‡å®šå†…å®¹
                type: 'text',
                text: 'æˆ‘æ˜¯textå†…å®¹'
              }
            ]
          }
        ]
      }
    ]
  },
})
```



#### 10.6.1 nodeså±æ€§

![image-20200309022743737](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309022743737.png)



+ `nodes`ä¸æ¨èä½¿â½¤ `String `ç±»å‹ï¼Œæ€§èƒ½ä¼šæœ‰æ‰€ä¸‹é™ã€‚
+ `rich-text`ç»„ä»¶å†…å±è”½æ‰€æœ‰èŠ‚ç‚¹çš„äº‹ä»¶ã€‚
+ `attrs ` å±æ€§ä¸â½€æŒ id ï¼Œâ½€æŒ class ã€‚
+ `name`  å±æ€§â¼¤â¼©å†™ä¸æ•æ„Ÿã€‚
+ å¦‚æœä½¿â½¤äº†ä¸å—ä¿¡ä»»çš„ `HTML`  èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹åŠå…¶æ‰€æœ‰â¼¦èŠ‚ç‚¹å°†ä¼šè¢«ç§»é™¤ã€‚
+ `img`  æ ‡ç­¾ä»…â½€æŒâ½¹ç»œå›¾â½šã€‚

### 10.7 [input](https://developers.weixin.qq.com/miniprogram/dev/component/input.html)

```html
  <input placeholder="è¯·è¾“å…¥æ‚¨è¦æœç´¢çš„å•†å“å†…å®¹" bindinput="handleInput"></input>
```

`bindinput`äº‹ä»¶ è¾“å…¥æ¡†å€¼æ”¹å˜è§¦å‘æ­¤å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡`e.tedail.value`è·å–åˆ°è¾“å…¥çš„valueå€¼

inputæ ‡ç­¾é»˜è®¤æ²¡æ ·å¼

**åé¢æœ‰è¾“å…¥æ¡†è¾“å…¥å€¼å¼¹å‡ºæœç´¢æç¤ºå¹¶è§£å†³é˜²æŠ–çš„æ–¹æ³•: è§é¡¹ç›® --->  10æ ‡é¢˜**



è¿˜æœ‰å¾ˆå¤šç»„ä»¶ è‡ªè¡Œçœ‹å®˜æ–¹æ–‡æ¡£

![image-20200319170827960](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319170827960.png)

### 10.7 [button](https://developers.weixin.qq.com/miniprogram/dev/component/button.html)

buttonæŒ‰é’®æŒ‡å®šopentype="contact"å¯ä»¥æ‰“å¼€è”ç³»å®¢æœå¯¹è¯,ä½†æ˜¯æœ‰å¾ˆå¤šé»˜è®¤æ ·å¼,åœ¨ç‰¹å®šéœ€æ±‚ä¸Šæˆ‘ä»¬å¯ä»¥ç”¨éšœçœ¼æ³•å®ç°,å³ æŠŠbuttonè®¾ç½®é€æ˜,æµ®åœ¨å…¶ä»–æ ‡ç­¾ä¸Š,

opentype="share"è½¬å‘åˆ†äº«

**ç›´æ¥ä½¿ç”¨buttonæ—¶å€™ æœ‰é»˜è®¤padding è‡ªå·±è®°å¾—æ¸…é™¤**

```css
button{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
      }
```



![image-20200309023041651](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023041651.png)

![image-20200309023156746](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023156746.png)

![image-20200309023213043](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023213043.png)

![image-20200309023241104](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023241104.png)

![image-20200309023333742](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023333742.png)

![image-20200309023356362](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023356362.png)

![image-20200309023438947](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023438947.png)

![image-20200310135106346](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200310135106346.png)

==æ³¨æ„ï¼š openSettingåœ¨ç”µè„‘ä¸Šæ²¡æ•ˆæœï¼Œåœ¨æ‰‹æœºä¸Šå¯ä»¥==

![image-20200310113012224](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200310113012224.png)

### 10.8 [icon](https://developers.weixin.qq.com/miniprogram/dev/component/icon.html) 

![image-20200309023519698](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023519698.png)

![image-20200309023532642](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023532642.png)

**ä»£ç ï¼š**

```html
<icon type="success" size="23" color="pink"></icon>

<icon type="success" size="23" color="#0099ff"></icon>
```



### 10.9 [radio](https://developers.weixin.qq.com/miniprogram/dev/component/radio.html) 

1. `radio`å¯ä»¥é€šè¿‡è‡ªèº« `color`å±æ€§æ¥ä¿®æ”¹é€‰ä¸­çš„å•é€‰é¢œè‰²

2. ==`radio`æ ‡ç­¾å¿…é¡»å’Œçˆ¶å…ƒç´ [radio-group](https://developers.weixin.qq.com/miniprogram/dev/component/radio-group.html)â¼€èµ·ä½¿â½¤==

3. éœ€è¦ç»™`radio-group`ç»‘å®š`change`äº‹ä»¶

4. `radio`çš„`value`æ˜¯é€‰ä¸­çš„å•é€‰æ¡†çš„å€¼ï¼Œé€šè¿‡`e.detail.value`è·å–

   â€‹    

![image-20200309023722730](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309023722730.png)

### 10.9 [checkbox](https://developers.weixin.qq.com/miniprogram/dev/component/checkbox.html) 

å’Œå•é€‰æ¡†ç±»ä¼¼ï¼ŒåŒºåˆ«å°±æ˜¯å¤é€‰æ¡†å¯ä»¥é€‰å¤šä¸ªã€‚

å•é€‰æ¡†çš„valueå€¼æ˜¯å­—ç¬¦ä¸²ï¼Œå¤šé€‰æ¡†çš„valueæ˜¯æ•°ç»„ï¼Œæ•°ç»„é‡Œæ”¾å­—ç¬¦ä¸²

![image-20200310150754864](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200310150754864.png)

## 10. åšé¡¹ç›®ç”¨çš„ç»„ä»¶æˆ–äº‹ä»¶æ•ˆæœ

> åšé¡¹ç›®å¯èƒ½ä¼šç”¨åˆ°çš„ç»„ä»¶ï¼Œä¸è¦æ±‚æŒæ¡ï¼Œä½†éœ€è¦çŸ¥é“è¿™ä¸œè¥¿ï¼Œç”¨çš„æ—¶å€™æŸ¥æ–‡æ¡£

### 10.1 [scroll-view](https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html)

#### 10.1.1 åŸºæœ¬ä½¿ç”¨

==æ³¨æ„:å›ºå®šé«˜åº¦æ—¶,è®¾ç½®page100%é«˜åº¦,ä¸è¦ç›´æ¥è®¾ç½®scroll-view:100vh, å¦åˆ™h5é¡µé¢æ—¶,ä¼šå‡ºç°æ»šåŠ¨æ— æ•ˆé—®é¢˜==

==è§£å†³æ–¹æ¡ˆ: è®¾ç½®page:100% , scroll-view:100%,==

**ä¾‹å¦‚ï¼š**ä¸€ä¸ªèœå•å›ºå®šå®½åº¦ï¼Œå¯ä»¥å·¦å³æ»‘åŠ¨åŒºåŸŸï¼Œæˆ–è€…å›ºå®šé«˜åº¦ï¼Œå¯ä»¥ä¸Šä¸‹æ»šåŠ¨åŒºåŸŸ

**è¦æ±‚**ï¼šä½¿ç”¨ç«–å‘æ»šåŠ¨æ—¶ï¼Œéœ€è¦ç»™[scroll-view](https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html)ä¸€ä¸ªå›ºå®šé«˜åº¦ï¼Œå¹¶ç»™ç»„ä»¶åŠ å±æ€§`scroll-y`.

å…·ä½“å±æ€§çœ‹å®˜æ–¹æ–‡æ—¦ï¼Œç®€å•ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```html
<!--æ ¹æ®ç±»åå›ºå®šé«˜åº¦ï¼Œæ­¤æ—¶scroll-viewç›¸å½“äºå¤§çš„view,é‡Œé¢æœ‰å¤šä¸ªå°viewï¼Œå¯ä»¥ä¸Šä¸‹æ»‘åŠ¨-->   
<scroll-view class="ç±»å" scroll-y>
  <view>å¤§å®¶ç”µ</view>
  <view>çƒ­é—¨æ¨è</view>
  <view>æµ·å¤–è´­</view>
</scroll-view>
```

![image-20200314003428371](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314003428371.png)

#### 10.1.2 ä½¿ç”¨çš„é—®é¢˜

> ç‚¹å‡»å·¦è¾¹èœå•ï¼Œå³è¾¹ä¼šæ˜¾ç¤ºä¸åŒçš„å†…å®¹ï¼Œä½†æ˜¯è‹¥å³è¾¹æ»‘åŠ¨åˆ°å…¶ä»–ä½ç½®åï¼Œå†ç‚¹å‡»å·¦è¾¹èœå•ï¼Œä¼šå‡ºç°ï¼Œå³è¾¹çš„æ»šåŠ¨æ¡åœ¨å…¶ä»–ä½ç½®ã€‚æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯æ¯æ¬¡ç‚¹å‡»åï¼Œ å³è¾¹å†…å®¹éƒ½ä»é¡¶éƒ¨å¼€å§‹ã€‚

**è§£å†³æ–¹æ¡ˆ:**

è®¾ç½®å±æ€§ï¼š`scroll-top` å€¼ä¸ºnumber/string   è®¾ç½®ç«–å‘æ»šåŠ¨æ¡ä½ç½®

ä¸ä¼šå‡ºç°å†™äº†å°±å›ºå®šä½ç½®ã€æ»šåŠ¨ä¸äº†çš„æƒ…å†µï¼Œå› ä¸ºå½“æ»šåŠ¨æ—¶ï¼Œç³»ç»Ÿå†…éƒ¨ä»è‡ªåŠ¨ä¸ºå…¶èµ‹å€¼ï¼š

```html
<!--é”™è¯¯å†™æ³• ç›´æ¥å†™æ­»æ•°æ®-->
<!--è¿™é‡Œå†™äº†0ï¼Œä½†æ˜¯æ»šåŠ¨åä¼šä¸ºå…¶èµ‹å€¼åˆ«çš„ï¼Œæ‰€ä»¥æ²¡ç”¨-->
<scroll-view scroll-top='0'  scroll-y>
  <view>å¤§å®¶ç”µ</view>
</scroll-view>

<!--æ­£ç¡®å†™æ³• å†™å˜é‡-->
<!--è®¾ç½®æ¯æ¬¡ç‚¹å‡»åä¸ºå…¶é‡æ–°è®¾ç½®ä¸º0 -->
<scroll-view scroll-top="{{flag}}"  bindtap='handleTap' scroll-y>
  <view>å¤§å®¶ç”µ</view>
</scroll-view>

handleTap(){
	this.setData({
      flag:0
    })
}
```

### 10.2 ä¸Šæ»‘è§¦åº•äº‹ä»¶ åŠ è½½ä¸‹ä¸€é¡µ

[**onReachBottom()**](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html)

è¿™æ˜¯pageé¡µé¢ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä½œç”¨ï¼šç›‘å¬ç”¨æˆ·ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°ã€‚

- å¯ä»¥åœ¨`app.json`çš„[`window`](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window)é€‰é¡¹ä¸­æˆ–[é¡µé¢é…ç½®](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html)ä¸­è®¾ç½®è§¦å‘è·ç¦»`onReachBottomDistance`ã€‚
- åœ¨è§¦å‘è·ç¦»å†…æ»‘åŠ¨æœŸé—´ï¼Œæœ¬äº‹ä»¶åªä¼šè¢«è§¦å‘ä¸€æ¬¡

åŸºæœ¬ä½¿ç”¨(å’ŒdataåŒçº§å®šä¹‰æ­¤å‡½æ•°ï¼Œå¯è¿›è¡ŒåŠ è½½ä¸‹ä¸€é¡µæ“ä½œ)

```js
 //æ­¤å‡½æ•°è§¦åº•ä¼šè‡ªåŠ¨è§¦å‘ï¼Œå†…éƒ¨æ ¹æ®ä¸ªäººéœ€è¦å†™ä¸šåŠ¡ä»£ç 
onReachBottom(){
    if(å½“å‰é¡µé¢ >= æ€»é¡µæ•°){
      // æ­¤æ–¹æ³•æ˜¯æ¶ˆæ¯æç¤ºæ¡†ï¼Œæç¤ºå·²ç»æ²¡æœ‰ä¸‹ä¸€é¡µæ•°æ®
      wx.showToast({
        title: 'å·²ç»è§¦åº•äº†',
      });
    }else{
      //æœ‰ä¸‹ä¸€é¡µåˆ™é¡µç ++,å¹¶å‘èµ·è¯·æ±‚
      this.queryParams.pagenum++
      this.getGoodsList()
    }
  }
```

é»˜è®¤è·åº•50pxæ—¶è§¦å‘äº‹ä»¶ï¼Œä¹Ÿå¯è‡ªè¡Œè®¾ç½®è§¦å‘è·ç¦»

```json
  //ä¾‹ï¼šåœ¨app.jsonçš„windowé€‰é¡¹ä¸­
"window": {
    "onReachBottomDistance":100,
  },
```



### 10.3 ä¸‹æ‹‰åˆ·æ–°é¡µé¢

- å½“å¤„ç†å®Œæ•°æ®åˆ·æ–°åï¼Œ[wx.stopPullDownRefresh](https://developers.weixin.qq.com/miniprogram/dev/api/ui/pull-down-refresh/wx.stopPullDownRefresh.html)å¯ä»¥åœæ­¢å½“å‰é¡µé¢çš„ä¸‹æ‹‰åˆ·æ–°ã€‚

**æ­¥éª¤**:

1.éœ€è¦åœ¨`app.json`çš„[`window`](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window)é€‰é¡¹ä¸­æˆ–[é¡µé¢é…ç½®](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html)ä¸­å¼€å¯`enablePullDownRefresh`ã€‚

â€‹	å¼€å¯æ”¯æŒé¡µé¢ä¸‹æ‹‰åˆ·æ–°çš„åŠŸèƒ½

**æœ‰é…ç½®å…¨å±€çš„ä¸‹æ‹‰åˆ·æ–°,ä½†æ˜¯æ¨èä½¿ç”¨å¯¹åº”é¡µé¢çš„ä¸‹æ‹‰åˆ·æ–°, å“ªä¸ªé¡µé¢éœ€è¦åˆ·æ–°, å°±åœ¨å¯¹åº”é¡µé¢è¿›è¡Œé…ç½®**

```json
//åœ¨é¡µé¢çš„jsonæ–‡ä»¶ä¸­é…ç½®
{
  "usingComponents": {},
  "enablePullDownRefresh":trueï¼Œ //è¡¨ç¤ºæ”¯æŒå½“å‰é¡µé¢ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
  "backgroundTextStyle":"dark" //ä¸‹æ‹‰ loading çš„æ ·å¼ï¼ˆåŠ è½½çš„å°åœ†ç‚¹é¢œè‰²ï¼‰ï¼Œä»…æ”¯æŒ dark / light
}
```

2.ç›‘å¬ä¸‹æ‹‰åˆ·æ–°äº‹ä»¶**[onPullDownRefresh()](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html)**

```js
//æ˜¯pageé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° å’ŒdataåŒçº§å®šä¹‰
Page({
  data:{},
  onPullDownRefresh(){
    //1.å°†ä¹‹å‰è¯·æ±‚çš„æ•°æ®æ¸…ç©ºï¼Œ
    //åŸå› ï¼šä¹‹å‰ä¸ºå®ç°è§¦åº•åŠ è½½ä¸‹ä¸€é¡µåŠŸèƒ½ æ•°æ®æ˜¯ç”¨concatæ‹¼æ¥çš„ï¼Œè‹¥ä¸æ¸…ç©ºï¼Œæ•°æ®ä¼šç»§ç»­æ‹¼æ¥ï¼Œå¯¼è‡´æœ‰é—®é¢˜ï¼Œæ­£å¸¸åˆ·æ–°åªæ˜¾ç¤ºç¬¬ä¸€é¡µ
    this.setData({
      goodsList:[]
    })
    //2.å°†é¡µç è®¾ç½®ä¸ºåˆå§‹å€¼ å¦åˆ™ä¼šåŠ è½½å…¶ä»–é¡µç å†…å®¹
    this.queryParams.pagenum = 1
    //3.å‘æ–°è¯·æ±‚ è¯·æ±‚æ•°æ®
    this.getGoodsList()
  }
})
```

3.åœæ­¢åˆ·æ–°

å½“æ•°æ®éƒ½å›æ¥äº†ä¸”å·²æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œå¯èƒ½åˆ·æ–°åŠ¨ç”»è¿˜åœ¨æ‰§è¡Œï¼ˆåŠ¨ç”»ç”±æ—¶é—´è®¾ç½®çš„ï¼‰ï¼Œæ‰€ä»¥æ•°æ®ä¸€å›æ¥æˆ‘ä»¬å°±åº”è¯¥å…³é—­åŠ¨ç”»ï¼Œç”¨[wx.stopPullDownRefresh()](https://developers.weixin.qq.com/miniprogram/dev/api/ui/pull-down-refresh/wx.stopPullDownRefresh.html)åœæ­¢å½“å‰é¡µé¢ä¸‹æ‹‰åˆ·æ–°ã€‚

```js
//è¯·æ±‚æ•°æ®çš„å‡½æ•°ï¼Œä¼šæ ¹æ®è¿”å›ç»“æœè¿›è¡Œä¸€ç³»åˆ—å¤„ç†ï¼Œæˆ‘ä»¬å°±æŠŠåœæ­¢åˆ·æ–°çš„äº‹ä»¶è°ƒç”¨å†™åœ¨è¿™é‡Œé¢ï¼Œå› å¤„ç†æ•°æ®æ—¶å°±ä»£è¡¨æ•°æ®å·²ç»è¯·æ±‚æˆåŠŸ
  async getGoodsList() {
    //è¿™é‡Œçœç•¥æ•°æ®è¯·æ±‚åŠå¤„ç†çš„ä»£ç 
    //åœæ­¢ä¸‹æ‹‰åˆ·æ–° åªå†™è¿™ä¸€å¥å°±è¡Œï¼Œæ³¨æ„ï¼šå“ªæ€•æ²¡æœ‰å¼€å¯ä¸‹æ‹‰åˆ·æ–°ï¼Œå†™æ­¤å¥ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œå¯¹é¡µé¢ä¸å½±å“
      wx.stopPullDownRefresh()
  },
```

 

æ‰©å±•ï¼šå¯ä»¥é€šè¿‡[wx.startPullDownRefresh](https://developers.weixin.qq.com/miniprogram/dev/api/ui/pull-down-refresh/wx.startPullDownRefresh.html)è§¦å‘ä¸‹æ‹‰åˆ·æ–°ï¼Œè°ƒç”¨åè§¦å‘ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»ï¼Œæ•ˆæœä¸ç”¨æˆ·æ‰‹åŠ¨ä¸‹æ‹‰åˆ·æ–°ä¸€è‡´ã€‚

### 10.4  æ¶ˆæ¯æç¤ºæ¡†

**[wx.showToast(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showToast.html)**å…·ä½“å‚æ•°çœ‹æ–‡æ¡£

æ˜¾ç¤ºæ¶ˆæ¯æç¤ºæ¡†ï¼Œä¼šè‡ªåŠ¨æ¶ˆå¤±

```js
//ç®€å•ä½¿ç”¨å’Œæ•ˆæœå›¾å¦‚ä¸‹
wx.showToast({
  title: 'å·²ç»è§¦åº•äº†',
});
```



![image-20200314235748709](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314235748709.png)

### 10.4  æ¨¡æ€å¯¹è¯æ¡†(ç¡®å®šã€å–æ¶ˆ)

**[wx.showModal(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showModal.html)**

æ˜¾ç¤ºæ¨¡æ€å¯¹è¯æ¡†

![image-20200317130651697](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200317130651697.png)

```js
wx.showModal({
  title: 'æç¤º',
  content: 'è¿™æ˜¯ä¸€ä¸ªæ¨¡æ€å¼¹çª—',
  success (res) {
    if (res.confirm) {
      console.log('ç”¨æˆ·ç‚¹å‡»ç¡®å®š')
    } else if (res.cancel) {
      console.log('ç”¨æˆ·ç‚¹å‡»å–æ¶ˆ')
    }
  }
})
```



### 10.5 å…¨å±€loadingåŠ è½½æç¤ºæ¡†

> loadingæ˜¯åŠ è½½ä¸­çš„æç¤ºæ¡†ï¼Œè¯·æ±‚å‰æ•°æ®è¿˜æ²¡å›æ¥æ˜¾ç¤ºæ­£åœ¨åŠ è½½ï¼Œæ•°æ®è¯·æ±‚å›æ¥åå°±å…³é—­æç¤ºæ¡†ï¼Œä½†è‹¥æ¯æ¬¡å‘è¯·æ±‚å‰å†™ä¸€æ¬¡å¼€å¯loadingçš„ä»£ç ï¼Œæ¯æ¬¡è¯·æ±‚å›æ¥ååˆå†™ä¸€æ¬¡å…³é—­loadingä»£ç ï¼Œä»£ç å†—ä½™ï¼Œä¸”ä¸åˆ©äºç»´æŠ¤ï¼Œè‹¥è¦è¿›è¡Œloadingä»£ç æ›´æ”¹ä¼šç‰¹åˆ«éº»çƒ¦ï¼Œæ‰€ä»¥å»ºè®®è®¾ç½®ä¸ºå…¨å±€çš„loadingï¼Œä¸å¿…å¤šå¤„å†™ï¼Œåªå†™ä¸€æ¬¡ã€‚

![image-20200316013413542](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316013413542.png)

**[loading](https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showLoading.html)**

```js
//1. æ˜¾ç¤ºloadingæç¤ºæ¡†
wx.showLoading({
  title: 'åŠ è½½ä¸­',	 //æç¤ºçš„æ–‡æœ¬
  maskï¼štrue				//æ˜¾ç¤ºé€æ˜è’™å±‚ï¼ˆè’™æ¿ï¼‰ï¼Œé˜²æ­¢è§¦æ‘¸ç©¿é€ï¼Œæ·»åŠ åç”¨æˆ·æ— æ³•è¿›è¡Œå…¶ä»–æ“ä½œ
})

//2. å…³é—­loadingæç¤ºæ¡†
wx.hideLoading()

//æ˜¾ç¤ºå’Œå…³é—­é…åˆä½¿ç”¨
```

åœ¨13.2ä¸­å¯¹å‘è¯·æ±‚çš„ä»£ç è¿›è¡Œäº†å°è£…ï¼Œæ¯æ¬¡å‘è¯·æ±‚éƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•æ‰€ä»¥loadingçš„ä»£ç ä¹Ÿå†™è¿™é‡Œã€‚

**ä»£ç è§£é‡Šï¼š**

1. åœ¨å‘è¯·æ±‚å‰å¼€å¯loading

2. å› ä¸ç®¡è¯·æ±‚æˆåŠŸæˆ–å¤±è´¥éƒ½éœ€å…³é—­loadingï¼Œæ‰€ä»¥åœ¨completeå‡½æ•°å†…å…³é—­loading

3. è‹¥åŒæ—¶å‘å¤šä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œloadingä¼šå¼€å¯ä¸‰æ¬¡ï¼Œä½†æ˜¯åªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸å½±å“

4. è‹¥åŒæ—¶å‘å¤šä¸ªè¯·æ±‚ï¼Œè¯·æ±‚ç»“æœç¬¬ä¸€æ¬¡å›æ¥å°±ä¼šå…³é—­loadingï¼Œæ­¤æ—¶å…¶ä»–å‡ ä¸ªè¯·æ±‚å¯èƒ½ç»“æœè¿˜æ²¡å›æ¥ï¼Œæ‰€ä»¥åº”è¯¥è¯·æ±‚å…¨éƒ½å›æ¥åå†å…³é—­ï¼Œè§£å†³å¦‚ä¸‹ï¼š

     4.1 è®¾ç½®å˜é‡`let ajaxTime=0 `è¡¨ç¤ºå‘é€è¯·æ±‚æ¬¡æ•°ä¸º0ï¼Œ

     4.2 æ¯å‘èµ·ä¸€æ¬¡è¯·æ±‚ï¼Œæ¬¡æ•°åŠ ä¸€ï¼š` ajaxTime++`

     4.3 è¯·æ±‚ç»“æœæ¯å›æ¥ä¸€æ¬¡ï¼Œæ¬¡æ•°å‡ä¸€ï¼š`ajaxTime--`

     4.4 å½“è¯·æ±‚éƒ½å›æ¥å®Œäº†ï¼Œæ¬¡æ•°ä¸º0,å†è°ƒç”¨å…³é—­loading

```js
//è¿™æ˜¯è‡ªå®šä¹‰çš„requestç›®å½•ï¼Œä¸“é—¨å†™è‡ªå·±å°è£…çš„å¼‚æ­¥è¯·æ±‚ä»£ç 
let ajaxTime = 0
export const request = (params) => {
  ajaxTime++
  //1.å¼€å¯loading
  wx.showLoading({
    title: 'åŠ è½½ä¸­',
    mask: true
  });
  return new Promise((resolve, reject) => {
    wx.request({
      success: (result) => {},
      fail: (error) => {},
      //æ­¤å‡½æ•°æ—¶ä¸ç®¡æˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½ä¼šè¢«è°ƒç”¨
      complete:()=>{
        ajaxTime--
        if(ajaxTime==0){
          //2.å…³é—­loading
          wx.hideLoading();
        }
      }
    });
  })
}
```

### 10.6 å›¾ç‰‡æ”¾å¤§é¢„è§ˆæ•ˆæœ

**[wx.previewImage(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.previewImage.html)**

ç‚¹å‡»å›¾ç‰‡,æ”¾å¤§é¢„è§ˆå›¾ç‰‡ã€‚é¢„è§ˆçš„è¿‡ç¨‹ä¸­ç”¨æˆ·å¯ä»¥è¿›è¡Œä¿å­˜å›¾ç‰‡ã€å‘é€ç»™æœ‹å‹ç­‰æ“ä½œã€‚

```js
wx.previewImage({
  current: '', // å½“å‰æ˜¾ç¤ºå›¾ç‰‡çš„httpé“¾æ¥
  urls: [], // éœ€è¦é¢„è§ˆçš„å›¾ç‰‡httpé“¾æ¥åˆ—è¡¨ æ‰€æœ‰çš„å›¾ç‰‡è·¯å¾„ç»„æˆçš„åˆ—è¡¨,ä»¥ä¾¿äºå·¦å³æ»‘åŠ¨æ˜¾ç¤ºå…¶ä»–å›¾
  loop:true,//æ˜¯å¦å¾ªç¯é¢„è§ˆ
  indicator:"default" //å›¾ç‰‡æŒ‡ç¤ºå™¨æ ·å¼ï¼Œå¯å–å€¼ï¼š"default" - åº•éƒ¨åœ†ç‚¹æŒ‡ç¤ºå™¨ï¼› "number" - é¡¶éƒ¨æ•°å­—æŒ‡ç¤ºå™¨ï¼› "none" - ä¸æ˜¾ç¤ºæŒ‡ç¤ºå™¨ã€‚
})
```

<img src="å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316015558012.png" alt="image-20200316015558012" style="zoom: 67%;" />

**æ¡ˆä¾‹:**

> æ‹¿è½®æ’­å›¾ä¸ºä¾‹,å®ç°ç‚¹å‡»è½®æ’­å›¾,è¿›è¡Œå›¾ç‰‡æ”¾å¤§é¢„è§ˆ.

```html
<!--  1.ç»™æ¯ä¸ªswiper-itemæ ‡ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶ å¹¶ ä¼ å…¥å½“å‰é¡¹çš„å›¾ç‰‡è·¯å¾„ -->
<swiper-item bindtap="handlePreviewImage" data-src="{{image.src}}">
  <image></image>
</swiper-item>
```

```js
//2.ç‚¹å‡»è§¦å‘äº‹ä»¶,åœ¨äº‹ä»¶å†…éƒ¨è°ƒç”¨
  handlePreviewImage(e){
    //2.1å­˜æ”¾è¦é¢„è§ˆçš„å›¾ç‰‡é“¾æ¥åˆ—è¡¨ è‡ªå·±ä¹ æƒ¯src è€Œäº‹ä»¶å±æ€§æ˜¯url ä¸ç”¨ç®¡ éƒ½æ˜¯ä¸€ä¸ªæ„æ€
    const urls = this.data.imageList.map(v=>v.src)
    //2.2å–å½“å‰ç‚¹å‡»é¡¹çš„å›¾ç‰‡è·¯å¾„
    const current = e.currentTarget.dataset.src
    //2.3è°ƒç”¨æ–¹æ³•
    wx.previewImage({
      current, 
      urls 
    })
  }
```

### 10.7 ç‚¹å‡»è”ç³»å®¢æœæˆ–åˆ†äº«è½¬å‘

buttonæŒ‰é’®æŒ‡å®šopentype="contact"å¯ä»¥æ‰“å¼€è”ç³»å®¢æœå¯¹è¯,ä½†æ˜¯æœ‰å¾ˆå¤šé»˜è®¤æ ·å¼,åœ¨ç‰¹å®šéœ€æ±‚ä¸Šæˆ‘ä»¬å¯ä»¥ç”¨éšœçœ¼æ³•å®ç°æ¥é¿å…é»˜è®¤æ ·å¼é€ æˆçš„éº»çƒ¦,å³ æŠŠbuttonè®¾ç½®é€æ˜,æµ®åœ¨å…¶ä»–æ ‡ç­¾ä¸Š,

opentype="share"è½¬å‘åˆ†äº«

```css
button{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
      }
```

### 10.8 è·å–ç”¨æˆ·åœ°å€ã€è·å–æƒé™ã€è®¾ç½®æƒé™

**==æ³¨æ„:==**

â€‹		æœ‰ä½¿ç”¨==**è®¾ç½®æƒé™**==è¿™ç±»åŠŸèƒ½çš„,è®¾ç½®æ—¶ä¼šè·³è½¬åˆ°å¾®ä¿¡å†…ç½®çš„è®¾ç½®åŠŸèƒ½,ç›¸å½“äºåå°,ä»åå°è·³å›å‰å°, å‡½æ•°onloadå¹¶ä¸ä¼šå†æ‰§è¡Œ, ==**onload**==æŒ‡é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ, åªä¼šæ‰§è¡Œä¸€æ¬¡ ,é‚£ä¹ˆé¡µé¢å¹¶ä¸ä¼šé‡æ–°æ¸²æŸ“,å³ä¿¡æ¯å¾—ä¸åˆ°åŠæ—¶æ›´æ–°æ˜¾ç¤º

==**ç»¼ä¸Š:**==

â€‹		æœ‰è¿›è¡Œè®¾ç½®, ==**è·³è½¬åå°**==çš„,æˆ–è€…åƒ==**è´­ç‰©è½¦**==è¿™ç±»é¢‘ç¹æ‰“å¼€å’Œéšè—çš„é¡µé¢,æˆ–è€…ç”¨æˆ·äº¤äº’å¤šçš„é¡µé¢,åˆ«ç”¨onload,è¯·ä½¿ç”¨==**onshow**==ç”Ÿå‘½å‡½æ•°, æ­¤å‡½æ•°æ˜¯å½“ä»åå°åˆ‡å›å‰å°æˆ–é¡µé¢æ˜¾ç¤ºéƒ½ä¼šæ‰§è¡Œçš„å‡½æ•°,ä½œç”¨æ¯æ¬¡æ‰“å¼€å’Œéšè—éƒ½è¿›è¡Œä¸€ä¸ªåˆå§‹åŒ–,ä¼šæ‰§è¡Œå¤šæ¬¡

![image-20200316142917870](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316142917870.png)

#### 10.8.1 API

**[wx.chooseAddress(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/address/wx.chooseAddress.html)è·å–åœ°å€**

è·å–ç”¨æˆ·æ”¶è´§åœ°å€ã€‚è°ƒèµ·ç”¨æˆ·ç¼–è¾‘æ”¶è´§åœ°å€åŸç”Ÿç•Œé¢ï¼Œå¹¶åœ¨ç¼–è¾‘å®Œæˆåè¿”å›ç”¨æˆ·é€‰æ‹©çš„åœ°å€ã€‚

> ä»»ä½•å°ç¨‹åºæ‰§è¡Œè·å–åœ°å€ä»£ç  éƒ½ä¼šæ˜¾ç¤ºå‡ºæ­¤é¡µé¢ è¿™æ˜¯å¾®ä¿¡å†…ç½®çš„ç•Œé¢ï¼Œæ‰€ä»¥æ”¶è´§åœ°å€ä¿¡æ¯ä¹Ÿæ˜¯å¯ä»¥å„ä¸ªå°ç¨‹åºå…±ç”¨çš„,åœ°å€éœ€è¦ç”¨æˆ·æå‰åœ¨å¾®ä¿¡ä¸ªäººä¿¡æ¯ä¸­è¿›è¡Œç¼–è¾‘çš„,æˆ‘ä»¬ç›´æ¥è·å–å³å¯

```js
wx.chooseAddress({
      success: (result)=>{
        console.log(result)//æ‰“å°å‡ºåœ°å€ä¿¡æ¯
      }
    });
```

**[wx.getSetting(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/setting/wx.getSetting.html)è·å–æƒé™**

æƒé™ç»“æœæœ‰ä¸‰ç§æƒ…å†µ,è§10.8ä¸­å›¾,å³ä¸Šå›¾,

ç‚¹å‡»ç¡®å®šå--->çŠ¶æ€true   ç‚¹å‡»å–æ¶ˆå--->çŠ¶æ€false  ä»æœªç‚¹å‡»ä»»ä½•--->çŠ¶æ€å±æ€§æ²¡æœ‰,åˆ™ç»“æœundefined

```
wx.getSetting({
  success (res) {
    console.log(res.authSetting['scope.address'])
  }
})
```

`console.log(res)`ç»“æœ:

![image-20200316145427028](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316145427028.png)

![image-20200316150524713](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316150524713.png)

![image-20200316150527596](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316150527596.png)

[**wx.openSetting(Object object)**](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/setting/wx.openSetting.html)æˆæƒè®¾ç½®

```js
wx.openSetting({
  success (res) {
    //ç»™äºˆæˆæƒåæ‰§è¡Œçš„æ“ä½œå†™è¿™é‡Œé¢,ä¾‹è°ƒç”¨è·å–åœ°å€å‡½æ•°
  }
})
```

#### 10.8.2**ä»£ç **(è¿™æ˜¯æœ€æµ…æ˜¾çš„ä»£ç ï¼Œåé¢æœ‰è¿›è¡Œä¼˜åŒ–çš„ä»£ç ,ç”¨ä¼˜åŒ–åçš„ä»£ç )

```js
  handleChooseAddress(){
    wx.getSetting({
      success: (result1)=>{
        //1.è·å–æƒé™çŠ¶æ€ å‘ç°å±æ€§åæ€ªå¼‚æ—¶ ç”¨[]å½¢å¼è·å–å±æ€§å€¼
        const scopeAddress = result1.authSetting['scope.address']
        //2.è‹¥ä¸ºtrueæˆ–undefined ç›´æ¥è·å–åœ°å€
        if(scopeAddress===true||scopeAddress===undefined){
          wx.chooseAddress({
            success: (result2)=>{
              console.log(result2)
            }
          })
        }else{
          //3.ç”¨æˆ·ä»¥å‰æ‹’ç»è¿‡æˆäºˆæƒé™,å…ˆè¯±å¯¼ç”¨æˆ·æ‰“å¼€æˆæƒé¡µé¢
          wx.openSetting({
            success: (result3)=>{
              //4.è°ƒç”¨è·å–åœ°å€ä»£ç 
              wx.chooseAddress({
                success: (result4)=>{
                  console.log(result4)
                }
              })
            }
          });
        }
      }
    });
  }
```

#### 10.8.3 ä»£ç ä¼˜åŒ–

**ç¬¬ä¸€æ¬¡ä¼˜åŒ–**

>//æ–°å»ºå·¥å…·utilsç›®å½•ï¼Œå†…æœ‰æ–‡ä»¶asyncWx.jsï¼Œé‡Œé¢å†™å·¥å…·å‡½æ•°
>//ä»¥ä¸‹ä»£ç å¯ç›´æ¥å¤åˆ¶

```js
/* promiseå½¢å¼çš„ getSetting*/
export const getStting = () =>{
  return new Promise((resolve,reject)=>{
    wx.getSetting({
      success: (result)=>{
        resolve(result)
      },
      fail: (err)=>{
        reject(err)
      }
    });
  })
}
/* promiseå½¢å¼çš„ openSetting*/
export const openSetting = () =>{
  return new Promise((resolve,reject)=>{
    wx.openSetting({
      success: (result)=>{
        resolve(result)
      },
      fail: (err)=>{
        reject(err)
      }
    });
  })
}
/* promiseå½¢å¼çš„ chooseAddress*/
export const chooseAddress = () =>{
  return new Promise((resolve,reject)=>{
    wx.chooseAddress({
      success: (result)=>{
        resolve(result)
      },
      fail: (err)=>{
        reject(err)
      }
    })
  })
}
```

> ä½¿ç”¨

```js
//å¼•å…¥
import { getStting, openSetting, chooseAddress } from '../../utils/asyncWx.js'
//ä½¿ç”¨
async handleChooseAddress() {
  //1. è·å– æƒé™çŠ¶æ€
    const res1 = await getStting()
    const scopeAddress = res1.authSetting['scope.address']
    //2. åˆ¤æ–­ æƒé™çŠ¶æ€
    if (scopeAddress === true || scopeAddress === undefined) {
      // 3. è°ƒç”¨è·å–æ”¶è´§åœ°å€çš„ api
      const res2 = await chooseAddress()
      console.log(res2)
    } else {
      //3. è¯±å¯¼ç”¨æˆ·æ‰“å¼€æˆæƒé¡µé¢
      await openSetting()
      //4. è°ƒç”¨è·å–æ”¶è·åœ°å€çš„api
      const res3 = await chooseAddress()
      console.log(res3)
    }
}
```

**ç¬¬äºŒæ¬¡ä¼˜åŒ–**

> åœ¨ifåˆ¤æ–­ä¸­ï¼Œä¸¤ç§æƒ…å†µéƒ½è°ƒç”¨äº†è·å–åœ°å€APIï¼Œæ‰€ä»¥å°†å…¶å†™åœ¨ä¸€èµ·
>
> (æ­¤å¤„çœç•¥å·¥å…·å‡½æ•°å®šä¹‰å’Œå¼•å…¥çš„  ä»£ç  å’Œå‰é¢ä¸€æ ·)

```js
  async handleChooseAddress() {
    //1. è·å– æƒé™çŠ¶æ€
    const res1 = await getStting()
    const scopeAddress = res1.authSetting['scope.address']
    //2. åˆ¤æ–­ æƒé™çŠ¶æ€
    if (scopeAddress === false) {
      //3. è¯±å¯¼ç”¨æˆ·æ‰“å¼€æˆæƒé¡µé¢
      await openSetting()
    }
    //4.æ­¤æ—¶çŠ¶æ€å¿…ç„¶æ”¯æŒè·å–åœ°å€ æ‰€ä»¥ç›´æ¥å†™
    const res2 = await chooseAddress()
    console.log(res2)
  }
```

**ç¬¬ä¸‰æ¬¡ä¼˜åŒ–** è§£å†³æŠ¥é”™å’Œå‚¨å­˜åœ°å€ä¿¡æ¯

+ å½“ç”¨æˆ·ç‚¹å‡»å–æ¶ˆå,è™½ç„¶åŠŸèƒ½ä¼šæ­£å¸¸ä½¿ç”¨,ä½†æ˜¯æ§åˆ¶å°ä¼šæŠ¥é”™,å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¤„ç†rejecté”™è¯¯,è¿™é‡Œç”¨try catché”™è¯¯æ•è·

     æŠŠä¸Šé¢æ­£å¸¸ä»£ç æ”¾tryé‡Œé¢å°±è¡Œ,ç„¶åcatchæ—¶æ ¹æ®éœ€æ±‚æ“ä½œ,è¿™é‡Œè¿›è¡Œæ‰“å°.

     è¿™æ ·å°±ä¸ä¼šæŠ¥é”™

+ æŠŠåœ°å€å­˜åˆ°ç¼“å­˜ä¸­ä»¥ä¾¿å½“å‰é¡µé¢å’Œå…¶ä»–é¡µé¢ä½¿ç”¨

```js
  async handleChooseAddress() {
    try {
      //1. è·å– æƒé™çŠ¶æ€
      const res1 = await getStting()
      const scopeAddress = res1.authSetting['scope.address']
      //2. åˆ¤æ–­ æƒé™çŠ¶æ€
      if (scopeAddress === false) {
        //3. è¯±å¯¼ç”¨æˆ·æ‰“å¼€æˆæƒé¡µé¢
        await openSetting()
      }
      //4.æ­¤æ—¶çŠ¶æ€å¿…ç„¶æ”¯æŒè·å–åœ°å€ æ‰€ä»¥ç›´æ¥å†™
      const address = await chooseAddress()
      //4.1æŠŠçœå¸‚åŒºç»„æˆè¯¦ç»†åœ°å€,ä½¿ç”¨æ—¶ç›´æ¥ç”¨,ä¸ç”¨æ‹¼æ¥
address.all= address.provinceName+address.cityName+address.countyName+address.detailInfo
      //5.å­˜å‚¨åœ°å€
      wx.setStorageSync("address", address);
    } catch (error) {
      console.log(error)
    }
  }
```





#### **10.8.4 æ•ˆæœå›¾**

+ ç‚¹å‡»ç¡®å®šçš„æ•ˆæœ

![image-20200316143455882](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316143455882.png)

+ ç‚¹å‡»å–æ¶ˆçš„æ•ˆæœï¼ˆbugæ•ˆæœ å’Œ æ­£ç¡®æ•ˆæœ  ä¸¤ç§ï¼‰

     + è‹¥ä¸æŒ‰æ­£ç¡®ä»£ç å†™ä¼šå‡ºç°çš„bug

          ![](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316143930492.png)

     - æ­£ç¡®æ•ˆæœ(æŒ‰ä¸Šé¢è¦æ±‚å†™ä»£ç å ä¼šå‡ºç°æˆæƒé¡µ è¿™æ‰æ˜¯æ­£ç¡®æ•ˆæœ)

![image-20200316150537869](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316150537869.png)

### 10.9 [wx.navigateTo](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html)é¡µé¢è·³è½¬

ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ä½†æ˜¯ä¸èƒ½è·³åˆ° tabbar é¡µé¢ã€‚ä½¿ç”¨ [wx.navigateBack](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html) å¯ä»¥è¿”å›åˆ°åŸé¡µé¢ã€‚å°ç¨‹åºä¸­é¡µé¢æ ˆæœ€å¤šåå±‚ã€‚

```js
wx.navigateTo({
      url: '/pages/pay/index',
      success: (result)=>{
        
      },
      fail: ()=>{},
      complete: ()=>{}
    });
```

### 10.10é€‰æ‹©æœ¬åœ°ç›¸å†Œå›¾ç‰‡wx.chooseImage

[wx.chooseImage(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.chooseImage.html), æ›´å¤šå‚æ•°çœ‹æ–‡æ¡£

**ä»æœ¬åœ°ç›¸å†Œé€‰æ‹©å›¾ç‰‡æˆ–ä½¿ç”¨ç›¸æœºæ‹ç…§ã€‚**

ç”¨äºä¸Šä¼ å›¾ç‰‡åŠŸèƒ½æ—¶éœ€è¦ç”¨æ­¤APIé€‰æ‹©å›¾ç‰‡

```js
  //  ä¸€èˆ¬è¿™å‡ ä¸ªéƒ½æ˜¯å¿…å¡«é¡¹ å¦‚ä¸‹é¢ç¼©å†™ æ³¨æ„ä¿å­˜æ—¶è®°å¾—ç”¨æ•°ç»„æ‹¼æ¥,è€Œéç›´æ¥èµ‹å€¼,æ‹…å¿ƒå®¢æˆ·ç‚¹ä¸¤æ¬¡é€‰æ‹©å›¾ç‰‡å¯¼è‡´åé¢å›¾ç‰‡æ•°ç»„è¦†ç›–äº†å‰é¢çš„å†…å®¹
//å›¾ç‰‡æ ¼å¼å’Œæ¥æº å†™å¾—å¤š å°±ä»£è¡¨æ”¯æŒçš„æ–¹å¼å°±å¤š ä¾‹å¦‚å†™äº†ç›¸å†Œå’Œç›¸æœº å°±ä¸¤ä¸ªéƒ½æ”¯æŒ åªå†™ä¸€ä¸ªå°±åªæ”¯æŒä¸€ä¸ª
wx.chooseImage({
      //æœ€å¤šå¯ä»¥é€‰æ‹©çš„å›¾ç‰‡å¼ æ•°
      count: 9,
      //å›¾ç‰‡æ ¼å¼    åŸå›¾        å‹ç¼©
      sizeType: ['original', 'compressed'],
      //å›¾ç‰‡æ¥æº     ç›¸å†Œ       ç›¸æœº
      sourceType: ['album', 'camera'],
      //æˆåŠŸçš„å›è°ƒ
      success (res) {
        // tempFilePathå¯ä»¥ä½œä¸ºimgæ ‡ç­¾çš„srcå±æ€§æ˜¾ç¤ºå›¾ç‰‡
        //æˆåŠŸåˆ™è¿”å›å›¾ç‰‡çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„åˆ—è¡¨ tempFilePaths
        const tempFilePaths = res.tempFilePaths
      }
    })
```

**è¿™æ˜¯==uni==æ–‡æ¡£çš„å›¾,ä»…ä¾›å‚è€ƒ,å¸®åŠ©äº†è§£,å…·ä½“çš„è¿˜æ˜¯çœ‹å¾®ä¿¡å°ç¨‹åºå®˜æ–¹æ–‡æ¡£,é¿å…ä¿¡æ¯é”™è¯¯:**

![image-20200324145942911](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200324145942911.png)

### 10.11æäº¤ä¸Šä¼ å›¾ç‰‡[wx.uploadFile(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/network/upload/wx.uploadFile.html)

**è¿™é‡Œä¼šç”¨åˆ°å¾®ä¿¡å†…ç½®APIï¼š wx.uploadFile  æ¡ˆä¾‹çš„ç¬¬3ç‚¹ç”¨å¾—åˆ°ï¼Œæ­¤äº‹ä»¶æäº¤çš„å‚æ•°filePathè·¯å¾„å®é™…å°±æ˜¯wx.chooseImageäº‹ä»¶è¿”å›çš„è·¯å¾„å³res.tempFilePaths**

å°†æœ¬åœ°èµ„æºä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ª HTTPS POST è¯·æ±‚ï¼Œå…¶ä¸­ `content-type` ä¸º `multipart/form-data`ã€‚

![image-20200320200126156](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320200126156.png)

```js
var upTask = wx.uploadFile({
      url: '',
      filePath: ,
      name: ,
      formData: {},
      success: (result)=>{
        
      },
      fail: ()=>{},
      complete: ()=>{}
    })
```

**ï¼ˆæ„è§åé¦ˆæ¡ˆä¾‹ï¼‰**



![image-20200320192447747](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320192447747.png)

// è¿™é‡Œç¬¬4ç‚¹æ²¡æ¥å£ æ‰€ä»¥åªæ˜¯æš‚æ—¶æ¨¡æ‹Ÿ

![image-20200320204519555](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320204519555.png)

![image-20200320204540154](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320204540154.png)

![image-20200320204651794](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320204651794.png)

![image-20200320205044337](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320205044337.png)

#### è¡¥å……ï¼š 

åˆ¤æ–­è‹¥æœ‰å›¾ç‰‡å°±æŒ‰ä¸Šé¢æµç¨‹èµ°ï¼Œè‹¥æ²¡æœ‰å°±å•ç‹¬æäº¤æ–‡æœ¬ï¼Œæ‰€ä»¥è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶å°†ä»£ç å†™åœ¨å¯¹åº”åˆ¤æ–­å†…

![image-20200320210348469](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320210348469.png)

### [10.12 åœ°å›¾ç»„ä»¶map](https://uniapp.dcloud.io/component/map)

```html
		<!-- longitudeç»åº¦ã€latitudeçº¬åº¦ -->
		<!-- åœ°å›¾é€šè¿‡ç»åº¦å’Œçº¬åº¦ç¡®å®šå½“å‰åæ ‡,å› ä¸ºæˆ‘ä»¬è¿™é‡Œä¸æ¶‰åŠè·å–å½“å‰ä½ç½®,æ‰€ä»¥ç»åº¦çº¬åº¦å†™æ­»æ•°æ® -->
		<!-- scaleåœ°å›¾ç¼©æ”¾çº§åˆ« -->
		<!-- markersè®¾ç½®æ ‡è®°ç‚¹ è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ æ•°ç»„é‡Œæ˜¯å¯¹è±¡-->
		<!-- <map> ç»„ä»¶çš„å®½/é«˜æ¨èå†™ç›´æ¥é‡ï¼Œæ¯”å¦‚ï¼š750rpxï¼Œä¸è¦è®¾ç½®ç™¾åˆ†æ¯”å€¼ã€‚ -->
		<map class="map" :longitude="longitude" :latitude="latitude" :scale="scale" :markers="covers"></map>
```

```js
		data() {
			return {
				longitude: 106.53826,
				latitude: 29.580773,
				scale: 14,
				covers: [
					//æ ¹æ®ç»åº¦å’Œçº¬åº¦è®¾ç½®æ ‡è®°ç‚¹ æœ€å¥½ä¸å½“å‰ä½ç½®æ•°æ®ä¸€è‡´
					//iconPathï¼šæ˜¯æ ‡è®°ç‚¹å›¾ç‰‡è·¯å¾„
					//width,height:è®¾ç½®æ ‡è®°ç‚¹å›¾ç‰‡å¤§å° æ•°å­—number å•ä½æœªçŸ¥
					{
						longitude: 106.53826,
						latitude: 29.580773,
						iconPath: '/static/marke.jpg',
						width: 30,
						height: 30
					}
				]
			};
		}
```

æ•ˆæœå¦‚å›¾ï¼š

![image-20200326141753826](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200326141753826.png)

å†™æ­»æ•°æ®çš„åæ ‡è·å–æ–¹æ³•ï¼š

![image-20200326140449456](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200326140449456.png)

![image-20200326140624785](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200326140624785.png)

### 10.13æ‹¨æ‰“ç”µè¯uni.makePhoneCall

[uni.makePhoneCall(OBJECT)](https://uniapp.dcloud.io/api/system/phone?id=makephonecall)

![image-20200326142217846](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200326142217846.png)

![image-20200326141902391](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200326141902391.png)



## 10. æŸ¥è¯¢é¡µé¢è·¯å¾„(url)å‚æ•°

> æœ‰ä¸¤ç§æ–¹å¼æŸ¥è¯¢

**æ–¹å¼ä¸€:onloadå‡½æ•°çš„optionå‚æ•°**

ä»…onloadç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æœ‰å‚æ•°option, å¯é€šè¿‡optionè·å–, æ³¨æ„: å…¶ä»–ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ²¡æœ‰option,å…¶ä»–ç”Ÿå‘½å‘¨æœŸå‡½æ•°é€šè¿‡æ–¹å¼äºŒè·å–é¡µé¢è·¯å¾„ä¿¡æ¯

```js
  onLoad: function (options) {
    console.log(option)
  }
```

**æ–¹å¼äºŒ:é¡µé¢æ ˆè·å–**

è‹¥è¿›å…¥aé¡µé¢,è·³è½¬åˆ°bé¡µé¢,bé¡µé¢åˆè·³åˆ°cé¡µé¢,  è¿™äº›é¡µé¢ä¼šè¿›å…¥é¡µé¢æ ˆ, é¡µé¢æ ˆæ˜¯ä¸€ä¸ªæ•°ç»„,æ•°ç»„é•¿åº¦ä¸º10, å³æœ€å¤šèƒ½ä¿å­˜10ä¸ªé¡µé¢, è·ç¦»æœ€è¿‘çš„é¡µé¢(å½“å‰é¡µé¢,åœ¨æ•°ç»„æœ€åä¸€ä¸ª,å³arr[arr.length-1])

```js
onShow: function () {
    let curPages =  getCurrentPages();
    console.log(curPages)
  }
```

![image-20200319131905575](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319131905575.png)







## 11. [â¾ƒå®šä¹‰ç»„ä»¶](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/)

> ç±»ä¼¼vueæˆ–è€…reactä¸­çš„è‡ªå®šä¹‰ç»„ä»¶

â¼©ç¨‹åºå…è®¸æˆ‘ä»¬ä½¿â½¤â¾ƒå®šä¹‰ç»„ä»¶çš„â½…å¼æ¥æ„å»ºâ»šâ¾¯ã€‚

### 11.1 åˆ›å»ºâ¾ƒå®šä¹‰ç»„ä»¶ 

> ç±»ä¼¼äºé¡µé¢ï¼Œä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ç”±`json` ` wxml` `wxss` ` js` 4ä¸ªæ–‡ä»¶ç»„æˆ

åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºç›®å½•componentsï¼ˆåç»­æ‰€æœ‰ç»„ä»¶æ”¾componentsç›®å½•ä¸­ï¼‰ï¼Œå†…éƒ¨ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªç›®å½•ï¼Œç›®å½•ä¸‹å››æ–‡ä»¶ï¼Œå¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…â¼¯å…·ä¸­å¿«é€Ÿåˆ›å»ºç»„ä»¶çš„â½‚ä»¶ç»“æ„

![image-20200309024015321](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309024015321.png)

åœ¨â½‚ä»¶å¤¹å†… `components/myHeader` ï¼Œåˆ›å»ºç»„ä»¶åä¸º` myHeader `

![image-20200309024046302](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309024046302.png)

#### 11.1.1 å£°æ˜ç»„ä»¶ 

â¾¸å…ˆéœ€è¦åœ¨==**ç»„ä»¶**==çš„` json`â½‚ä»¶ä¸­è¿›â¾â¾ƒå®šä¹‰ç»„ä»¶å£°æ˜
`myHeader.json `

```js
//å£°æ˜è¿™æ˜¯ä¸€ä¸ªç»„ä»¶
{ Â "component": true }
```

#### 11.1.2 ç¼–è¾‘ç»„ä»¶ 

åŒæ—¶ï¼Œè¿˜è¦åœ¨ç»„ä»¶çš„` wxml `â½‚ä»¶ä¸­ç¼–å†™ç»„ä»¶æ¨¡æ¿ï¼Œåœ¨` wxss `â½‚ä»¶ä¸­åŠ â¼Šç»„ä»¶æ ·å¼
`slot` è¡¨â½°æ’æ§½ï¼Œç±»ä¼¼vueä¸­çš„slot
`myHeader.wxml `

```html
<!-- è¿™æ˜¯è‡ªå®šä¹‰ç»„ä»¶çš„å†…éƒ¨WXMLç»“æ„ -->
<view class="inner">
  {{innerText}}
  <slot></slot>
</view>
```

åœ¨ç»„ä»¶çš„` wxss `â½‚ä»¶ä¸­ç¼–å†™æ ·å¼

> æ³¨æ„ï¼šåœ¨ç»„ä»¶wxssä¸­ä¸åº”ä½¿ç”¨IDé€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨å’Œæ ‡ç­¾åé€‰æ‹©å™¨ã€‚

`myHeader.wxss`

```js
/* è¿™é‡Œçš„æ ·å¼åªåº”ç”¨äºè¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶ */
.inner { Â color: red; }
```

#### 11.1.3. æ³¨å†Œç»„ä»¶  

åœ¨ç»„ä»¶çš„ ` js ` â½‚ä»¶ä¸­ï¼Œéœ€è¦ä½¿â½¤`Component()  `æ¥æ³¨å†Œç»„ä»¶ï¼Œå¹¶æä¾›ç»„ä»¶çš„å±æ€§å®šä¹‰ã€å†…éƒ¨æ•°æ®å’Œ â¾ƒå®šä¹‰â½…æ³•

`myHeader.js`

```js
Component({
  properties: {
  // innerTextå±æ€§æ˜¯ä¼ è¿‡æ¥çš„å±æ€§å
    //çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼,åœ¨è¿™é‡Œæ¥æ”¶,ä½¿ç”¨æ—¶å°±åƒæ˜¯dataä¸Šçš„æ•°æ®,ç›´æ¥ä½¿ç”¨,ä¸ç”¨å­˜,å¯ä»¥ç›´æ¥this.setDataä¿®æ”¹,æ€€ç–‘å†…éƒ¨è‡ªåŠ¨å­˜dataä¸Šäº†
    innerText: {
      // æœŸæœ›è¦çš„æ•°æ®æ˜¯ stringç±»å‹
      type: String,
      // è‹¥ä¸ä¼ å‚è¦ä½¿ç”¨çš„é»˜è®¤å€¼
      value: 'default value',
    }
  },
  data: {
    // è¿™é‡Œæ˜¯ä¸€äº›ç»„ä»¶å†…éƒ¨æ•°æ® å®šä¹‰è¦ä½¿ç”¨çš„æ•°æ®
    someData: {}
  },
  methods: {
    // è¿™é‡Œæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³• ç»„ä»¶çš„æ–¹æ³•å†™åœ¨methodså†… å’Œé¡µé¢jsæ”¾æ–¹æ³•çš„ä¸åŒ
    customMethod: function(){}
  }
})
```

### 11.2 å£°æ˜å¼•â¼Šâ¾ƒå®šä¹‰ç»„ä»¶ 

â¾¸å…ˆè¦åœ¨==**â»šâ¾¯**==çš„` json`â½‚ä»¶ä¸­è¿›â¾å¼•â½¤å£°æ˜ï¼ˆå“ªä¸ªé¡µé¢è¦ä½¿ç”¨ç»„ä»¶ï¼Œå°±åœ¨å“ªä¸ªé‡Œé¢å£°æ˜ï¼‰ã€‚è¿˜è¦æä¾›å¯¹åº”çš„ç»„ä»¶åå’Œç»„ä»¶è·¯å¾„

`index.wxml `

```js
{    
  // å¼•ç”¨å£°æ˜
  "usingComponents": {
    // è¦ä½¿ç”¨çš„ç»„ä»¶çš„åç§°		// ç»„ä»¶çš„è·¯å¾„ ä¸èƒ½è¦åç¼€
    "my-header":"/components/myHeader/myHeader"
  }
}
```

### 11.3 â»šâ¾¯ä¸­ä½¿â½¤â¾ƒå®šä¹‰ç»„ä»¶

```html
<!-- ç›´æ¥ç”¨æ ‡ç­¾å½¢å¼ä½¿ç”¨ç»„ä»¶åå³å¯ -->
<view>
  <!-- ä»¥ä¸‹æ˜¯å¯¹ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„å¼•ç”¨ -->
  <my-header inner-text="Some text">
    <view>ç”¨æ¥æ›¿ä»£slotçš„</view>
  </my-header>
</view>
```

### 11.4 å…¶ä»–å±æ€§ 

### 11.5 å®šä¹‰æ®µä¸â½°ä¾‹â½…æ³• 

`Component `æ„é€ å™¨å¯â½¤äºå®šä¹‰ç»„ä»¶ï¼Œè°ƒâ½¤`Component `æ„é€ å™¨æ—¶å¯ä»¥æŒ‡å®šç»„ä»¶çš„å±æ€§ã€æ•°æ®ã€â½…æ³• ç­‰ã€‚

+ `observers`ç±»ä¼¼`vue`ä¸­çš„`watch`,æ­¤å±æ€§åªå­˜åœ¨ç»„ä»¶ä¸­,ä¸å­˜åœ¨é¡µé¢ä¸­.
+ `attached`ç»„ä»¶çš„å®ä¾‹åŒ–éƒ½åšå®Œäº†,è¦å¼€å§‹æ¸²æŸ“é¡µé¢äº†,æ­¤æ—¶å¯ä»¥è¿›è¡Œ`setData`å¤„ç†æ•°æ®äº†
+ `ready`è¡¨ç¤ºåœ¨é¡µé¢ä¸­å·²ç»èƒ½çœ‹åˆ°å®Œæ•´çš„ç»„ä»¶äº†

![image-20200309025057965](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309025057965.png)

### 11.6 ç»„ä»¶-â¾ƒå®šä¹‰ç»„ä»¶ä¼ å‚ 

#### 11.6.1 çˆ¶å‘å­ä¼ å€¼

**â½—ç»„ä»¶é€šè¿‡==å±æ€§==çš„â½…å¼ç»™â¼¦ç»„ä»¶ä¼ é€’å‚æ•°** 

+ çˆ¶ç»„ä»¶é€šè¿‡å±æ€§ä¼ å€¼ç»™å­ç»„ä»¶

+ å­ç»„ä»¶åœ¨jsä¸­çš„`properties`æ¥æ”¶ï¼Œ`value`  è¡¨å€¼è‹¥ä¸ä¼ åˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚typeæŒ‡å®šæ¥æ”¶æ•°æ®çš„ç±»å‹,è‹¥ç±»å‹é”™è¯¯,åˆ™ä¼šè½¬æ¢ä¸ºæŒ‡å®šç±»å‹,ä¾‹è‹¥ä¼ ä¸ªundefinedåˆ™æ˜¾ç¤ºçš„å€¼æ˜¯false.

+ åœ¨å­ç»„ä»¶ç›´æ¥ä½¿ç”¨æ•°æ®,å°±åƒå®šä¹‰åœ¨dataä¸Šä¸€æ ·

+ ==æ–¹æ³•å†…éƒ¨å¯é€šè¿‡`this.data.æ•°æ®å`è·å–`properties`çš„æ•°æ®ï¼Œè¯¦ç»†å™è¿°å¦‚ä¸‹ï¼š==

     ```
     æ€»ç»“ï¼š
     å½“dataå†…æ— æŒ‡å®šåå­—æ•°æ®ï¼Œpropertiesæœ‰æ­¤æ•°æ®æ—¶ï¼Œé€šè¿‡this.data.æ•°æ®åä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è·å–åˆ°propertieså†…çš„æ•°æ®ï¼Œè‹¥dataæœ‰ï¼Œåˆ™ä¼˜å…ˆè·å–dataå†…çš„ã€‚ä¸ç®¡dataæœ‰æ²¡æœ‰æ­¤æ•°æ®ï¼Œåªè¦è¿›è¡Œäº†this.setDataé‚£ä¹ˆå°±ä¼šèµ‹å€¼ç»™dataï¼Œåç»­å†æ”¹æ•°æ®å°±æ˜¯æ”¹dataå†…çš„ï¼Œè€Œä¸æ˜¯propertiesä¸­çš„ï¼Œè¿™ç§å¹¶éæ”¹å˜æºæ•°æ®ï¼Œè€Œæ˜¯æ”¹çš„copyçš„æ•°æ®ï¼Œæ‰€ä»¥ä¸å¥½ã€‚
     
     è§£å†³æ–¹æ³•ï¼š
     çˆ¶ç»„ä»¶ä¼ æ–¹æ³•ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„æ–¹æ³•å¹¶å‘æ–¹æ³•ä¼ å‚ï¼Œçˆ¶ç»„ä»¶æ–¹æ³•æ¥æ”¶ä¼ é€’çš„å‚æ•°å¹¶æ ¹æ®æ¥æ”¶çš„ä¸œè¥¿æ›´æ”¹æºæ•°æ®ã€‚
     ```

     

![image-20200310173647432](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200310173647432.png)

#### 11.6.2 çˆ¶å‘å­ä¼ æ–¹æ³• å­é€šè¿‡è°ƒç”¨æ–¹æ³•å‘çˆ¶ä¼ æ•°æ®

**çˆ¶ç»„ä»¶ä»£ç :**

```html
<!--wxml
				1. çˆ¶ç»„ä»¶é€šè¿‡ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶å‘å­ç»„ä»¶ä¼ é€’æ–¹æ³•,æŠŠhandleItemChangeæ–¹æ³•é€šè¿‡itemchangeä¼ è¿‡å»
-->

<tabbar binditemchange="handleItemChange"></tabbar>
```

```js
// js
Page({
  handleItemChange(e){
    //	4. é€šè¿‡e.detailè·å–ä¼ è¿‡æ¥çš„å€¼
    console.log(e.detail)
  }
})
```

**å­ç»„ä»¶ä»£ç :**

```html
<!--wxml
				2. å­ç»„ä»¶è°ƒç”¨è‡ªå·±çš„æ–¹æ³•,å†…éƒ¨å†™è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•çš„ä»£ç 
-->
<view bindtap="handleTap">ç‚¹æˆ‘è§¦å‘è‡ªå·±äº‹ä»¶,è¿›ä¸€æ­¥è§¦å‘çˆ¶ç»„ä»¶äº‹ä»¶</view>
```

```js
// js
Component({
  methods: {
    handleTap(){
//			3. é€šè¿‡this.triggerEventè§¦å‘çˆ¶ç»„ä»¶çš„æ–¹æ³•,ä¸€å‚:ç»‘å®šçš„è‡ªå®šä¹‰äº‹ä»¶å,äºŒå‚:ä¼ é€’çš„æ•°æ®,é€šå¸¸ç”¨å¯¹è±¡å½¢å¼ä¼ 
      this.triggerEvent("itemchange",123)
    }
  }
})
```

### 11.7 â¼©ç»“ 

1. æ ‡ç­¾å æ˜¯ ä¸­åˆ’çº¿çš„â½…å¼
2. å±æ€§çš„â½…å¼ ä¹Ÿæ˜¯è¦ä¸­åˆ’çº¿çš„â½…å¼ 

3. å…¶ä»–æƒ…å†µå¯ä»¥ä½¿â½¤é©¼å³°å‘½å 

â€‹		1. ç»„ä»¶çš„â½‚ä»¶åå¦‚  `myHeader.js ` çš„ç­‰ 

â€‹		2. ç»„ä»¶å†…çš„è¦æ¥æ”¶çš„å±æ€§å å¦‚  `innerText`

4. [æ›´å¤šã€‚ã€‚](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html)

## 11. slotæ’æ§½

> `vue`ä¸­çš„`slot`æ’æ§½å’Œ`react`ä¸­çš„`children`ç±»ä¼¼
>
> è€Œ`miniprogram`å¾®ä¿¡å°ç¨‹åºçš„`slot`ä¹Ÿæ˜¯ä¸€æ ·çš„

**ä½œç”¨:**  çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œç»„ä»¶æ ‡ç­¾ä¸­é—´åŒ…è£¹çš„å†…å®¹ä¼šè¢«æ›¿æ¢åˆ°æ’æ§½`slot`ä¸­,  æ’æ§½åªæ˜¯å ä½ç¬¦,  ä¸ä¼šè½¬æ¢ä¸ºä»»ä½•æ ‡ç­¾ã€‚

é€šè¿‡æ’æ§½å¯ä»¥å®ç°ç‚¹å‡»ä¸åŒçš„é€‰é¡¹æ˜¾ç¤ºä¸åŒçš„å†…å®¹ã€‚è¿™é‡Œ`list[0].isActive`å°±æ˜¯é€‰ä¸­çš„æ ‡è¯†ç¬¦,é€‰ä¸­ä¸º`true`åˆ™æ˜¾ç¤ºã€‚

```html
<!--çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨<tabbar/>å­ç»„ä»¶-->
<tabbar>
  <block wx:if="{{list[0].isActive}}">0</block>
  <block wx:elif="{{list[1].isActive}}">1</block>
</tabbar>

<!--å­ç»„ä»¶-->
  <view>
    <slot></slot>
  </view>
```



## 12. â¼©ç¨‹åºâ½£å‘½å‘¨æœŸ 

åˆ†ä¸º**åº”â½¤â½£å‘½å‘¨æœŸ**å’Œ**â»šâ¾¯â½£å‘½å‘¨æœŸ**

> å…³äºå°ç¨‹åºå‰åå°çš„å®šä¹‰å’Œå°ç¨‹åºçš„è¿è¡Œæœºåˆ¶ï¼Œè¯·å‚è€ƒè¿è¡Œæœºåˆ¶ç« èŠ‚ã€‚

[ç®€ä¹¦å‚è€ƒ](https://www.jianshu.com/p/ee7c11d691c1)

### 12.1 [åº”â½¤â½£å‘½å‘¨æœŸ](https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html) 

![image-20200311082918589](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311082918589.png)

![image-20200311083643492](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311083643492.png)

æ³¨æ„:   4ä¸­æ¥æ”¶ä¸€ä¸ª`err`å‚æ•°ï¼Œæ˜¯é”™è¯¯ä¿¡æ¯

â€‹			5ä¸­ä»…å…¥å£é¡µé¢æ‰¾ä¸åˆ°æ‰ä¼šè§¦å‘ï¼Œå…¥å£é¡µé¢æŒ‡è¿›å…¥å°ç¨‹åºçœ‹åˆ°çš„ç¬¬ä¸€ä¸ªé¡µé¢

### 12.2 [â»šâ¾¯â½£å‘½å‘¨æœŸ](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html) 

**tabbar çš„é¡µé¢å±•ç°è¿‡ä¸€æ¬¡åå°±ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå†æ¬¡åˆ‡æ¢ tabbar é¡µé¢ï¼Œåªä¼šè§¦å‘æ¯ä¸ªé¡µé¢çš„onShowï¼Œä¸ä¼šå†è§¦å‘onLoadã€‚é¡µé¢ä¹Ÿåªæ˜¯å•çº¯çš„æ˜¾ç¤ºå’Œéšè—, é¡µé¢ä¸ä¼šé‡æ–°åŠ è½½å’Œæ¸²æŸ“**

**==æ³¨æ„:==**

â€‹		æœ‰ä½¿ç”¨==**è®¾ç½®æƒé™**==è¿™ç±»åŠŸèƒ½çš„,è®¾ç½®æ—¶ä¼šè·³è½¬åˆ°å¾®ä¿¡å†…ç½®çš„è®¾ç½®åŠŸèƒ½,ç›¸å½“äºåå°,ä»åå°è·³å›å‰å°, å‡½æ•°onloadå¹¶ä¸ä¼šå†æ‰§è¡Œ, ==**onload**==æŒ‡é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ, åªä¼šæ‰§è¡Œä¸€æ¬¡ ,é‚£ä¹ˆé¡µé¢å¹¶ä¸ä¼šé‡æ–°æ¸²æŸ“,å³ä¿¡æ¯å¾—ä¸åˆ°åŠæ—¶æ›´æ–°æ˜¾ç¤º

==**ç»¼ä¸Š:**==

â€‹		æœ‰è¿›è¡Œè®¾ç½®, ==**è·³è½¬åå°**==çš„,æˆ–è€…åƒ==**è´­ç‰©è½¦**==è¿™ç±»é¢‘ç¹æ‰“å¼€å’Œéšè—çš„é¡µé¢,æˆ–è€…ç”¨æˆ·äº¤äº’å¤šçš„é¡µé¢,åˆ«ç”¨onload,è¯·ä½¿ç”¨==**onshow**==ç”Ÿå‘½å‡½æ•°, æ­¤å‡½æ•°æ˜¯å½“ä»åå°åˆ‡å›å‰å°æˆ–é¡µé¢æ˜¾ç¤ºéƒ½ä¼šæ‰§è¡Œçš„å‡½æ•°,ä½œç”¨æ¯æ¬¡æ‰“å¼€å’Œéšè—éƒ½è¿›è¡Œä¸€ä¸ªåˆå§‹åŒ–,ä¼šæ‰§è¡Œå¤šæ¬¡

![image-20200311083950957](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311083950957.png)

![image-20200311084111310](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311084111310.png)

![image-20200311084322919](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311084322919.png)

![image-20200311084419163](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311084419163.png)

![image-20200311084613509](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311084613509.png)

![image-20200311084725622](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311084725622.png)

### 12.3 â»šâ¾¯â½£å‘½å‘¨æœŸå›¾è§£ 

![image-20200309030329657](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309030329657.png)

![image-20200309030345598](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200309030345598.png)

## 13. [wx.requestè¯·æ±‚èµ„æº](https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html)

### 13.1 åŸºæœ¬ä½¿ç”¨

**wx.request(Object object)ï¼Œæ›´å¤šå‚æ•°çœ‹æ–‡æ¡£**

```js
    wx.request({
      url: 'https://api-hmugo-web.itheima.net/api/public/v1/home/swiperdata',
      data:{id:1,page:2}//è‹¥è¦ä¼ å‚å¯é€šè¿‡dataä¼ 
      success: (result)=>{
        this.setData({
          swiperList:result.data.message
        })
      },
    })
```

![image-20200312104304140](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312104304140.png)

![image-20200312104326065](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312104326065.png)

### 13.2 ä¼˜åŒ–ï¼ˆæŒæ¡ï¼‰

è‹¥ç›´æ¥è€è€å®å®å†™ä»£ç å‘è¯·æ±‚ï¼Œå¾ˆå®¹æ˜“é™·å…¥å›è°ƒåœ°ç‹±ï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„ä¼˜åŒ–

```js
//åˆ›å»ºrequestç›®å½•ï¼Œä¸“é—¨å†™å¼‚æ­¥è¯·æ±‚ä»£ç ï¼Œé‡Œé¢æ ¹æ®åŠŸèƒ½åˆ†ç±»å»ºæ–‡ä»¶
//ä¾‹ï¼šå»ºindex.jsæ–‡ä»¶

export const request = (params) => {
  return new Promise((resolve, reject) => {
    wx.request({
      ...params,
      success: (result) => {
        resolve(result)
      },
      fail: (error) => {
        reject(error)
      }
    });
  })
}
```

```js
//å…¶ä»–jsæ–‡ä»¶éœ€è¦å‘è¯·æ±‚ï¼Œç›´æ¥å¼•å…¥æ­¤å‡½æ•°

import {request} from '../../request/index.js'

request({url: 'https://api-hmugo-web.itheima.net/api/public/v1/home/swiperdata'})
  .then(result=>{
  		this.setData({
    		swiperList:result.data.message
  		})
	})
	.then()//è‹¥éœ€è¦å¤šä¸ªï¼Œå¯ç»§ç»­.then å¯ä»¥æ¢è¡Œ
```



è¿™é‡Œå¼•å…¥åï¼Œå‡½æ•°æ‰§è¡Œï¼Œä¼ å‚ä¼ çš„urlï¼Œå·¥å…·å‡½æ•°æ‰§è¡Œåä¼šæŠŠè¯·æ±‚ç»“æœå³èµ„æºè¿”å›ï¼Œå†ç”¨.thenæ–¹å¼è¿›è¡Œç›¸åº”æ“ä½œã€‚

==æ³¨æ„ï¼šåœ¨`vue`æˆ–`react`ä¸­å¼•å…¥æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸º`index.js`æˆ‘ä»¬å†™è·¯å¾„æ—¶ä¼šåˆ°ç›®å½•å¤„åœæ­¢ï¼Œä¸ä¼šå†™æ–‡ä»¶åï¼Œä½†æ˜¯åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œè·¯å¾„å¿…é¡»è¡¥å…¨ï¼Œå“ªæ€•æ˜¯`index.js`ä¹Ÿå¿…é¡»å†™ã€‚==

```js
//é”™è¯¯å†™æ³•
import {request} from '../../request'

//æ­£ç¡®å†™æ³•
import {request} from '../../request/index.js'
```

### 13.3 ä¼˜åŒ–å…¬å…±è·¯å¾„ï¼ˆæŒæ¡)

> å°†å‘è¯·æ±‚çš„å…¬å…±è·¯å¾„æå–å‡ºæ¥ï¼Œ
>
> åæœŸåˆ©äºç»´æŠ¤ï¼Œå¦åˆ™ä¸Šçº¿äº†æ”¹åŸŸåï¼Œä¸€ä¸ªä¸ªæ”¹å¿™ä¸è¿‡æ¥è¿˜ææ˜“å‡ºé”™

**å®šä¹‰ï¼š**

![image-20200314111025269](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314111025269.png)

**ä½¿ç”¨ï¼š**

![image-20200314111148055](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314111148055.png)

## 14.è¯·æ±‚åŸŸååŠ ç™½åå•

é»˜è®¤å°ç¨‹åºä¸èƒ½éšæ„å‘è¯·æ±‚,ä¸¤ç§è§£å†³æ–¹å¼

#### æ–¹å¼ä¸€: ä»…é™å¼€å‘æ—¶ç”¨(ä¸æ¨è)

![image-20200312130618494](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312130618494.png)

#### æ–¹å¼äºŒ:é¡¹ç›®ä¸Šçº¿æ—¶ç”¨

**é¡¹ç›®ä¸Šçº¿æ—¶ä¼šè¦æ±‚è¯·æ±‚å¿…é¡»æ˜¯åˆæ³•çš„,æ‰€ä»¥ç”¨æ–¹å¼ä¸€å°±ä¸è¡Œäº†.**

**åˆæ³•æŒ‡ï¼š**1. åŸŸåå¿…é¡»æ˜¯httpsçš„, 

â€‹				2.å¿…é¡»æŠŠå®ƒæ·»åŠ åˆ°å°ç¨‹åºåå°é‡Œ

**è¿™é‡Œè¿›è¡Œæ¼”ç¤ºå¦‚ä½•æŠŠå°ç¨‹åºæ·»åŠ åˆ°åå°ç™½åå•ä¸­:**

1. ç™»å½•[å°ç¨‹åºåå°](https://mp.weixin.qq.com/)  

     è‹¥åœ¨æ–‡æ¡£ä¸­å¯ç”±å›¾ä¸€æ–¹å¼è¿›å…¥,æˆ–è€…ç‚¹å‡»é“¾æ¥[å°ç¨‹åºåå°](https://mp.weixin.qq.com/),æˆåŠŸåå‡æ˜¾ç¤ºå›¾äºŒé¡µé¢

![image-20200312131429976](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312131429976.png)



![image-20200312131510931](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312131510931.png)

**2. å¼€å§‹é…ç½®**

![image-20200312132110143](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312132110143.png)

**3. æ‰«ç åæ·»åŠ åŸŸåå¹¶ç¡®å®š**

![image-20200312132547683](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312132547683.png)

**4. æˆåŠŸåå¦‚å›¾(æ³¨æ„æ˜¯åŠ åŸŸå,ä¸å¸¦å…¶ä»–å‚æ•°),**

**æŠŠåŸŸååŠ åˆ°ç™½åå•åæ— éœ€æ–¹å¼ä¸€æ“ä½œå³å¯ä½¿ç”¨,ä¸Šçº¿æ—¶éƒ½è¦æ±‚è¿™ä¹ˆåšå³åŠ ç™½åå•**

![image-20200312132634940](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312132634940.png)

**å¾®ä¿¡å¼€å‘è€…å·¥å…·,åˆ·æ–°åŸŸåé…ç½®**

![image-20200312133736839](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200312133736839.png)

## 15.  [å¾®ä¿¡å°ç¨‹åºçš„æœ¬åœ°å­˜å‚¨](https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorageSync.html)

> æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½ä¼šå‘èµ·æ–°çš„è¯·æ±‚,å½“è¯·æ±‚çš„æ•°æ®ä½“ç§¯è¿‡å¤§æ—¶,æ­¤ä¸¾æè€—æ€§èƒ½.æ­¤æ—¶å¯ä»¥è€ƒè™‘æœ¬åœ°å­˜å‚¨,æé«˜æ€§èƒ½,
>
> åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä¹Ÿæœ‰ æœ¬åœ°å­˜å‚¨ æŠ€æœ¯.

![image-20200324143955674](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200324143955674.png)

**å­˜ã€å–ã€åˆ é™¤æ•°æ®(åˆ†åˆ«æœ‰åŒæ­¥æ¥å£å’Œå¼‚æ­¥æ¥å£, å…·ä½“çœ‹æ–‡æ¡£é“¾æ¥)**  :

1. æ–¹æ³•åæœ‰Syncçš„è¡¨åŒæ­¥æ“ä½œ,æ²¡æœ‰Syncçš„è¡¨å¼‚æ­¥æ“ä½œ, **æ¨èç”¨åŒæ­¥æ“ä½œ**

2. å¼‚æ­¥æ¥å£, **å‚æ•°æ˜¯objå¯¹è±¡**,å› è¿˜æœ‰æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒ,åŠä¸ç®¡æˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½æ‰§è¡Œçš„å›è°ƒ, 

     åŒæ­¥æ¥å£, **å‚æ•°æ˜¯key , data**,ä¸æ˜¯objå¯¹è±¡,å› æ˜¯åŒæ­¥,æ‰€ä»¥æ²¡å›è°ƒå‡½æ•°

###  **15.1 webæœ¬åœ°å­˜å‚¨å’Œå°ç¨‹åºçš„åŒºåˆ«:**

1. **ä»£ç ä¹¦å†™åŒºåˆ«**

 web:               localStorage**.**setItem('key','value')           localStorage**.**getItem('key')

 å¾®ä¿¡å°ç¨‹åº:   wx**.**setStorageSync('key','value')              wx**.**getStorageSync('key') 

2. **ä¼ å‚åŒºåˆ«**

 web:å‚æ•°valueçš„å­˜å–éƒ½éœ€è¦è¿›è¡Œè½¬æ¢

 å¾®ä¿¡å°ç¨‹åº: å‚æ•°valueçš„å­˜å–éƒ½ä¸éœ€è¦è½¬æ¢,å­˜è¿›å»æ˜¯ä»€ä¹ˆ,å–å‡ºæ¥å°±æ˜¯ä»€ä¹ˆ,ä¾‹å¯ç›´æ¥å­˜å¯¹è±¡è¿›å»,ä¸éœ€è½¬ä¸ºå­—ç¬¦ä¸²,å–å‡ºæ¥ä¹Ÿç›´æ¥ç”¨

### **15.2 ä»£ç ç¤ºä¾‹**

```js
//å­˜
wx.setStorageSync('categoryList',{time: Date.now(),data: this.categoryList})
//å–
const {time,data} = wx.getStorageSync('categoryList');
```

## 16. â¼©ç¨‹åºä¸­â½€æŒes7çš„asyncè¯­æ³•

es7çš„`async` å·ç§°æ˜¯è§£å†³å›è°ƒåœ°åŸŸçš„æœ€ç»ˆâ½…æ¡ˆ

#### 16.1 æ–¹æ³•ä¸€:(æ¨è)

ç°åœ¨çš„å°ç¨‹åºå¼€å‘å·¥å…·å·²ç»æ”¯æŒES7è¯­æ³•äº†ï¼Œéœ€è¦è¿›è¡Œå¦‚ä¸‹æ­¥éª¤

```
1.å‹¾é€‰ES6è½¬ES5

2.å‹¾é€‰å¢å¼ºç¼–è¯‘

3.ä½¿ç”¨ES7æ—¶æ–¹æ³•åå‰åŠ ã€asyncã€‘å…³é”®å­— å†…éƒ¨ä½¿ç”¨ã€awaitã€‘
```

å¦‚ä¸‹ç¤ºä¾‹ï¼šç”¨å¯¹è±¡ç®€æ´è¯­æ³•å†™asyncå‡½æ•°

> å½“é”®å’Œæ–¹æ³•åç›¸åŒæ—¶å¯ä»¥ç®€å†™, è€Œasyncçš„åŒºåˆ«å°±æ˜¯ åœ¨å‰é¢åŠ ä¸€ä¸ªasync
>
> awaitåé¢çš„request({ url: '/categories' }) è¿™æ˜¯promiseå¯¹è±¡,è¿”å›çš„ç»“æœå·¦è¾¹å˜é‡æ¥æ”¶

```js
{
  async getCategoryList() {
    let result = await request({ url: '/categories' })
    this.categoryList = result
  }
}
```



#### 16.2 æ–¹æ³•äºŒ: (ä»…åšäº†è§£)

è€è§†é¢‘æ—¶å°ç¨‹åºä¸æ”¯æŒes7çš„è§£å†³æ–¹æ¡ˆ,ä½†è§£å†³åä¾ç„¶ä¼šæœ‰å…¼å®¹é—®é¢˜,ä»Šå¤©æ˜¯2020-3-14å·,ç½‘ä¸Šè¯´å·²ç»æ”¯æŒes7äº†,è¿™é‡Œä¾æ—§è®°å½•ä¸‹ æ—§çš„è§£å†³æ–¹æ¡ˆ ä»…åšäº†è§£.

**è¯´æ˜**  **(æ—§è§†é¢‘çš„è¨€è®º å¦‚ä»Šå·²æ”¯æŒes7)**

â€‹	å°ç¨‹åºä¸­æ˜ç¡®è¯´æ˜åªæ”¯æŒes6è½¬es5ï¼Œä½†æœªè¯´æ˜æ”¯æŒes7ï¼Œæ‰€ä»¥==ç›´æ¥ä½¿ç”¨es7ä¼šæŠ¥é”™==, è¿™é‡Œè¿›è¡Œè§£å†³æ–¹æ¡ˆï¼ˆä»…é€‚åˆå¤§éƒ¨åˆ†æœºå‹ï¼Œä¸èƒ½å®Œå…¨è§£å†³ï¼‰ï¼Œ==åœ¨ä¸€äº›æ—§çš„æœºå‹ä¸Šä¾æ—§ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å½“éœ€è¦é€‚é…ä¸€äº›æ—§çš„æœºå‹æ—¶å°±ä¸è¦ç”¨è¿™ä¸ªæŠ€æœ¯,==å°±éœ€è¦æ”¹ä¸ºes6çš„promiseè¯­æ³•.è¿™é‡Œæš‚æ—¶ä¸è€ƒè™‘å…¼å®¹æ€§,æ ¹æ®æ­¥éª¤é…ç½®å’Œä½¿ç”¨

**è§£å†³æ–¹æ¡ˆåŠä½¿ç”¨æ­¥éª¤**

1. åœ¨â¼©ç¨‹åºçš„å¼€å‘â¼¯å…·ä¸­ï¼Œå‹¾é€‰ es6è½¬es5è¯­æ³•

     ![image-20200314113450690](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314113450690.png)

2. ä¸‹è½½ facebookçš„regeneratoråº“ä¸­çš„ [regenerator/packages/regenerator-runtime/runtime.js](https://github.com/facebook/regenerator/blob/5703a79746fffc152600fdcef46ba9230671025a/packages/regenerator-runtime/runtime.js ) ,å®ƒæ˜¯ä¸“é—¨ç”¨æ¥ç¼–è¯‘`async`è¯­æ³•çš„.

     ![image-20200314114433166](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314114433166.png)

3. åœ¨â¼©ç¨‹åºâ½¬å½•ä¸‹æ–°å»ºâ½‚ä»¶å¤¹ ` lib/runtime/runtime.js `ï¼Œå°†ä»£ç æ‹·â»‰è¿›å» 

4. åœ¨æ¯â¼€ä¸ªéœ€è¦ä½¿â½¤`async`è¯­æ³•çš„â»šâ¾¯jsâ½‚ä»¶ä¸­å¼•â¼Š,åªèƒ½å•ä¸ªå¼•å…¥ï¼ˆä¸èƒ½å…¨å±€å¼•â¼Š,å¦åˆ™æ— æ•ˆï¼‰,

     ```js
     import regeneratorRuntime from '../../lib/runtime/runtime.js';
     ```

     åªå¼•å…¥å°±å¯ä»¥äº†, æ— éœ€ä½¿ç”¨, ä¸ç”¨ç®¡`regeneratorRuntime`è¿™äº›,ç„¶åæŒ‰å¹³æ—¶å†™es7çš„asyncè¯­æ³• ç›´æ¥å†™å°±è¡Œ.

## 17. å¾®ä¿¡æ”¯ä»˜(ä»…ä¼ä¸šè´¦æˆ·ä½¿ç”¨)

### 17.1 ç®€å•ä»‹ç»

[å¾®ä¿¡æ”¯ä»˜æ¥å£æ–‡æ¡£](https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_3&index=1)

[wx.requestPayment(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/payment/wx.requestPayment.html)

å¾®ä¿¡æ”¯ä»˜åŠŸèƒ½æœ‰æƒé™è¦æ±‚: å¿…é¡»ä½¿ç”¨ä¼ä¸šè´¦å·è§’è‰²(ä¸”ç»™å¼€å‘è€…åŠ å…¥ä¼ä¸šç™½åå•) ä¸ªäººè´¦å·æ²¡æœ‰æ­¤æƒé™, æ²¡æœ‰æƒé™è¿›è¡Œå¦‚ä¸‹æ“ä½œä¼šè·å–ä¸åˆ°æ•°æ®å¯¼è‡´æŠ¥é”™.

![image-20200317160205680](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200317160205680.png)



**æˆ‘æ˜¯ä¸ªäººè´¦æˆ·,æ‰€ä»¥æ— æ³•æ¼”ç¤ºæ”¯ä»˜åŠŸèƒ½,è¿™é‡Œä¼šæ ¹æ®è§†é¢‘åšè®²è§£:**

æƒ³è¦å®ç°å¾®ä¿¡æ”¯ä»˜ä¹Ÿæ˜¯éœ€è¦æœ‰è‡ªå·±çš„åå°æœåŠ¡å™¨çš„.

### 17.2 â½€ä»˜æµç¨‹å›¾

![image-20200317194437067](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200317194437067.png)

### 17.3 å…·ä½“æ­¥éª¤

**1. ç»™ç»“ç®—æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶,åˆ¤æ–­å¦‚æœè´­ç‰©è½¦æ— å•†å“,å¼¹çª—æç¤ºå¹¶return,åˆ¤æ–­å¦‚æœåœ°å€ä¸ºç©º,å¼¹çª—æç¤ºå¹¶return,**

![image-20200319091048424](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319091048424.png)

**2. ç¬¬1æ­¥æ»¡è¶³åè·³è½¬åˆ°æ”¯ä»˜é¡µé¢**

**2.1 ç»™æ”¯ä»˜æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶**

![image-20200319091444144](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319091444144.png)

æ”¯ä»˜äº‹ä»¶è¦ç”¨åˆ°çš„ä¸œè¥¿æˆ‘å•ç‹¬å»ºç«‹å°æ ‡é¢˜è®²è§£ å¦‚å

### 17.3.1è·å–token-è·å–ç”¨æˆ·ä¿¡æ¯

```html
<!--ä¸ºbuttonæŒ‡å®šopen-typeç±»å‹ å¹¶é€šè¿‡bindgetuserinfoäº‹ä»¶ä¸­çš„eæºå¯¹è±¡è·å–ç”¨æˆ·ä¿¡æ¯-->
<button  plain type="primary" open-type="getUserInfo" bindgetuserinfo="handleGetUserInfo">
  æˆæƒ
</button>

```

![image-20200319093840125](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319093840125.png)

### 17.3.2è·å–token-è·å–codeå€¼

é€šè¿‡wx.login()äº‹ä»¶è·å–codeå€¼

![image-20200319094139972](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319094139972.png)

### 17.3.3è·å–è®¢å•å·

æ‹¿åˆ°tokenåæ ¹æ®æ¥å£æ–‡æ¡£å¯ä»¥è·å–è®¢å•å·

![image-20200319094601538](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319094601538.png)

### 17.3.4è·å–payæ”¯ä»˜å‚æ•°

æ ¹æ®è®¢å•å·å’Œtokenå¯è·å–æ”¯ä»˜å‚æ•°  è¿™é‡Œçš„payæ”¯ä»˜å‚æ•°æ˜¯è°ƒç”¨å¾®ä¿¡å†…éƒ¨æ”¯ä»˜æ–¹æ³•æ‰€éœ€çš„å‚æ•°

```json
//è¿”å›ç¤ºä¾‹
{
  "message": {
    "pay": {
      "timeStamp": "1564730510",
      "nonceStr": "SReWbt3nEmpJo3tr",
      "package": "prepay_id=wx02152148991420a3b39a90811023326800",
      "signType": "MD5",
      "paySign": "3A6943C3B865FA2B2C825CDCB33C5304"
    },
    "order_number": "HMDD20190802000000000422"
  },
  "meta": {
    "msg": "é¢„ä»˜è®¢å•ç”ŸæˆæˆåŠŸ",
    "status": 200
  }
}
```



![image-20200319094631068](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319094631068.png)

### 17.3.5å‘èµ·å¾®ä¿¡æ”¯ä»˜[wx.requestPayment(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/payment/wx.requestPayment.html)

è¿™é‡Œè°ƒç”¨å¾®ä¿¡å†…éƒ¨çš„æ”¯ä»˜åŠŸèƒ½ï¼Œ å‚æ•°éœ€è¦ç”¨åˆ°å‰é¢è·å–çš„payå‚æ•°å‘èµ·æ”¯ä»˜

[wx.requestPayment(Object object)](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/payment/wx.requestPayment.html)

![image-20200319094948066](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200319094948066.png)

### 17.3.6æŸ¥è¯¢è®¢å•çŠ¶æ€

æœ€åæ ¹æ®æ¥å£æŸ¥çœ‹æ˜¯å¦æ”¯ä»˜æˆåŠŸ æˆåŠŸæˆ–å¤±è´¥éƒ½è¦å¼¹çª—æç¤ºï¼Œè‹¥æˆåŠŸç›´æ¥è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒé¡µé¢ï¼Œä»¥ä¾¿ç”¨æˆ·æŸ¥çœ‹è®¢å•

å°†è´­ä¹°æˆåŠŸçš„å•†å“ä»è´­ç‰©è½¦ç§»é™¤ï¼Œä¹°æˆåŠŸçš„å•†å“å­˜èµ·æ¥ ä»¥ä¾¿è®¢å•é¡µé¢ä½¿ç”¨

## 18. é¡¹ç›®å‘å¸ƒ

1. ä¸å‹¾é€‰ ä¸æ ¡éªŒé€‰é¡¹, æŠŠè¦ç”¨çš„æ¥å£åŠ å°ç¨‹åºåå°ç™½åå•

![image-20200320223245435](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320223245435.png)

2. é¡¹ç›®idä¸€å®šæ˜¯ä¸ªäººçš„æˆ–ä¼ä¸šçš„id,åˆ«å†ä½¿ç”¨æµ‹è¯•id, å¦åˆ™ä½ æ˜¯ä¸èƒ½çœ‹åˆ°ä¸Šä¼ æŒ‰é’®çš„

![image-20200320223730328](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200320223730328.png)

3.ä¸Šçº¿å‰è¿›è¡ŒçœŸæœºè°ƒè¯•, ä¸”ä¿è¯æ•´ä¸ªé¡¹ç›®ä»£ç å¤§å°ä¸è¶…è¿‡ä¸¤M,è¿™æ˜¯å°ç¨‹åºè§„å®šçš„, å½“ç„¶åé¢æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†åŒ…æŠ€æœ¯æ¥è§£å†³å¤§å°ä¸¤Mçš„é™åˆ¶, åˆ†åŒ…ä¹Ÿæ˜¯ç¨‹åºé‡Œé¢æä¾›çš„åŠŸèƒ½, å®ƒå¯ä»¥æŠŠæ•´ä¸ªé¡¹ç›®æ‰“åŒ…æˆä¸åŒçš„æ¨¡å—æ¥åˆ†åˆ«ä¸Šä¼ å’Œå‘å¸ƒ,ä½†æ˜¯ä¸ç®¡æ€ä¹ˆåˆ†åŒ…,æ€»å¤§å°ä¸èƒ½è¶…è¿‡10M, æ‰€ä»¥è¿˜éœ€å¯¹ä»£ç ä¼˜åŒ–å‡å°ä»£ç ä½“ç§¯,

4.å¯¹é¡¹ç›®ç‰ˆæœ¬è®²è§£

ä¾‹ç‰ˆæœ¬1.1.2

ç¬¬ä¸€æ•°å­—:ä¸€èˆ¬æƒ…å†µä¸‹å¤§ç‰ˆæœ¬çš„è¿­ä»£ä¼šå¯¹ç¬¬ä¸€ä¸ªæ•°å­—1åšæ”¹å˜,ä¾‹1åˆ°2, 2åˆ°3, é¦–å­—æ¯(ç¬¬ä¸€æ•°å­—)æ”¹å˜ä»£è¡¨æœ€å¤§ç‰ˆæœ¬çš„æ›´æ–°

ç¬¬äºŒæ•°å­—:ä¸»è¦æ˜¯å¯¹ä¸€äº›é‡è¦åŠŸèƒ½è¿›è¡Œæ›´æ–°

ç¬¬ä¸‰æ•°å­—:æœ€å°çš„åŠŸèƒ½,æ¯”å¦‚è¡¥bug  è¡¥ä¸  å±€éƒ¨ä¼˜åŒ–, æ˜¯è¿™ç±»å¾ˆå°çš„ä¼˜åŒ–çš„,å°ç»†èŠ‚çš„.

5.ç‚¹å‡»ä¸Šä¼ æŒ‰é’®è¿›è¡Œå‘å¸ƒ

å¡«å†™ä¿¡æ¯å¹¶ä¸Šä¼ ï¼Œç„¶åç™»å½•å¾®ä¿¡å°ç¨‹åºåå°ï¼Œå†ç‰ˆæœ¬ç®¡ç†é‡Œé¢çœ‹

![image-20200321011409219](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200321011409219.png)

![image-20200321011150901](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200321011150901.png)

![image-20200321011531500](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200321011531500.png)

# é¡¹ç›®

## 1. ä½¿ç”¨é˜¿é‡Œå·´å·´å›¾æ ‡åº“

**1.å›¾æ ‡åŠ å…¥è´­ç‰©è½¦ ---> ç‚¹å‡»class ---> æœç´¢é“¾æ¥ ---> copyå†…å®¹ç²˜è´´åˆ°è‡ªå·±wxssæ–‡ä»¶**ï¼ˆæ¨èåˆ›å»º`styles`ç›®å½•å­˜æ”¾å…¬å…±æ ·å¼æ–‡ä»¶ï¼Œå°†å¯¹åº”æ–‡ä»¶å¼•å…¥åˆ°`app.wxss`ä¸­å…¨å±€ç”Ÿæ•ˆï¼Œæ‰€æœ‰é¡µé¢éƒ½èƒ½ç”¨ï¼‰

![image-20200311171044547](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311171044547.png)

![image-20200311171231040](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311171231040.png)

**2. ä½¿ç”¨**

å°†å¯¹åº”æ–‡ä»¶å¼•å…¥åˆ°`app.wxss`ä¸­å…¨å±€ç”Ÿæ•ˆï¼Œæ‰€æœ‰é¡µé¢éƒ½èƒ½ç”¨,

é€šè¿‡ç±»åä½¿ç”¨å›¾æ ‡ï¼šåŸºç¡€ç±»æ¯æ¬¡ä½¿ç”¨éƒ½è¦å†™`iconfont`  + `è¦ç”¨çš„å›¾æ ‡ç±»` 

![image-20200311172154066](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200311172154066.png)

## 2. wxsså˜é‡è®¾ç½®ä¸»é¢˜è‰²

**å®šä¹‰**

ä¸»é¢˜é¢œè‰²ä¸€èˆ¬é€šè¿‡å˜é‡å®ç°ï¼Œ`wxss`ä¹Ÿæœ‰å˜é‡ï¼Œéœ€åœ¨`page`é€‰æ‹©å™¨ä¸­å®šä¹‰

```css
<!--åœ¨å…¨å±€æ ·å¼æ–‡ä»¶app.wxssçš„pageé€‰æ‹©å™¨ä¸­å®šä¹‰å˜é‡ ,è¿™é‡Œçš„ -- æ˜¯å…³é”®å­—      -->
page{
  --themeColor:#ff4246;
}
```

**ä½¿ç”¨**

å…¨å±€æ ·å¼æ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡å…¶ä»–é¡µé¢éƒ½èƒ½ä½¿ç”¨, é€šè¿‡`var(`å˜é‡å) `

```css
view{
  color: var(--themeColor);
}
```

## 3. è®¾ç½®å…¥å£é¡µé¢ åŠä¼ å‚

**åšé¡¹ç›®çš„ä½¿ç”¨æŠ€å·§:**

æ¯æ¬¡æ›´æ”¹ä»£ç å°±ä¼šé‡æ–°è·³è½¬é¡µé¢,ä¸ºé¿å…å¤šæ¬¡ç‚¹å‡»åˆ‡æ¢é¡µé¢,å¯é€šè¿‡ç¼–è¯‘æ¨¡å¼è®¾ç½®å…¥å£é¡µé¢

![image-20200314152503299](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314152503299.png)

é¡µé¢è·¯å¾„å’Œå‚æ•°,éƒ½å¯ä»¥ç”±æ­¤æŸ¥çœ‹:

![image-20200314151928377](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314151928377.png)

## 4. åŠ è½½å›¾ç‰‡æ—¶è¿›è¡Œåˆ¤æ–­

å¯¹å›¾ç‰‡srcè¿›è¡Œåˆ¤æ–­ï¼Œè‹¥æ— å€¼åˆ™ä½¿ç”¨`æš‚æ— å›¾ç‰‡`çš„æç¤º

![image-20200314223203646](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200314223203646.png)

```html
<image src="{{img.src?img.src:'æš‚æ— å›¾ç‰‡çš„è·¯å¾„'}}" mode="widthFix"></image>
```

## 5.å°ç¨‹åºå®˜æ–¹å»ºè®®

å°ç¨‹åºå®˜æ–¹å»ºè®®dataä¸­åªå­˜æ”¾æ ‡ç­¾éœ€è¦ç”¨åˆ°çš„æ•°æ®, ä¾‹ä¸€ä¸ªobjä¸­æœ‰22ä¸ªå±æ€§, ä½†æˆ‘ä»¬åªç”¨åˆ°å…¶ä¸­4ä¸ªå±æ€§, è‹¥æŠŠ22ä¸ªéƒ½å­˜è¿›å»ä¼šå¯¼è‡´ç¨‹åºæ€§èƒ½å¡, æ‰€ä»¥æœ€å¥½è¿›è¡Œæ•°æ®å¤„ç†, åªå­˜æ”¾éœ€è¦ç”¨çš„é‚£å‡ ä¸ª.

**ä»…æ•°æ®ç±»ä¼¼è¿™ç§æ•°é‡å·®å¼‚å¤§æ—¶å†ç”¨,è‹¥æ¯ä¸ªéƒ½è¿™æ ·ä¹Ÿéº»çƒ¦**

![image-20200316011241882](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316011241882.png)

## 6.éƒ¨åˆ†è‹¹æœæ‰‹æœºä¸æ”¯æŒwebpåç¼€å›¾ç‰‡

ä¸€èˆ¬å›¾æ–‡è¯¦æƒ…éƒ½æ˜¯å¯Œæ–‡æœ¬, å³è¿”å›çš„æ•°æ®æ˜¯æ ‡ç­¾+å†…å®¹, å› æ¯ä¸ªå•†å“è¯¦æƒ…é¡µæ ¼å¼ä¸åŒ,æˆ‘ä»¬æ— æ³•å†™å›ºå®šæ ¼å¼ç»Ÿä¸€æ¸²æŸ“. 

**æ³¨æ„:** éƒ¨åˆ†è‹¹æœæ‰‹æœºä¸æ”¯æŒwebpåç¼€çš„å›¾ç‰‡( åœ¨å°ç¨‹åºä¸­ä¼šæ­£ç¡®æ¸²æŸ“,ä½†çœŸæœºè°ƒè¯•ä¸èƒ½è¯†åˆ« ),æ‰€ä»¥è‹¥é‡åˆ°è¿”å›çš„æ•°æ®æœ‰è¿™ç§çš„,éœ€å¯¹å…¶è§£å†³

![image-20200316010916213](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316010916213.png)

**è§£å†³æ–¹æ¡ˆä¸€: (çœŸæ­£å¼€å‘ä¸­ é‡‡ç”¨æ–¹æ¡ˆä¸€)**

è”ç³»åç«¯,å°†å…¶æ¢æˆæ™®é€šçš„pngã€jpgç­‰åç¼€çš„å›¾ç‰‡, ä»¥ä¾¿é€‚é…æ‰€æœ‰æœºå‹

**è§£å†³æ–¹æ¡ˆäºŒ:**

åœ¨ç¡®ä¿åç«¯ä¹Ÿ**æœ‰å…¶ä»–åç¼€**ä¸”**åŒå**å›¾ç‰‡çš„æƒ…å†µä¸‹,ä¾‹`1.webp` ===`1.jpg`,æˆ‘ä»¬æ‰‹åŠ¨å°†åç¼€å…¨éƒ¨æ›¿æ¢ä¸º`jpg`.

```js
str.replace(/\.webp/g,'.jpg')
```

## 7.pageçš„height100%

pageçš„height100% æŒ‡é™¤äº†å¤´éƒ¨å’Œtabbarï¼ˆå¦‚æœæœ‰ï¼‰å‰©ä¸‹çš„æ‰€æœ‰é«˜åº¦



## 8. åŠ å…¥è´­ç‰©è½¦æµç¨‹

**==æ³¨æ„:==**

â€‹		æœ‰ä½¿ç”¨==**è®¾ç½®æƒé™**==è¿™ç±»åŠŸèƒ½çš„,è®¾ç½®æ—¶ä¼šè·³è½¬åˆ°å¾®ä¿¡å†…ç½®çš„è®¾ç½®åŠŸèƒ½,ç›¸å½“äºåå°,ä»åå°è·³å›å‰å°, å‡½æ•°onloadå¹¶ä¸ä¼šå†æ‰§è¡Œ, ==**onload**==æŒ‡é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ, åªä¼šæ‰§è¡Œä¸€æ¬¡ ,é‚£ä¹ˆé¡µé¢å¹¶ä¸ä¼šé‡æ–°æ¸²æŸ“,å³ä¿¡æ¯å¾—ä¸åˆ°åŠæ—¶æ›´æ–°æ˜¾ç¤º

==**ç»¼ä¸Š:**==

â€‹		æœ‰è¿›è¡Œè®¾ç½®, ==**è·³è½¬åå°**==çš„,æˆ–è€…åƒ==**è´­ç‰©è½¦**==è¿™ç±»é¢‘ç¹æ‰“å¼€å’Œéšè—çš„é¡µé¢,æˆ–è€…ç”¨æˆ·äº¤äº’å¤šçš„é¡µé¢,åˆ«ç”¨onload,è¯·ä½¿ç”¨==**onshow**==ç”Ÿå‘½å‡½æ•°, æ­¤å‡½æ•°æ˜¯å½“ä»åå°åˆ‡å›å‰å°æˆ–é¡µé¢æ˜¾ç¤ºéƒ½ä¼šæ‰§è¡Œçš„å‡½æ•°,ä½œç”¨æ¯æ¬¡æ‰“å¼€å’Œéšè—éƒ½è¿›è¡Œä¸€ä¸ªåˆå§‹åŒ–,ä¼šæ‰§è¡Œå¤šæ¬¡

![image-20200316132351328](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316132351328.png)

**æµç¨‹:**

+ æ­£å¸¸æ¥è¯´æœ‰æ¥å£, è‹¥æ²¡æœ‰å°±æŠŠæ•°æ®å­˜åˆ°æœ¬åœ°å­˜å‚¨,å¯¹å…¶è¿›è¡Œå­˜å–æ“ä½œ,è´­ç‰©è½¦æ˜¯æ•°ç»„,é‡Œé¢æ¯é¡¹æ˜¯obj,ä¸€ä¸ªobjå¯¹åº”ä¸€ä¸ªå•†å“
+ ç‚¹å‡»æŒ‰é’®,
     - å–æœ¬åœ°å­˜å‚¨æ•°æ®(å–æ•°æ®è¦è¿›è¡Œåˆ¤æ–­,æœ¬åœ°å­˜å‚¨è‹¥æ— å€¼ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²è€Œéundefined,æ‰€ä»¥åº”è¿”å›`[ ]`é¿å…æŠ¥é”™)ç”¨`Array.findIndex`å¹¶å¯¹å…¶å¾ªç¯,åˆ¤æ–­å­˜å‚¨å†…æ•°æ®(å•†å“id)å’Œæ­¤æ—¶å•†å“idæ˜¯å¦ä¸€è‡´,è‹¥æœ‰åˆ™è¿”å›ä¸‹æ ‡,è‹¥æ— åˆ™è¿”å›`-1`
     - åˆ¤æ–­`ä¸‹æ ‡`å’Œ`-1`
     - è‹¥æœ‰ä¸‹æ ‡è¡¨ç¤ºä¹‹å‰å­˜è¿‡æ­¤å•†å“,å¯¹è¯¥å•†å“è´­ä¹°æ•°é‡++
     - è‹¥ä¸º`-1`,ç»„ç»‡å•†å“ä¿¡æ¯`obj`,`push`è¿›å»

**ä»£ç :**

```js
  handleCarAdd(){
    //å–æœ¬åœ°å­˜å‚¨æ•°æ®è´­ç‰©è½¦ æ•°ç»„,è‹¥æ— å€¼ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²,å¸ƒå°”å€¼è¡¨false,è¿™é‡Œè¿›è¡Œå¤„ç†è¿”å›[] é¿å…æ•°ç»„å¾ªç¯æŠ¥é”™
    const car = wx.getStorageSync("car") || [];
    //å½“å‰å•†å“ä¿¡æ¯
    const goodsObj = this.data.goodsObj
    //åˆ¤æ–­è´­ç‰©è½¦æœ‰æ— æ­¤å•†å“
    const index = car.findIndex(v=>v.goods_id==goodsObj.goods_id)
    //è‹¥æ— æ­¤å•†å“
    if(index===-1){
      goodsObj.num=1
      car.push(goodsObj)
    }else{
      //è‹¥æœ‰æ­¤å•†å“
      car[index].num++
    }
    //ä¸ç®¡æœ‰æ²¡æœ‰éƒ½éœ€é‡æ–°è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨ä¸­
    wx.setStorageSync('car', car);
    //æ·»åŠ æˆåŠŸåå¼¹å‡ºæç¤ºæ¡†
    wx.showToast({
      title: 'æ·»åŠ æˆåŠŸ',
      icon:"success",
      mask: true,
    });
  }
```

## 9. ç‚¹å‡»è´­ç‰©è½¦è·³è½¬åˆ°è´­ç‰©è½¦é¡µé¢

è·³è½¬åˆ°è´­ç‰©è½¦é¡µé¢å,æœ‰**è·å–æ”¶è´§åœ°å€**çš„æŒ‰é’®,å…·ä½“è·å–æ–¹å¼,è§**10.8** , æœ‰å¯¹åº”çš„API

![image-20200316151412896](å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200316151412896.png)

**åˆ¤æ–­æœ‰æ²¡æœ‰å€¼,ç”¨wx:ifå†³å®šå±•ç¤ºä¸åŒæ•°æ®**

<img src="å¾®ä¿¡å°ç¨‹åºçŸ¥è¯†ç‚¹.assets/image-20200317142341662.png" alt="image-20200317142341662" style="zoom:67%;" />



## 10 è¾“å…¥æ¡†æœç´¢æç¤º è§£å†³é˜²æŠ–

æ¡ˆä¾‹æ˜¯åœ¨å¾®ä¿¡å°ç¨‹åºé¡¹ç›®å†™çš„, å¾®ä¿¡å°ç¨‹åºè¾“å…¥æ¡†å€¼æ”¹å˜è§¦å‘çš„äº‹ä»¶å’Œæ—¥å¸¸inputäº‹ä»¶ä¸åŒ, æŠŠç»‘å®šçš„äº‹ä»¶åå­—æ”¹äº†å°±è¡Œ, å…¶ä»–æ²¡æœ‰ä»»ä½•åŒºåˆ«

**æœç´¢å…³é”®å­—ï¼Œå¼¹å‡ºæç¤º**

+ ç»™inputç»„ä»¶ï¼Œç»‘å®šäº‹ä»¶`bindinput`,è¾“å…¥æ¡†å€¼æ”¹å˜è§¦å‘æ­¤å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡`e.tedail.value`è·å–åˆ°è¾“å…¥çš„valueå€¼
+ å¯¹valueå€¼è¿›è¡Œåˆæ³•æ€§åˆ¤æ–­ï¼Œä¾‹å¦‚ç©ºæ ¼è¿™ç±»çš„å°±ä¸å‘é€è¯·æ±‚
+ valueå€¼åˆæ³•åï¼Œæ ¹æ®å€¼å‘é€è¯·æ±‚ç»™åå°ï¼Œè·å–æ•°æ®
+ æŠŠè·å–åˆ°çš„æ•°æ®æ¸²æŸ“å‡ºæ¥

```html
  <input placeholder="è¯·è¾“å…¥æ‚¨è¦æœç´¢çš„å•†å“å†…å®¹" bindinput="handleInput"></input>
```

```js
  handleInput(e){
    //1. è·å–è¾“å…¥æ¡†å€¼
    const {value} = e.detail
    //2. æ£€æµ‹åˆæ³•æ€§ åˆ¤æ–­å»é™¤ä¸¤ç«¯ç©ºæ ¼åçš„ç»“æœ
    if(!value.trim()){
      //ä¸åˆæ³• æ¸…ç©ºæ•°æ®
      this.setData({
        goods: [],
      })
      return
    }
    //3.å‡†å¤‡å‘é€è¯·æ±‚è·å–æ•°æ®
    //æœ‰å…³å¼‚æ­¥è¯·æ±‚çš„æœ€å¥½ç”¨asyncå‡½æ•°ï¼Œä½†æ˜¯ä¸èƒ½å°†handleInputå‡½æ•°è®¾ä¸ºasyncå‡½æ•°ï¼Œå› ä¸ºasyncå‡½æ•°æ‰§è¡Œå®Œåä¼šè¿”å›ä¸€ä¸ªpromise,è€ŒhandleInputäº‹ä»¶æœ¬èº«ç‰¹ç‚¹å°±æ˜¯ä¼šç”¨å¤„ç†å‡½æ•°çš„è¿”å›å€¼æ›¿æ¢æ‰è¾“å…¥æ¡†çš„å†…å®¹ã€‚æ‰€ä»¥è¿™é‡ŒæŠŠå‡½æ•°å•ç‹¬å†™å‡ºå»
      this.getSearchRes(value)
  },
  //å‘é€è¯·æ±‚è·å–æœç´¢å»ºè®®çš„æ•°æ®
  async getSearchRes(query){
    const goods = await request({url:"/goods/qsearch",data:{query}})
    //æŠŠæ‹¿åˆ°çš„æ•°æ®å­˜åˆ°dataä¸­ï¼Œä¼šå°†goodså†…çš„æ•°æ®æ¸²æŸ“åˆ°ä¹Ÿç±³å¨œ
    this.setData({
      goods
    })
  }
```

**è§£å†³é˜²æŠ–é—®é¢˜**

+ **é˜²æŠ–ä»‹ç»**ï¼šæ˜¯é˜²æ­¢æŠ–åŠ¨ã€‚è‹¥æ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å°±å‘èµ·ä¸€æ¬¡è¯·æ±‚å¹¶æ¸²æŸ“ç»“æœï¼Œé‚£ä¹ˆé¡µé¢å°±ä¸€ç›´åœ¨åˆ‡æ¢æ˜¾ç¤ºä¸åŒçš„å†…å®¹ï¼Œè¿™æ ·å°±åƒä¸åœçš„æŠ–åŠ¨ä¸€æ ·ã€‚

+ **é˜²æŠ–ï¼ˆé˜²æ­¢æŠ–åŠ¨ï¼‰èŠ‚æµ  ä½¿ç”¨åœºæ™¯:**
     - é˜²æŠ– ä¸€èˆ¬ç”¨æˆ·è¾“å…¥æ¡†ä¸­ï¼Œé˜²æ­¢é‡å¤è¾“å…¥ã€é‡å¤å‘é€è¯·æ±‚ã€‚
     - èŠ‚æµ ä¸€èˆ¬æ˜¯ç”¨åœ¨é¡µé¢ä¸‹æ‹‰å’Œä¸Šæ‹‰ã€‚

+ **è§£å†³æ–¹æ¡ˆ(ä½¿ç”¨å»¶æ—¶å™¨è§£å†³)**
     - è§£å†³æ€è·¯ ç›´æ¥çœ‹1.2.3ç‚¹æ–‡å­—å³å¯ å¾ˆç®€å•, å…·ä½“ä»£ç çœ‹ä¸‹é¢
     - 4ç‚¹å¿…é¡»æ¸…é™¤å»¶æ—¶å™¨å¦åˆ™æœ‰bug

```js
import { request } from '../../request/index.js'
Page({
  data: {
    goods: []
  },
  //1.å®šä¹‰å…¨å±€TimeId, æ•°å­—ä»»æ„, ä¸å½±å“
  TimeId: -1,
  handleInput(e) {
    const { value } = e.detail
    //4.è‹¥ç”¨æˆ·æ‰‹åŠ¨é”®ç›˜åˆ é™¤valueå€¼å°±æ¸…ç©ºæ•°æ®,åŒæ—¶å¿…é¡»æ¸…é™¤å»¶æ—¶,å¦‚æœä¸æ¸…é™¤å»¶æ—¶å™¨ä¼šä¾æ—§æ˜¾ç¤ºå†…å®¹,å› ä¸ºæ‰‹åŠ¨é”®ç›˜åˆ é™¤æœç´¢å€¼æ—¶ è¿˜å‘äº†ä¸ªæ•°æ®è¯·æ±‚,æ¸…ç©ºå,è¯·æ±‚æ‰å›æ¥ åˆä¼šé‡æ–°è¦†å€¼ 
    if (!value.trim()) {
      this.setData({
        goods: [],
      })
      clearTimeout(this.TimeId)
      return
    }
    //2. æ¯æ¬¡å‘è¯·æ±‚å‰æ¸…é™¤å»¶æ—¶å™¨(å“ªæ€•æ²¡æœ‰å¼€å¯å»¶æ—¶å™¨å³TimeIdå€¼ä¸å­˜åœ¨,æ¸…é™¤æ— æ•ˆ,ä¹Ÿä¸ä¼šæŠ¥é”™)
    clearTimeout(this.TimeId)
    // 3. å¼€å¯å»¶æ—¶å™¨,å°†å‘è¯·æ±‚çš„ä»£ç å†™åœ¨å»¶æ—¶å™¨å†…, handleInputäº‹ä»¶æ¯æ¬¡è§¦å‘éƒ½ä¼šæ¸…é™¤ä¸Šä¸€ä¸ªçš„å»¶æ—¶å™¨(æŠŠæ­¤å»¶æ—¶å™¨è¿”å›å€¼TimeIdèµ‹å€¼ç»™å…¨å±€TimeId),è‹¥è§¦å‘æ—¶é—´çŸ­,åˆ™ä¸Šä¸€ä¸ªå»¶æ—¶å™¨è¿˜æ²¡æ‰§è¡Œå†…éƒ¨ä»£ç ,å°±è¢«æ¸…é™¤,è¿™æ ·å¯ä»¥è¾¾åˆ°ä¸å‘å¤šæ¬¡è¯·æ±‚çš„ä½œç”¨,è€Œæœ€åä¸€æ¬¡è§¦å‘handleInputäº‹ä»¶ å¿…ç„¶ä¼šå‘èµ·è¯·æ±‚.
    this.TimeId = setTimeout(() => {
      this.getSearchRes(value)
    }, 1000);

  },
  async getSearchRes(query) {
    const goods = await request({ url: "/goods/qsearch", data: { query } })
    this.setData({
      goods
    })
  }
})
```

   